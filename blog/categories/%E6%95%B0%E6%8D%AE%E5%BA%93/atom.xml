<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: 数据库 | Ajia's Blog]]></title>
  <link href="http://ajia.github.com/blog/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/atom.xml" rel="self"/>
  <link href="http://ajia.github.com/"/>
  <updated>2015-04-03T16:05:23+08:00</updated>
  <id>http://ajia.github.com/</id>
  <author>
    <name><![CDATA[Ajia]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[常用sql]]></title>
    <link href="http://ajia.github.com/blog/2013/06/08/chang-yong-sql/"/>
    <updated>2013-06-08T11:22:00+08:00</updated>
    <id>http://ajia.github.com/blog/2013/06/08/chang-yong-sql</id>
    <content type="html"><![CDATA[<!-- more -->


<h1>查询重复的userid</h1>

<pre><code>select * from WebsiteUser where userid in 
(select userid from WebsiteUser group by userid having(count(*)&gt;1))
</code></pre>

<h1>查询多字段重复</h1>

<pre><code>select * from case_chart_key a
where (a.mruid,a.fnumber) in (select mruid,fnumber from case_chart_key group by mruid,fnumber having count(*)&gt;1)
and a.ftype=1
</code></pre>

<h1>删除重复数据</h1>

<pre><code>create table tmp (
select a.ckid, a.mruid, a.fnumber from case_chart_key a where a.ckid&lt; (select max(b.ckid) from case_chart_key b where a.mruid=b.mruid and a.fnumber=b.fnumber)
and a.ftype=1)

delete from case_chart_key where ckid in (select ckid from tmp)
commit

drop table tmp;
</code></pre>

<p>作为记录、待续</p>
]]></content>
  </entry>
  
</feed>

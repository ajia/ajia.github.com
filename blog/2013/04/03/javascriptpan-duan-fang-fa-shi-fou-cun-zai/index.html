
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>javascript遇上的几个问题 - Ajia's Blog</title>
  <meta name="author" content="Ajia">

  
  <meta name="description" content="判断方法存不存在 1
2
3
4
5
6 if(typeof(nl.onBlue)==&quot;function&quot;){ //存在 } else{ //不存在 } 把字符串转换成对象 1
2
3
var str = &#39;{id:&quot;1&quot;,name:&quot; &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ajia.github.com/blog/2013/04/03/javascriptpan-duan-fang-fa-shi-fou-cun-zai/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
   <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Ajia's Blog" type="application/atom+xml">
  <meta name="author" content="Ajia">

<meta name="description" content="Swim in the code, Ajia's blog">
<meta name="keywords" content="java, solr, cocos2d, game develop, ruby, web development, 设计模式, 数据结构, 算法, 创业">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>


  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39153617-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
</hgroup>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ajia.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Javascript遇上的几个问题</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-03T14:11:00+08:00" pubdate data-updated="true">Apr 3<span>rd</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h3>判断方法存不存在</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">nl</span><span class="p">.</span><span class="nx">onBlue</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;function&quot;</span><span class="p">){</span>
</span><span class='line'>      <span class="c1">//存在</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">else</span><span class="p">{</span>
</span><span class='line'>      <span class="c1">//不存在</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>把字符串转换成对象</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="s1">&#39;{id:&quot;1&quot;,name:&quot;aaaa&quot;}&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;var obj=&quot;</span><span class="o">+</span><span class="nx">str</span><span class="p">);</span>
</span><span class='line'><span class="nx">alert</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<!--more-->


<h3>jquery-ui的DatePicker用法</h3>

<h5>配置如下</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span> <span class="s2">&quot;#birthday&quot;</span> <span class="p">).</span><span class="nx">datepicker</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">dateFormat</span><span class="o">:</span> <span class="s2">&quot;yy-mm-dd&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">yearRange</span><span class="o">:</span> <span class="s2">&quot;1940:2000&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">changeMonth</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">changeYear</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h5>下面是中文的datepicker</h5>

<figure class='code'><figcaption><span> (jquery-ui-datepicker.js)</span> <a href='/downloads/code/jquery-ui-datepicker.js'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
<span class='line-number'>206</span>
<span class='line-number'>207</span>
<span class='line-number'>208</span>
<span class='line-number'>209</span>
<span class='line-number'>210</span>
<span class='line-number'>211</span>
<span class='line-number'>212</span>
<span class='line-number'>213</span>
<span class='line-number'>214</span>
<span class='line-number'>215</span>
<span class='line-number'>216</span>
<span class='line-number'>217</span>
<span class='line-number'>218</span>
<span class='line-number'>219</span>
<span class='line-number'>220</span>
<span class='line-number'>221</span>
<span class='line-number'>222</span>
<span class='line-number'>223</span>
<span class='line-number'>224</span>
<span class='line-number'>225</span>
<span class='line-number'>226</span>
<span class='line-number'>227</span>
<span class='line-number'>228</span>
<span class='line-number'>229</span>
<span class='line-number'>230</span>
<span class='line-number'>231</span>
<span class='line-number'>232</span>
<span class='line-number'>233</span>
<span class='line-number'>234</span>
<span class='line-number'>235</span>
<span class='line-number'>236</span>
<span class='line-number'>237</span>
<span class='line-number'>238</span>
<span class='line-number'>239</span>
<span class='line-number'>240</span>
<span class='line-number'>241</span>
<span class='line-number'>242</span>
<span class='line-number'>243</span>
<span class='line-number'>244</span>
<span class='line-number'>245</span>
<span class='line-number'>246</span>
<span class='line-number'>247</span>
<span class='line-number'>248</span>
<span class='line-number'>249</span>
<span class='line-number'>250</span>
<span class='line-number'>251</span>
<span class='line-number'>252</span>
<span class='line-number'>253</span>
<span class='line-number'>254</span>
<span class='line-number'>255</span>
<span class='line-number'>256</span>
<span class='line-number'>257</span>
<span class='line-number'>258</span>
<span class='line-number'>259</span>
<span class='line-number'>260</span>
<span class='line-number'>261</span>
<span class='line-number'>262</span>
<span class='line-number'>263</span>
<span class='line-number'>264</span>
<span class='line-number'>265</span>
<span class='line-number'>266</span>
<span class='line-number'>267</span>
<span class='line-number'>268</span>
<span class='line-number'>269</span>
<span class='line-number'>270</span>
<span class='line-number'>271</span>
<span class='line-number'>272</span>
<span class='line-number'>273</span>
<span class='line-number'>274</span>
<span class='line-number'>275</span>
<span class='line-number'>276</span>
<span class='line-number'>277</span>
<span class='line-number'>278</span>
<span class='line-number'>279</span>
<span class='line-number'>280</span>
<span class='line-number'>281</span>
<span class='line-number'>282</span>
<span class='line-number'>283</span>
<span class='line-number'>284</span>
<span class='line-number'>285</span>
<span class='line-number'>286</span>
<span class='line-number'>287</span>
<span class='line-number'>288</span>
<span class='line-number'>289</span>
<span class='line-number'>290</span>
<span class='line-number'>291</span>
<span class='line-number'>292</span>
<span class='line-number'>293</span>
<span class='line-number'>294</span>
<span class='line-number'>295</span>
<span class='line-number'>296</span>
<span class='line-number'>297</span>
<span class='line-number'>298</span>
<span class='line-number'>299</span>
<span class='line-number'>300</span>
<span class='line-number'>301</span>
<span class='line-number'>302</span>
<span class='line-number'>303</span>
<span class='line-number'>304</span>
<span class='line-number'>305</span>
<span class='line-number'>306</span>
<span class='line-number'>307</span>
<span class='line-number'>308</span>
<span class='line-number'>309</span>
<span class='line-number'>310</span>
<span class='line-number'>311</span>
<span class='line-number'>312</span>
<span class='line-number'>313</span>
<span class='line-number'>314</span>
<span class='line-number'>315</span>
<span class='line-number'>316</span>
<span class='line-number'>317</span>
<span class='line-number'>318</span>
<span class='line-number'>319</span>
<span class='line-number'>320</span>
<span class='line-number'>321</span>
<span class='line-number'>322</span>
<span class='line-number'>323</span>
<span class='line-number'>324</span>
<span class='line-number'>325</span>
<span class='line-number'>326</span>
<span class='line-number'>327</span>
<span class='line-number'>328</span>
<span class='line-number'>329</span>
<span class='line-number'>330</span>
<span class='line-number'>331</span>
<span class='line-number'>332</span>
<span class='line-number'>333</span>
<span class='line-number'>334</span>
<span class='line-number'>335</span>
<span class='line-number'>336</span>
<span class='line-number'>337</span>
<span class='line-number'>338</span>
<span class='line-number'>339</span>
<span class='line-number'>340</span>
<span class='line-number'>341</span>
<span class='line-number'>342</span>
<span class='line-number'>343</span>
<span class='line-number'>344</span>
<span class='line-number'>345</span>
<span class='line-number'>346</span>
<span class='line-number'>347</span>
<span class='line-number'>348</span>
<span class='line-number'>349</span>
<span class='line-number'>350</span>
<span class='line-number'>351</span>
<span class='line-number'>352</span>
<span class='line-number'>353</span>
<span class='line-number'>354</span>
<span class='line-number'>355</span>
<span class='line-number'>356</span>
<span class='line-number'>357</span>
<span class='line-number'>358</span>
<span class='line-number'>359</span>
<span class='line-number'>360</span>
<span class='line-number'>361</span>
<span class='line-number'>362</span>
<span class='line-number'>363</span>
<span class='line-number'>364</span>
<span class='line-number'>365</span>
<span class='line-number'>366</span>
<span class='line-number'>367</span>
<span class='line-number'>368</span>
<span class='line-number'>369</span>
<span class='line-number'>370</span>
<span class='line-number'>371</span>
<span class='line-number'>372</span>
<span class='line-number'>373</span>
<span class='line-number'>374</span>
<span class='line-number'>375</span>
<span class='line-number'>376</span>
<span class='line-number'>377</span>
<span class='line-number'>378</span>
<span class='line-number'>379</span>
<span class='line-number'>380</span>
<span class='line-number'>381</span>
<span class='line-number'>382</span>
<span class='line-number'>383</span>
<span class='line-number'>384</span>
<span class='line-number'>385</span>
<span class='line-number'>386</span>
<span class='line-number'>387</span>
<span class='line-number'>388</span>
<span class='line-number'>389</span>
<span class='line-number'>390</span>
<span class='line-number'>391</span>
<span class='line-number'>392</span>
<span class='line-number'>393</span>
<span class='line-number'>394</span>
<span class='line-number'>395</span>
<span class='line-number'>396</span>
<span class='line-number'>397</span>
<span class='line-number'>398</span>
<span class='line-number'>399</span>
<span class='line-number'>400</span>
<span class='line-number'>401</span>
<span class='line-number'>402</span>
<span class='line-number'>403</span>
<span class='line-number'>404</span>
<span class='line-number'>405</span>
<span class='line-number'>406</span>
<span class='line-number'>407</span>
<span class='line-number'>408</span>
<span class='line-number'>409</span>
<span class='line-number'>410</span>
<span class='line-number'>411</span>
<span class='line-number'>412</span>
<span class='line-number'>413</span>
<span class='line-number'>414</span>
<span class='line-number'>415</span>
<span class='line-number'>416</span>
<span class='line-number'>417</span>
<span class='line-number'>418</span>
<span class='line-number'>419</span>
<span class='line-number'>420</span>
<span class='line-number'>421</span>
<span class='line-number'>422</span>
<span class='line-number'>423</span>
<span class='line-number'>424</span>
<span class='line-number'>425</span>
<span class='line-number'>426</span>
<span class='line-number'>427</span>
<span class='line-number'>428</span>
<span class='line-number'>429</span>
<span class='line-number'>430</span>
<span class='line-number'>431</span>
<span class='line-number'>432</span>
<span class='line-number'>433</span>
<span class='line-number'>434</span>
<span class='line-number'>435</span>
<span class='line-number'>436</span>
<span class='line-number'>437</span>
<span class='line-number'>438</span>
<span class='line-number'>439</span>
<span class='line-number'>440</span>
<span class='line-number'>441</span>
<span class='line-number'>442</span>
<span class='line-number'>443</span>
<span class='line-number'>444</span>
<span class='line-number'>445</span>
<span class='line-number'>446</span>
<span class='line-number'>447</span>
<span class='line-number'>448</span>
<span class='line-number'>449</span>
<span class='line-number'>450</span>
<span class='line-number'>451</span>
<span class='line-number'>452</span>
<span class='line-number'>453</span>
<span class='line-number'>454</span>
<span class='line-number'>455</span>
<span class='line-number'>456</span>
<span class='line-number'>457</span>
<span class='line-number'>458</span>
<span class='line-number'>459</span>
<span class='line-number'>460</span>
<span class='line-number'>461</span>
<span class='line-number'>462</span>
<span class='line-number'>463</span>
<span class='line-number'>464</span>
<span class='line-number'>465</span>
<span class='line-number'>466</span>
<span class='line-number'>467</span>
<span class='line-number'>468</span>
<span class='line-number'>469</span>
<span class='line-number'>470</span>
<span class='line-number'>471</span>
<span class='line-number'>472</span>
<span class='line-number'>473</span>
<span class='line-number'>474</span>
<span class='line-number'>475</span>
<span class='line-number'>476</span>
<span class='line-number'>477</span>
<span class='line-number'>478</span>
<span class='line-number'>479</span>
<span class='line-number'>480</span>
<span class='line-number'>481</span>
<span class='line-number'>482</span>
<span class='line-number'>483</span>
<span class='line-number'>484</span>
<span class='line-number'>485</span>
<span class='line-number'>486</span>
<span class='line-number'>487</span>
<span class='line-number'>488</span>
<span class='line-number'>489</span>
<span class='line-number'>490</span>
<span class='line-number'>491</span>
<span class='line-number'>492</span>
<span class='line-number'>493</span>
<span class='line-number'>494</span>
<span class='line-number'>495</span>
<span class='line-number'>496</span>
<span class='line-number'>497</span>
<span class='line-number'>498</span>
<span class='line-number'>499</span>
<span class='line-number'>500</span>
<span class='line-number'>501</span>
<span class='line-number'>502</span>
<span class='line-number'>503</span>
<span class='line-number'>504</span>
<span class='line-number'>505</span>
<span class='line-number'>506</span>
<span class='line-number'>507</span>
<span class='line-number'>508</span>
<span class='line-number'>509</span>
<span class='line-number'>510</span>
<span class='line-number'>511</span>
<span class='line-number'>512</span>
<span class='line-number'>513</span>
<span class='line-number'>514</span>
<span class='line-number'>515</span>
<span class='line-number'>516</span>
<span class='line-number'>517</span>
<span class='line-number'>518</span>
<span class='line-number'>519</span>
<span class='line-number'>520</span>
<span class='line-number'>521</span>
<span class='line-number'>522</span>
<span class='line-number'>523</span>
<span class='line-number'>524</span>
<span class='line-number'>525</span>
<span class='line-number'>526</span>
<span class='line-number'>527</span>
<span class='line-number'>528</span>
<span class='line-number'>529</span>
<span class='line-number'>530</span>
<span class='line-number'>531</span>
<span class='line-number'>532</span>
<span class='line-number'>533</span>
<span class='line-number'>534</span>
<span class='line-number'>535</span>
<span class='line-number'>536</span>
<span class='line-number'>537</span>
<span class='line-number'>538</span>
<span class='line-number'>539</span>
<span class='line-number'>540</span>
<span class='line-number'>541</span>
<span class='line-number'>542</span>
<span class='line-number'>543</span>
<span class='line-number'>544</span>
<span class='line-number'>545</span>
<span class='line-number'>546</span>
<span class='line-number'>547</span>
<span class='line-number'>548</span>
<span class='line-number'>549</span>
<span class='line-number'>550</span>
<span class='line-number'>551</span>
<span class='line-number'>552</span>
<span class='line-number'>553</span>
<span class='line-number'>554</span>
<span class='line-number'>555</span>
<span class='line-number'>556</span>
<span class='line-number'>557</span>
<span class='line-number'>558</span>
<span class='line-number'>559</span>
<span class='line-number'>560</span>
<span class='line-number'>561</span>
<span class='line-number'>562</span>
<span class='line-number'>563</span>
<span class='line-number'>564</span>
<span class='line-number'>565</span>
<span class='line-number'>566</span>
<span class='line-number'>567</span>
<span class='line-number'>568</span>
<span class='line-number'>569</span>
<span class='line-number'>570</span>
<span class='line-number'>571</span>
<span class='line-number'>572</span>
<span class='line-number'>573</span>
<span class='line-number'>574</span>
<span class='line-number'>575</span>
<span class='line-number'>576</span>
<span class='line-number'>577</span>
<span class='line-number'>578</span>
<span class='line-number'>579</span>
<span class='line-number'>580</span>
<span class='line-number'>581</span>
<span class='line-number'>582</span>
<span class='line-number'>583</span>
<span class='line-number'>584</span>
<span class='line-number'>585</span>
<span class='line-number'>586</span>
<span class='line-number'>587</span>
<span class='line-number'>588</span>
<span class='line-number'>589</span>
<span class='line-number'>590</span>
<span class='line-number'>591</span>
<span class='line-number'>592</span>
<span class='line-number'>593</span>
<span class='line-number'>594</span>
<span class='line-number'>595</span>
<span class='line-number'>596</span>
<span class='line-number'>597</span>
<span class='line-number'>598</span>
<span class='line-number'>599</span>
<span class='line-number'>600</span>
<span class='line-number'>601</span>
<span class='line-number'>602</span>
<span class='line-number'>603</span>
<span class='line-number'>604</span>
<span class='line-number'>605</span>
<span class='line-number'>606</span>
<span class='line-number'>607</span>
<span class='line-number'>608</span>
<span class='line-number'>609</span>
<span class='line-number'>610</span>
<span class='line-number'>611</span>
<span class='line-number'>612</span>
<span class='line-number'>613</span>
<span class='line-number'>614</span>
<span class='line-number'>615</span>
<span class='line-number'>616</span>
<span class='line-number'>617</span>
<span class='line-number'>618</span>
<span class='line-number'>619</span>
<span class='line-number'>620</span>
<span class='line-number'>621</span>
<span class='line-number'>622</span>
<span class='line-number'>623</span>
<span class='line-number'>624</span>
<span class='line-number'>625</span>
<span class='line-number'>626</span>
<span class='line-number'>627</span>
<span class='line-number'>628</span>
<span class='line-number'>629</span>
<span class='line-number'>630</span>
<span class='line-number'>631</span>
<span class='line-number'>632</span>
<span class='line-number'>633</span>
<span class='line-number'>634</span>
<span class='line-number'>635</span>
<span class='line-number'>636</span>
<span class='line-number'>637</span>
<span class='line-number'>638</span>
<span class='line-number'>639</span>
<span class='line-number'>640</span>
<span class='line-number'>641</span>
<span class='line-number'>642</span>
<span class='line-number'>643</span>
<span class='line-number'>644</span>
<span class='line-number'>645</span>
<span class='line-number'>646</span>
<span class='line-number'>647</span>
<span class='line-number'>648</span>
<span class='line-number'>649</span>
<span class='line-number'>650</span>
<span class='line-number'>651</span>
<span class='line-number'>652</span>
<span class='line-number'>653</span>
<span class='line-number'>654</span>
<span class='line-number'>655</span>
<span class='line-number'>656</span>
<span class='line-number'>657</span>
<span class='line-number'>658</span>
<span class='line-number'>659</span>
<span class='line-number'>660</span>
<span class='line-number'>661</span>
<span class='line-number'>662</span>
<span class='line-number'>663</span>
<span class='line-number'>664</span>
<span class='line-number'>665</span>
<span class='line-number'>666</span>
<span class='line-number'>667</span>
<span class='line-number'>668</span>
<span class='line-number'>669</span>
<span class='line-number'>670</span>
<span class='line-number'>671</span>
<span class='line-number'>672</span>
<span class='line-number'>673</span>
<span class='line-number'>674</span>
<span class='line-number'>675</span>
<span class='line-number'>676</span>
<span class='line-number'>677</span>
<span class='line-number'>678</span>
<span class='line-number'>679</span>
<span class='line-number'>680</span>
<span class='line-number'>681</span>
<span class='line-number'>682</span>
<span class='line-number'>683</span>
<span class='line-number'>684</span>
<span class='line-number'>685</span>
<span class='line-number'>686</span>
<span class='line-number'>687</span>
<span class='line-number'>688</span>
<span class='line-number'>689</span>
<span class='line-number'>690</span>
<span class='line-number'>691</span>
<span class='line-number'>692</span>
<span class='line-number'>693</span>
<span class='line-number'>694</span>
<span class='line-number'>695</span>
<span class='line-number'>696</span>
<span class='line-number'>697</span>
<span class='line-number'>698</span>
<span class='line-number'>699</span>
<span class='line-number'>700</span>
<span class='line-number'>701</span>
<span class='line-number'>702</span>
<span class='line-number'>703</span>
<span class='line-number'>704</span>
<span class='line-number'>705</span>
<span class='line-number'>706</span>
<span class='line-number'>707</span>
<span class='line-number'>708</span>
<span class='line-number'>709</span>
<span class='line-number'>710</span>
<span class='line-number'>711</span>
<span class='line-number'>712</span>
<span class='line-number'>713</span>
<span class='line-number'>714</span>
<span class='line-number'>715</span>
<span class='line-number'>716</span>
<span class='line-number'>717</span>
<span class='line-number'>718</span>
<span class='line-number'>719</span>
<span class='line-number'>720</span>
<span class='line-number'>721</span>
<span class='line-number'>722</span>
<span class='line-number'>723</span>
<span class='line-number'>724</span>
<span class='line-number'>725</span>
<span class='line-number'>726</span>
<span class='line-number'>727</span>
<span class='line-number'>728</span>
<span class='line-number'>729</span>
<span class='line-number'>730</span>
<span class='line-number'>731</span>
<span class='line-number'>732</span>
<span class='line-number'>733</span>
<span class='line-number'>734</span>
<span class='line-number'>735</span>
<span class='line-number'>736</span>
<span class='line-number'>737</span>
<span class='line-number'>738</span>
<span class='line-number'>739</span>
<span class='line-number'>740</span>
<span class='line-number'>741</span>
<span class='line-number'>742</span>
<span class='line-number'>743</span>
<span class='line-number'>744</span>
<span class='line-number'>745</span>
<span class='line-number'>746</span>
<span class='line-number'>747</span>
<span class='line-number'>748</span>
<span class='line-number'>749</span>
<span class='line-number'>750</span>
<span class='line-number'>751</span>
<span class='line-number'>752</span>
<span class='line-number'>753</span>
<span class='line-number'>754</span>
<span class='line-number'>755</span>
<span class='line-number'>756</span>
<span class='line-number'>757</span>
<span class='line-number'>758</span>
<span class='line-number'>759</span>
<span class='line-number'>760</span>
<span class='line-number'>761</span>
<span class='line-number'>762</span>
<span class='line-number'>763</span>
<span class='line-number'>764</span>
<span class='line-number'>765</span>
<span class='line-number'>766</span>
<span class='line-number'>767</span>
<span class='line-number'>768</span>
<span class='line-number'>769</span>
<span class='line-number'>770</span>
<span class='line-number'>771</span>
<span class='line-number'>772</span>
<span class='line-number'>773</span>
<span class='line-number'>774</span>
<span class='line-number'>775</span>
<span class='line-number'>776</span>
<span class='line-number'>777</span>
<span class='line-number'>778</span>
<span class='line-number'>779</span>
<span class='line-number'>780</span>
<span class='line-number'>781</span>
<span class='line-number'>782</span>
<span class='line-number'>783</span>
<span class='line-number'>784</span>
<span class='line-number'>785</span>
<span class='line-number'>786</span>
<span class='line-number'>787</span>
<span class='line-number'>788</span>
<span class='line-number'>789</span>
<span class='line-number'>790</span>
<span class='line-number'>791</span>
<span class='line-number'>792</span>
<span class='line-number'>793</span>
<span class='line-number'>794</span>
<span class='line-number'>795</span>
<span class='line-number'>796</span>
<span class='line-number'>797</span>
<span class='line-number'>798</span>
<span class='line-number'>799</span>
<span class='line-number'>800</span>
<span class='line-number'>801</span>
<span class='line-number'>802</span>
<span class='line-number'>803</span>
<span class='line-number'>804</span>
<span class='line-number'>805</span>
<span class='line-number'>806</span>
<span class='line-number'>807</span>
<span class='line-number'>808</span>
<span class='line-number'>809</span>
<span class='line-number'>810</span>
<span class='line-number'>811</span>
<span class='line-number'>812</span>
<span class='line-number'>813</span>
<span class='line-number'>814</span>
<span class='line-number'>815</span>
<span class='line-number'>816</span>
<span class='line-number'>817</span>
<span class='line-number'>818</span>
<span class='line-number'>819</span>
<span class='line-number'>820</span>
<span class='line-number'>821</span>
<span class='line-number'>822</span>
<span class='line-number'>823</span>
<span class='line-number'>824</span>
<span class='line-number'>825</span>
<span class='line-number'>826</span>
<span class='line-number'>827</span>
<span class='line-number'>828</span>
<span class='line-number'>829</span>
<span class='line-number'>830</span>
<span class='line-number'>831</span>
<span class='line-number'>832</span>
<span class='line-number'>833</span>
<span class='line-number'>834</span>
<span class='line-number'>835</span>
<span class='line-number'>836</span>
<span class='line-number'>837</span>
<span class='line-number'>838</span>
<span class='line-number'>839</span>
<span class='line-number'>840</span>
<span class='line-number'>841</span>
<span class='line-number'>842</span>
<span class='line-number'>843</span>
<span class='line-number'>844</span>
<span class='line-number'>845</span>
<span class='line-number'>846</span>
<span class='line-number'>847</span>
<span class='line-number'>848</span>
<span class='line-number'>849</span>
<span class='line-number'>850</span>
<span class='line-number'>851</span>
<span class='line-number'>852</span>
<span class='line-number'>853</span>
<span class='line-number'>854</span>
<span class='line-number'>855</span>
<span class='line-number'>856</span>
<span class='line-number'>857</span>
<span class='line-number'>858</span>
<span class='line-number'>859</span>
<span class='line-number'>860</span>
<span class='line-number'>861</span>
<span class='line-number'>862</span>
<span class='line-number'>863</span>
<span class='line-number'>864</span>
<span class='line-number'>865</span>
<span class='line-number'>866</span>
<span class='line-number'>867</span>
<span class='line-number'>868</span>
<span class='line-number'>869</span>
<span class='line-number'>870</span>
<span class='line-number'>871</span>
<span class='line-number'>872</span>
<span class='line-number'>873</span>
<span class='line-number'>874</span>
<span class='line-number'>875</span>
<span class='line-number'>876</span>
<span class='line-number'>877</span>
<span class='line-number'>878</span>
<span class='line-number'>879</span>
<span class='line-number'>880</span>
<span class='line-number'>881</span>
<span class='line-number'>882</span>
<span class='line-number'>883</span>
<span class='line-number'>884</span>
<span class='line-number'>885</span>
<span class='line-number'>886</span>
<span class='line-number'>887</span>
<span class='line-number'>888</span>
<span class='line-number'>889</span>
<span class='line-number'>890</span>
<span class='line-number'>891</span>
<span class='line-number'>892</span>
<span class='line-number'>893</span>
<span class='line-number'>894</span>
<span class='line-number'>895</span>
<span class='line-number'>896</span>
<span class='line-number'>897</span>
<span class='line-number'>898</span>
<span class='line-number'>899</span>
<span class='line-number'>900</span>
<span class='line-number'>901</span>
<span class='line-number'>902</span>
<span class='line-number'>903</span>
<span class='line-number'>904</span>
<span class='line-number'>905</span>
<span class='line-number'>906</span>
<span class='line-number'>907</span>
<span class='line-number'>908</span>
<span class='line-number'>909</span>
<span class='line-number'>910</span>
<span class='line-number'>911</span>
<span class='line-number'>912</span>
<span class='line-number'>913</span>
<span class='line-number'>914</span>
<span class='line-number'>915</span>
<span class='line-number'>916</span>
<span class='line-number'>917</span>
<span class='line-number'>918</span>
<span class='line-number'>919</span>
<span class='line-number'>920</span>
<span class='line-number'>921</span>
<span class='line-number'>922</span>
<span class='line-number'>923</span>
<span class='line-number'>924</span>
<span class='line-number'>925</span>
<span class='line-number'>926</span>
<span class='line-number'>927</span>
<span class='line-number'>928</span>
<span class='line-number'>929</span>
<span class='line-number'>930</span>
<span class='line-number'>931</span>
<span class='line-number'>932</span>
<span class='line-number'>933</span>
<span class='line-number'>934</span>
<span class='line-number'>935</span>
<span class='line-number'>936</span>
<span class='line-number'>937</span>
<span class='line-number'>938</span>
<span class='line-number'>939</span>
<span class='line-number'>940</span>
<span class='line-number'>941</span>
<span class='line-number'>942</span>
<span class='line-number'>943</span>
<span class='line-number'>944</span>
<span class='line-number'>945</span>
<span class='line-number'>946</span>
<span class='line-number'>947</span>
<span class='line-number'>948</span>
<span class='line-number'>949</span>
<span class='line-number'>950</span>
<span class='line-number'>951</span>
<span class='line-number'>952</span>
<span class='line-number'>953</span>
<span class='line-number'>954</span>
<span class='line-number'>955</span>
<span class='line-number'>956</span>
<span class='line-number'>957</span>
<span class='line-number'>958</span>
<span class='line-number'>959</span>
<span class='line-number'>960</span>
<span class='line-number'>961</span>
<span class='line-number'>962</span>
<span class='line-number'>963</span>
<span class='line-number'>964</span>
<span class='line-number'>965</span>
<span class='line-number'>966</span>
<span class='line-number'>967</span>
<span class='line-number'>968</span>
<span class='line-number'>969</span>
<span class='line-number'>970</span>
<span class='line-number'>971</span>
<span class='line-number'>972</span>
<span class='line-number'>973</span>
<span class='line-number'>974</span>
<span class='line-number'>975</span>
<span class='line-number'>976</span>
<span class='line-number'>977</span>
<span class='line-number'>978</span>
<span class='line-number'>979</span>
<span class='line-number'>980</span>
<span class='line-number'>981</span>
<span class='line-number'>982</span>
<span class='line-number'>983</span>
<span class='line-number'>984</span>
<span class='line-number'>985</span>
<span class='line-number'>986</span>
<span class='line-number'>987</span>
<span class='line-number'>988</span>
<span class='line-number'>989</span>
<span class='line-number'>990</span>
<span class='line-number'>991</span>
<span class='line-number'>992</span>
<span class='line-number'>993</span>
<span class='line-number'>994</span>
<span class='line-number'>995</span>
<span class='line-number'>996</span>
<span class='line-number'>997</span>
<span class='line-number'>998</span>
<span class='line-number'>999</span>
<span class='line-number'>1000</span>
<span class='line-number'>1001</span>
<span class='line-number'>1002</span>
<span class='line-number'>1003</span>
<span class='line-number'>1004</span>
<span class='line-number'>1005</span>
<span class='line-number'>1006</span>
<span class='line-number'>1007</span>
<span class='line-number'>1008</span>
<span class='line-number'>1009</span>
<span class='line-number'>1010</span>
<span class='line-number'>1011</span>
<span class='line-number'>1012</span>
<span class='line-number'>1013</span>
<span class='line-number'>1014</span>
<span class='line-number'>1015</span>
<span class='line-number'>1016</span>
<span class='line-number'>1017</span>
<span class='line-number'>1018</span>
<span class='line-number'>1019</span>
<span class='line-number'>1020</span>
<span class='line-number'>1021</span>
<span class='line-number'>1022</span>
<span class='line-number'>1023</span>
<span class='line-number'>1024</span>
<span class='line-number'>1025</span>
<span class='line-number'>1026</span>
<span class='line-number'>1027</span>
<span class='line-number'>1028</span>
<span class='line-number'>1029</span>
<span class='line-number'>1030</span>
<span class='line-number'>1031</span>
<span class='line-number'>1032</span>
<span class='line-number'>1033</span>
<span class='line-number'>1034</span>
<span class='line-number'>1035</span>
<span class='line-number'>1036</span>
<span class='line-number'>1037</span>
<span class='line-number'>1038</span>
<span class='line-number'>1039</span>
<span class='line-number'>1040</span>
<span class='line-number'>1041</span>
<span class='line-number'>1042</span>
<span class='line-number'>1043</span>
<span class='line-number'>1044</span>
<span class='line-number'>1045</span>
<span class='line-number'>1046</span>
<span class='line-number'>1047</span>
<span class='line-number'>1048</span>
<span class='line-number'>1049</span>
<span class='line-number'>1050</span>
<span class='line-number'>1051</span>
<span class='line-number'>1052</span>
<span class='line-number'>1053</span>
<span class='line-number'>1054</span>
<span class='line-number'>1055</span>
<span class='line-number'>1056</span>
<span class='line-number'>1057</span>
<span class='line-number'>1058</span>
<span class='line-number'>1059</span>
<span class='line-number'>1060</span>
<span class='line-number'>1061</span>
<span class='line-number'>1062</span>
<span class='line-number'>1063</span>
<span class='line-number'>1064</span>
<span class='line-number'>1065</span>
<span class='line-number'>1066</span>
<span class='line-number'>1067</span>
<span class='line-number'>1068</span>
<span class='line-number'>1069</span>
<span class='line-number'>1070</span>
<span class='line-number'>1071</span>
<span class='line-number'>1072</span>
<span class='line-number'>1073</span>
<span class='line-number'>1074</span>
<span class='line-number'>1075</span>
<span class='line-number'>1076</span>
<span class='line-number'>1077</span>
<span class='line-number'>1078</span>
<span class='line-number'>1079</span>
<span class='line-number'>1080</span>
<span class='line-number'>1081</span>
<span class='line-number'>1082</span>
<span class='line-number'>1083</span>
<span class='line-number'>1084</span>
<span class='line-number'>1085</span>
<span class='line-number'>1086</span>
<span class='line-number'>1087</span>
<span class='line-number'>1088</span>
<span class='line-number'>1089</span>
<span class='line-number'>1090</span>
<span class='line-number'>1091</span>
<span class='line-number'>1092</span>
<span class='line-number'>1093</span>
<span class='line-number'>1094</span>
<span class='line-number'>1095</span>
<span class='line-number'>1096</span>
<span class='line-number'>1097</span>
<span class='line-number'>1098</span>
<span class='line-number'>1099</span>
<span class='line-number'>1100</span>
<span class='line-number'>1101</span>
<span class='line-number'>1102</span>
<span class='line-number'>1103</span>
<span class='line-number'>1104</span>
<span class='line-number'>1105</span>
<span class='line-number'>1106</span>
<span class='line-number'>1107</span>
<span class='line-number'>1108</span>
<span class='line-number'>1109</span>
<span class='line-number'>1110</span>
<span class='line-number'>1111</span>
<span class='line-number'>1112</span>
<span class='line-number'>1113</span>
<span class='line-number'>1114</span>
<span class='line-number'>1115</span>
<span class='line-number'>1116</span>
<span class='line-number'>1117</span>
<span class='line-number'>1118</span>
<span class='line-number'>1119</span>
<span class='line-number'>1120</span>
<span class='line-number'>1121</span>
<span class='line-number'>1122</span>
<span class='line-number'>1123</span>
<span class='line-number'>1124</span>
<span class='line-number'>1125</span>
<span class='line-number'>1126</span>
<span class='line-number'>1127</span>
<span class='line-number'>1128</span>
<span class='line-number'>1129</span>
<span class='line-number'>1130</span>
<span class='line-number'>1131</span>
<span class='line-number'>1132</span>
<span class='line-number'>1133</span>
<span class='line-number'>1134</span>
<span class='line-number'>1135</span>
<span class='line-number'>1136</span>
<span class='line-number'>1137</span>
<span class='line-number'>1138</span>
<span class='line-number'>1139</span>
<span class='line-number'>1140</span>
<span class='line-number'>1141</span>
<span class='line-number'>1142</span>
<span class='line-number'>1143</span>
<span class='line-number'>1144</span>
<span class='line-number'>1145</span>
<span class='line-number'>1146</span>
<span class='line-number'>1147</span>
<span class='line-number'>1148</span>
<span class='line-number'>1149</span>
<span class='line-number'>1150</span>
<span class='line-number'>1151</span>
<span class='line-number'>1152</span>
<span class='line-number'>1153</span>
<span class='line-number'>1154</span>
<span class='line-number'>1155</span>
<span class='line-number'>1156</span>
<span class='line-number'>1157</span>
<span class='line-number'>1158</span>
<span class='line-number'>1159</span>
<span class='line-number'>1160</span>
<span class='line-number'>1161</span>
<span class='line-number'>1162</span>
<span class='line-number'>1163</span>
<span class='line-number'>1164</span>
<span class='line-number'>1165</span>
<span class='line-number'>1166</span>
<span class='line-number'>1167</span>
<span class='line-number'>1168</span>
<span class='line-number'>1169</span>
<span class='line-number'>1170</span>
<span class='line-number'>1171</span>
<span class='line-number'>1172</span>
<span class='line-number'>1173</span>
<span class='line-number'>1174</span>
<span class='line-number'>1175</span>
<span class='line-number'>1176</span>
<span class='line-number'>1177</span>
<span class='line-number'>1178</span>
<span class='line-number'>1179</span>
<span class='line-number'>1180</span>
<span class='line-number'>1181</span>
<span class='line-number'>1182</span>
<span class='line-number'>1183</span>
<span class='line-number'>1184</span>
<span class='line-number'>1185</span>
<span class='line-number'>1186</span>
<span class='line-number'>1187</span>
<span class='line-number'>1188</span>
<span class='line-number'>1189</span>
<span class='line-number'>1190</span>
<span class='line-number'>1191</span>
<span class='line-number'>1192</span>
<span class='line-number'>1193</span>
<span class='line-number'>1194</span>
<span class='line-number'>1195</span>
<span class='line-number'>1196</span>
<span class='line-number'>1197</span>
<span class='line-number'>1198</span>
<span class='line-number'>1199</span>
<span class='line-number'>1200</span>
<span class='line-number'>1201</span>
<span class='line-number'>1202</span>
<span class='line-number'>1203</span>
<span class='line-number'>1204</span>
<span class='line-number'>1205</span>
<span class='line-number'>1206</span>
<span class='line-number'>1207</span>
<span class='line-number'>1208</span>
<span class='line-number'>1209</span>
<span class='line-number'>1210</span>
<span class='line-number'>1211</span>
<span class='line-number'>1212</span>
<span class='line-number'>1213</span>
<span class='line-number'>1214</span>
<span class='line-number'>1215</span>
<span class='line-number'>1216</span>
<span class='line-number'>1217</span>
<span class='line-number'>1218</span>
<span class='line-number'>1219</span>
<span class='line-number'>1220</span>
<span class='line-number'>1221</span>
<span class='line-number'>1222</span>
<span class='line-number'>1223</span>
<span class='line-number'>1224</span>
<span class='line-number'>1225</span>
<span class='line-number'>1226</span>
<span class='line-number'>1227</span>
<span class='line-number'>1228</span>
<span class='line-number'>1229</span>
<span class='line-number'>1230</span>
<span class='line-number'>1231</span>
<span class='line-number'>1232</span>
<span class='line-number'>1233</span>
<span class='line-number'>1234</span>
<span class='line-number'>1235</span>
<span class='line-number'>1236</span>
<span class='line-number'>1237</span>
<span class='line-number'>1238</span>
<span class='line-number'>1239</span>
<span class='line-number'>1240</span>
<span class='line-number'>1241</span>
<span class='line-number'>1242</span>
<span class='line-number'>1243</span>
<span class='line-number'>1244</span>
<span class='line-number'>1245</span>
<span class='line-number'>1246</span>
<span class='line-number'>1247</span>
<span class='line-number'>1248</span>
<span class='line-number'>1249</span>
<span class='line-number'>1250</span>
<span class='line-number'>1251</span>
<span class='line-number'>1252</span>
<span class='line-number'>1253</span>
<span class='line-number'>1254</span>
<span class='line-number'>1255</span>
<span class='line-number'>1256</span>
<span class='line-number'>1257</span>
<span class='line-number'>1258</span>
<span class='line-number'>1259</span>
<span class='line-number'>1260</span>
<span class='line-number'>1261</span>
<span class='line-number'>1262</span>
<span class='line-number'>1263</span>
<span class='line-number'>1264</span>
<span class='line-number'>1265</span>
<span class='line-number'>1266</span>
<span class='line-number'>1267</span>
<span class='line-number'>1268</span>
<span class='line-number'>1269</span>
<span class='line-number'>1270</span>
<span class='line-number'>1271</span>
<span class='line-number'>1272</span>
<span class='line-number'>1273</span>
<span class='line-number'>1274</span>
<span class='line-number'>1275</span>
<span class='line-number'>1276</span>
<span class='line-number'>1277</span>
<span class='line-number'>1278</span>
<span class='line-number'>1279</span>
<span class='line-number'>1280</span>
<span class='line-number'>1281</span>
<span class='line-number'>1282</span>
<span class='line-number'>1283</span>
<span class='line-number'>1284</span>
<span class='line-number'>1285</span>
<span class='line-number'>1286</span>
<span class='line-number'>1287</span>
<span class='line-number'>1288</span>
<span class='line-number'>1289</span>
<span class='line-number'>1290</span>
<span class='line-number'>1291</span>
<span class='line-number'>1292</span>
<span class='line-number'>1293</span>
<span class='line-number'>1294</span>
<span class='line-number'>1295</span>
<span class='line-number'>1296</span>
<span class='line-number'>1297</span>
<span class='line-number'>1298</span>
<span class='line-number'>1299</span>
<span class='line-number'>1300</span>
<span class='line-number'>1301</span>
<span class='line-number'>1302</span>
<span class='line-number'>1303</span>
<span class='line-number'>1304</span>
<span class='line-number'>1305</span>
<span class='line-number'>1306</span>
<span class='line-number'>1307</span>
<span class='line-number'>1308</span>
<span class='line-number'>1309</span>
<span class='line-number'>1310</span>
<span class='line-number'>1311</span>
<span class='line-number'>1312</span>
<span class='line-number'>1313</span>
<span class='line-number'>1314</span>
<span class='line-number'>1315</span>
<span class='line-number'>1316</span>
<span class='line-number'>1317</span>
<span class='line-number'>1318</span>
<span class='line-number'>1319</span>
<span class='line-number'>1320</span>
<span class='line-number'>1321</span>
<span class='line-number'>1322</span>
<span class='line-number'>1323</span>
<span class='line-number'>1324</span>
<span class='line-number'>1325</span>
<span class='line-number'>1326</span>
<span class='line-number'>1327</span>
<span class='line-number'>1328</span>
<span class='line-number'>1329</span>
<span class='line-number'>1330</span>
<span class='line-number'>1331</span>
<span class='line-number'>1332</span>
<span class='line-number'>1333</span>
<span class='line-number'>1334</span>
<span class='line-number'>1335</span>
<span class='line-number'>1336</span>
<span class='line-number'>1337</span>
<span class='line-number'>1338</span>
<span class='line-number'>1339</span>
<span class='line-number'>1340</span>
<span class='line-number'>1341</span>
<span class='line-number'>1342</span>
<span class='line-number'>1343</span>
<span class='line-number'>1344</span>
<span class='line-number'>1345</span>
<span class='line-number'>1346</span>
<span class='line-number'>1347</span>
<span class='line-number'>1348</span>
<span class='line-number'>1349</span>
<span class='line-number'>1350</span>
<span class='line-number'>1351</span>
<span class='line-number'>1352</span>
<span class='line-number'>1353</span>
<span class='line-number'>1354</span>
<span class='line-number'>1355</span>
<span class='line-number'>1356</span>
<span class='line-number'>1357</span>
<span class='line-number'>1358</span>
<span class='line-number'>1359</span>
<span class='line-number'>1360</span>
<span class='line-number'>1361</span>
<span class='line-number'>1362</span>
<span class='line-number'>1363</span>
<span class='line-number'>1364</span>
<span class='line-number'>1365</span>
<span class='line-number'>1366</span>
<span class='line-number'>1367</span>
<span class='line-number'>1368</span>
<span class='line-number'>1369</span>
<span class='line-number'>1370</span>
<span class='line-number'>1371</span>
<span class='line-number'>1372</span>
<span class='line-number'>1373</span>
<span class='line-number'>1374</span>
<span class='line-number'>1375</span>
<span class='line-number'>1376</span>
<span class='line-number'>1377</span>
<span class='line-number'>1378</span>
<span class='line-number'>1379</span>
<span class='line-number'>1380</span>
<span class='line-number'>1381</span>
<span class='line-number'>1382</span>
<span class='line-number'>1383</span>
<span class='line-number'>1384</span>
<span class='line-number'>1385</span>
<span class='line-number'>1386</span>
<span class='line-number'>1387</span>
<span class='line-number'>1388</span>
<span class='line-number'>1389</span>
<span class='line-number'>1390</span>
<span class='line-number'>1391</span>
<span class='line-number'>1392</span>
<span class='line-number'>1393</span>
<span class='line-number'>1394</span>
<span class='line-number'>1395</span>
<span class='line-number'>1396</span>
<span class='line-number'>1397</span>
<span class='line-number'>1398</span>
<span class='line-number'>1399</span>
<span class='line-number'>1400</span>
<span class='line-number'>1401</span>
<span class='line-number'>1402</span>
<span class='line-number'>1403</span>
<span class='line-number'>1404</span>
<span class='line-number'>1405</span>
<span class='line-number'>1406</span>
<span class='line-number'>1407</span>
<span class='line-number'>1408</span>
<span class='line-number'>1409</span>
<span class='line-number'>1410</span>
<span class='line-number'>1411</span>
<span class='line-number'>1412</span>
<span class='line-number'>1413</span>
<span class='line-number'>1414</span>
<span class='line-number'>1415</span>
<span class='line-number'>1416</span>
<span class='line-number'>1417</span>
<span class='line-number'>1418</span>
<span class='line-number'>1419</span>
<span class='line-number'>1420</span>
<span class='line-number'>1421</span>
<span class='line-number'>1422</span>
<span class='line-number'>1423</span>
<span class='line-number'>1424</span>
<span class='line-number'>1425</span>
<span class='line-number'>1426</span>
<span class='line-number'>1427</span>
<span class='line-number'>1428</span>
<span class='line-number'>1429</span>
<span class='line-number'>1430</span>
<span class='line-number'>1431</span>
<span class='line-number'>1432</span>
<span class='line-number'>1433</span>
<span class='line-number'>1434</span>
<span class='line-number'>1435</span>
<span class='line-number'>1436</span>
<span class='line-number'>1437</span>
<span class='line-number'>1438</span>
<span class='line-number'>1439</span>
<span class='line-number'>1440</span>
<span class='line-number'>1441</span>
<span class='line-number'>1442</span>
<span class='line-number'>1443</span>
<span class='line-number'>1444</span>
<span class='line-number'>1445</span>
<span class='line-number'>1446</span>
<span class='line-number'>1447</span>
<span class='line-number'>1448</span>
<span class='line-number'>1449</span>
<span class='line-number'>1450</span>
<span class='line-number'>1451</span>
<span class='line-number'>1452</span>
<span class='line-number'>1453</span>
<span class='line-number'>1454</span>
<span class='line-number'>1455</span>
<span class='line-number'>1456</span>
<span class='line-number'>1457</span>
<span class='line-number'>1458</span>
<span class='line-number'>1459</span>
<span class='line-number'>1460</span>
<span class='line-number'>1461</span>
<span class='line-number'>1462</span>
<span class='line-number'>1463</span>
<span class='line-number'>1464</span>
<span class='line-number'>1465</span>
<span class='line-number'>1466</span>
<span class='line-number'>1467</span>
<span class='line-number'>1468</span>
<span class='line-number'>1469</span>
<span class='line-number'>1470</span>
<span class='line-number'>1471</span>
<span class='line-number'>1472</span>
<span class='line-number'>1473</span>
<span class='line-number'>1474</span>
<span class='line-number'>1475</span>
<span class='line-number'>1476</span>
<span class='line-number'>1477</span>
<span class='line-number'>1478</span>
<span class='line-number'>1479</span>
<span class='line-number'>1480</span>
<span class='line-number'>1481</span>
<span class='line-number'>1482</span>
<span class='line-number'>1483</span>
<span class='line-number'>1484</span>
<span class='line-number'>1485</span>
<span class='line-number'>1486</span>
<span class='line-number'>1487</span>
<span class='line-number'>1488</span>
<span class='line-number'>1489</span>
<span class='line-number'>1490</span>
<span class='line-number'>1491</span>
<span class='line-number'>1492</span>
<span class='line-number'>1493</span>
<span class='line-number'>1494</span>
<span class='line-number'>1495</span>
<span class='line-number'>1496</span>
<span class='line-number'>1497</span>
<span class='line-number'>1498</span>
<span class='line-number'>1499</span>
<span class='line-number'>1500</span>
<span class='line-number'>1501</span>
<span class='line-number'>1502</span>
<span class='line-number'>1503</span>
<span class='line-number'>1504</span>
<span class='line-number'>1505</span>
<span class='line-number'>1506</span>
<span class='line-number'>1507</span>
<span class='line-number'>1508</span>
<span class='line-number'>1509</span>
<span class='line-number'>1510</span>
<span class='line-number'>1511</span>
<span class='line-number'>1512</span>
<span class='line-number'>1513</span>
<span class='line-number'>1514</span>
<span class='line-number'>1515</span>
<span class='line-number'>1516</span>
<span class='line-number'>1517</span>
<span class='line-number'>1518</span>
<span class='line-number'>1519</span>
<span class='line-number'>1520</span>
<span class='line-number'>1521</span>
<span class='line-number'>1522</span>
<span class='line-number'>1523</span>
<span class='line-number'>1524</span>
<span class='line-number'>1525</span>
<span class='line-number'>1526</span>
<span class='line-number'>1527</span>
<span class='line-number'>1528</span>
<span class='line-number'>1529</span>
<span class='line-number'>1530</span>
<span class='line-number'>1531</span>
<span class='line-number'>1532</span>
<span class='line-number'>1533</span>
<span class='line-number'>1534</span>
<span class='line-number'>1535</span>
<span class='line-number'>1536</span>
<span class='line-number'>1537</span>
<span class='line-number'>1538</span>
<span class='line-number'>1539</span>
<span class='line-number'>1540</span>
<span class='line-number'>1541</span>
<span class='line-number'>1542</span>
<span class='line-number'>1543</span>
<span class='line-number'>1544</span>
<span class='line-number'>1545</span>
<span class='line-number'>1546</span>
<span class='line-number'>1547</span>
<span class='line-number'>1548</span>
<span class='line-number'>1549</span>
<span class='line-number'>1550</span>
<span class='line-number'>1551</span>
<span class='line-number'>1552</span>
<span class='line-number'>1553</span>
<span class='line-number'>1554</span>
<span class='line-number'>1555</span>
<span class='line-number'>1556</span>
<span class='line-number'>1557</span>
<span class='line-number'>1558</span>
<span class='line-number'>1559</span>
<span class='line-number'>1560</span>
<span class='line-number'>1561</span>
<span class='line-number'>1562</span>
<span class='line-number'>1563</span>
<span class='line-number'>1564</span>
<span class='line-number'>1565</span>
<span class='line-number'>1566</span>
<span class='line-number'>1567</span>
<span class='line-number'>1568</span>
<span class='line-number'>1569</span>
<span class='line-number'>1570</span>
<span class='line-number'>1571</span>
<span class='line-number'>1572</span>
<span class='line-number'>1573</span>
<span class='line-number'>1574</span>
<span class='line-number'>1575</span>
<span class='line-number'>1576</span>
<span class='line-number'>1577</span>
<span class='line-number'>1578</span>
<span class='line-number'>1579</span>
<span class='line-number'>1580</span>
<span class='line-number'>1581</span>
<span class='line-number'>1582</span>
<span class='line-number'>1583</span>
<span class='line-number'>1584</span>
<span class='line-number'>1585</span>
<span class='line-number'>1586</span>
<span class='line-number'>1587</span>
<span class='line-number'>1588</span>
<span class='line-number'>1589</span>
<span class='line-number'>1590</span>
<span class='line-number'>1591</span>
<span class='line-number'>1592</span>
<span class='line-number'>1593</span>
<span class='line-number'>1594</span>
<span class='line-number'>1595</span>
<span class='line-number'>1596</span>
<span class='line-number'>1597</span>
<span class='line-number'>1598</span>
<span class='line-number'>1599</span>
<span class='line-number'>1600</span>
<span class='line-number'>1601</span>
<span class='line-number'>1602</span>
<span class='line-number'>1603</span>
<span class='line-number'>1604</span>
<span class='line-number'>1605</span>
<span class='line-number'>1606</span>
<span class='line-number'>1607</span>
<span class='line-number'>1608</span>
<span class='line-number'>1609</span>
<span class='line-number'>1610</span>
<span class='line-number'>1611</span>
<span class='line-number'>1612</span>
<span class='line-number'>1613</span>
<span class='line-number'>1614</span>
<span class='line-number'>1615</span>
<span class='line-number'>1616</span>
<span class='line-number'>1617</span>
<span class='line-number'>1618</span>
<span class='line-number'>1619</span>
<span class='line-number'>1620</span>
<span class='line-number'>1621</span>
<span class='line-number'>1622</span>
<span class='line-number'>1623</span>
<span class='line-number'>1624</span>
<span class='line-number'>1625</span>
<span class='line-number'>1626</span>
<span class='line-number'>1627</span>
<span class='line-number'>1628</span>
<span class='line-number'>1629</span>
<span class='line-number'>1630</span>
<span class='line-number'>1631</span>
<span class='line-number'>1632</span>
<span class='line-number'>1633</span>
<span class='line-number'>1634</span>
<span class='line-number'>1635</span>
<span class='line-number'>1636</span>
<span class='line-number'>1637</span>
<span class='line-number'>1638</span>
<span class='line-number'>1639</span>
<span class='line-number'>1640</span>
<span class='line-number'>1641</span>
<span class='line-number'>1642</span>
<span class='line-number'>1643</span>
<span class='line-number'>1644</span>
<span class='line-number'>1645</span>
<span class='line-number'>1646</span>
<span class='line-number'>1647</span>
<span class='line-number'>1648</span>
<span class='line-number'>1649</span>
<span class='line-number'>1650</span>
<span class='line-number'>1651</span>
<span class='line-number'>1652</span>
<span class='line-number'>1653</span>
<span class='line-number'>1654</span>
<span class='line-number'>1655</span>
<span class='line-number'>1656</span>
<span class='line-number'>1657</span>
<span class='line-number'>1658</span>
<span class='line-number'>1659</span>
<span class='line-number'>1660</span>
<span class='line-number'>1661</span>
<span class='line-number'>1662</span>
<span class='line-number'>1663</span>
<span class='line-number'>1664</span>
<span class='line-number'>1665</span>
<span class='line-number'>1666</span>
<span class='line-number'>1667</span>
<span class='line-number'>1668</span>
<span class='line-number'>1669</span>
<span class='line-number'>1670</span>
<span class='line-number'>1671</span>
<span class='line-number'>1672</span>
<span class='line-number'>1673</span>
<span class='line-number'>1674</span>
<span class='line-number'>1675</span>
<span class='line-number'>1676</span>
<span class='line-number'>1677</span>
<span class='line-number'>1678</span>
<span class='line-number'>1679</span>
<span class='line-number'>1680</span>
<span class='line-number'>1681</span>
<span class='line-number'>1682</span>
<span class='line-number'>1683</span>
<span class='line-number'>1684</span>
<span class='line-number'>1685</span>
<span class='line-number'>1686</span>
<span class='line-number'>1687</span>
<span class='line-number'>1688</span>
<span class='line-number'>1689</span>
<span class='line-number'>1690</span>
<span class='line-number'>1691</span>
<span class='line-number'>1692</span>
<span class='line-number'>1693</span>
<span class='line-number'>1694</span>
<span class='line-number'>1695</span>
<span class='line-number'>1696</span>
<span class='line-number'>1697</span>
<span class='line-number'>1698</span>
<span class='line-number'>1699</span>
<span class='line-number'>1700</span>
<span class='line-number'>1701</span>
<span class='line-number'>1702</span>
<span class='line-number'>1703</span>
<span class='line-number'>1704</span>
<span class='line-number'>1705</span>
<span class='line-number'>1706</span>
<span class='line-number'>1707</span>
<span class='line-number'>1708</span>
<span class='line-number'>1709</span>
<span class='line-number'>1710</span>
<span class='line-number'>1711</span>
<span class='line-number'>1712</span>
<span class='line-number'>1713</span>
<span class='line-number'>1714</span>
<span class='line-number'>1715</span>
<span class='line-number'>1716</span>
<span class='line-number'>1717</span>
<span class='line-number'>1718</span>
<span class='line-number'>1719</span>
<span class='line-number'>1720</span>
<span class='line-number'>1721</span>
<span class='line-number'>1722</span>
<span class='line-number'>1723</span>
<span class='line-number'>1724</span>
<span class='line-number'>1725</span>
<span class='line-number'>1726</span>
<span class='line-number'>1727</span>
<span class='line-number'>1728</span>
<span class='line-number'>1729</span>
<span class='line-number'>1730</span>
<span class='line-number'>1731</span>
<span class='line-number'>1732</span>
<span class='line-number'>1733</span>
<span class='line-number'>1734</span>
<span class='line-number'>1735</span>
<span class='line-number'>1736</span>
<span class='line-number'>1737</span>
<span class='line-number'>1738</span>
<span class='line-number'>1739</span>
<span class='line-number'>1740</span>
<span class='line-number'>1741</span>
<span class='line-number'>1742</span>
<span class='line-number'>1743</span>
<span class='line-number'>1744</span>
<span class='line-number'>1745</span>
<span class='line-number'>1746</span>
<span class='line-number'>1747</span>
<span class='line-number'>1748</span>
<span class='line-number'>1749</span>
<span class='line-number'>1750</span>
<span class='line-number'>1751</span>
<span class='line-number'>1752</span>
<span class='line-number'>1753</span>
<span class='line-number'>1754</span>
<span class='line-number'>1755</span>
<span class='line-number'>1756</span>
<span class='line-number'>1757</span>
<span class='line-number'>1758</span>
<span class='line-number'>1759</span>
<span class='line-number'>1760</span>
<span class='line-number'>1761</span>
<span class='line-number'>1762</span>
<span class='line-number'>1763</span>
<span class='line-number'>1764</span>
<span class='line-number'>1765</span>
<span class='line-number'>1766</span>
<span class='line-number'>1767</span>
<span class='line-number'>1768</span>
<span class='line-number'>1769</span>
<span class='line-number'>1770</span>
<span class='line-number'>1771</span>
<span class='line-number'>1772</span>
<span class='line-number'>1773</span>
<span class='line-number'>1774</span>
<span class='line-number'>1775</span>
<span class='line-number'>1776</span>
<span class='line-number'>1777</span>
<span class='line-number'>1778</span>
<span class='line-number'>1779</span>
<span class='line-number'>1780</span>
<span class='line-number'>1781</span>
<span class='line-number'>1782</span>
<span class='line-number'>1783</span>
<span class='line-number'>1784</span>
<span class='line-number'>1785</span>
<span class='line-number'>1786</span>
<span class='line-number'>1787</span>
<span class='line-number'>1788</span>
<span class='line-number'>1789</span>
<span class='line-number'>1790</span>
<span class='line-number'>1791</span>
<span class='line-number'>1792</span>
<span class='line-number'>1793</span>
<span class='line-number'>1794</span>
<span class='line-number'>1795</span>
<span class='line-number'>1796</span>
<span class='line-number'>1797</span>
<span class='line-number'>1798</span>
<span class='line-number'>1799</span>
<span class='line-number'>1800</span>
<span class='line-number'>1801</span>
<span class='line-number'>1802</span>
<span class='line-number'>1803</span>
<span class='line-number'>1804</span>
<span class='line-number'>1805</span>
<span class='line-number'>1806</span>
<span class='line-number'>1807</span>
<span class='line-number'>1808</span>
<span class='line-number'>1809</span>
<span class='line-number'>1810</span>
<span class='line-number'>1811</span>
<span class='line-number'>1812</span>
<span class='line-number'>1813</span>
<span class='line-number'>1814</span>
<span class='line-number'>1815</span>
<span class='line-number'>1816</span>
<span class='line-number'>1817</span>
<span class='line-number'>1818</span>
<span class='line-number'>1819</span>
<span class='line-number'>1820</span>
<span class='line-number'>1821</span>
<span class='line-number'>1822</span>
<span class='line-number'>1823</span>
<span class='line-number'>1824</span>
<span class='line-number'>1825</span>
<span class='line-number'>1826</span>
<span class='line-number'>1827</span>
<span class='line-number'>1828</span>
<span class='line-number'>1829</span>
<span class='line-number'>1830</span>
<span class='line-number'>1831</span>
<span class='line-number'>1832</span>
<span class='line-number'>1833</span>
<span class='line-number'>1834</span>
<span class='line-number'>1835</span>
<span class='line-number'>1836</span>
<span class='line-number'>1837</span>
<span class='line-number'>1838</span>
<span class='line-number'>1839</span>
<span class='line-number'>1840</span>
<span class='line-number'>1841</span>
<span class='line-number'>1842</span>
<span class='line-number'>1843</span>
<span class='line-number'>1844</span>
<span class='line-number'>1845</span>
<span class='line-number'>1846</span>
<span class='line-number'>1847</span>
<span class='line-number'>1848</span>
<span class='line-number'>1849</span>
<span class='line-number'>1850</span>
<span class='line-number'>1851</span>
<span class='line-number'>1852</span>
<span class='line-number'>1853</span>
<span class='line-number'>1854</span>
<span class='line-number'>1855</span>
<span class='line-number'>1856</span>
<span class='line-number'>1857</span>
<span class='line-number'>1858</span>
<span class='line-number'>1859</span>
<span class='line-number'>1860</span>
<span class='line-number'>1861</span>
<span class='line-number'>1862</span>
<span class='line-number'>1863</span>
<span class='line-number'>1864</span>
<span class='line-number'>1865</span>
<span class='line-number'>1866</span>
<span class='line-number'>1867</span>
<span class='line-number'>1868</span>
<span class='line-number'>1869</span>
<span class='line-number'>1870</span>
<span class='line-number'>1871</span>
<span class='line-number'>1872</span>
<span class='line-number'>1873</span>
<span class='line-number'>1874</span>
<span class='line-number'>1875</span>
<span class='line-number'>1876</span>
<span class='line-number'>1877</span>
<span class='line-number'>1878</span>
<span class='line-number'>1879</span>
<span class='line-number'>1880</span>
<span class='line-number'>1881</span>
<span class='line-number'>1882</span>
<span class='line-number'>1883</span>
<span class='line-number'>1884</span>
<span class='line-number'>1885</span>
<span class='line-number'>1886</span>
<span class='line-number'>1887</span>
<span class='line-number'>1888</span>
<span class='line-number'>1889</span>
<span class='line-number'>1890</span>
<span class='line-number'>1891</span>
<span class='line-number'>1892</span>
<span class='line-number'>1893</span>
<span class='line-number'>1894</span>
<span class='line-number'>1895</span>
<span class='line-number'>1896</span>
<span class='line-number'>1897</span>
<span class='line-number'>1898</span>
<span class='line-number'>1899</span>
<span class='line-number'>1900</span>
<span class='line-number'>1901</span>
<span class='line-number'>1902</span>
<span class='line-number'>1903</span>
<span class='line-number'>1904</span>
<span class='line-number'>1905</span>
<span class='line-number'>1906</span>
<span class='line-number'>1907</span>
<span class='line-number'>1908</span>
<span class='line-number'>1909</span>
<span class='line-number'>1910</span>
<span class='line-number'>1911</span>
<span class='line-number'>1912</span>
<span class='line-number'>1913</span>
<span class='line-number'>1914</span>
<span class='line-number'>1915</span>
<span class='line-number'>1916</span>
<span class='line-number'>1917</span>
<span class='line-number'>1918</span>
<span class='line-number'>1919</span>
<span class='line-number'>1920</span>
<span class='line-number'>1921</span>
<span class='line-number'>1922</span>
<span class='line-number'>1923</span>
<span class='line-number'>1924</span>
<span class='line-number'>1925</span>
<span class='line-number'>1926</span>
<span class='line-number'>1927</span>
<span class='line-number'>1928</span>
<span class='line-number'>1929</span>
<span class='line-number'>1930</span>
<span class='line-number'>1931</span>
<span class='line-number'>1932</span>
<span class='line-number'>1933</span>
<span class='line-number'>1934</span>
<span class='line-number'>1935</span>
<span class='line-number'>1936</span>
<span class='line-number'>1937</span>
<span class='line-number'>1938</span>
<span class='line-number'>1939</span>
<span class='line-number'>1940</span>
<span class='line-number'>1941</span>
<span class='line-number'>1942</span>
<span class='line-number'>1943</span>
<span class='line-number'>1944</span>
<span class='line-number'>1945</span>
<span class='line-number'>1946</span>
<span class='line-number'>1947</span>
<span class='line-number'>1948</span>
<span class='line-number'>1949</span>
<span class='line-number'>1950</span>
<span class='line-number'>1951</span>
<span class='line-number'>1952</span>
<span class='line-number'>1953</span>
<span class='line-number'>1954</span>
<span class='line-number'>1955</span>
<span class='line-number'>1956</span>
<span class='line-number'>1957</span>
<span class='line-number'>1958</span>
<span class='line-number'>1959</span>
<span class='line-number'>1960</span>
<span class='line-number'>1961</span>
<span class='line-number'>1962</span>
<span class='line-number'>1963</span>
<span class='line-number'>1964</span>
<span class='line-number'>1965</span>
<span class='line-number'>1966</span>
<span class='line-number'>1967</span>
<span class='line-number'>1968</span>
<span class='line-number'>1969</span>
<span class='line-number'>1970</span>
<span class='line-number'>1971</span>
<span class='line-number'>1972</span>
<span class='line-number'>1973</span>
<span class='line-number'>1974</span>
<span class='line-number'>1975</span>
<span class='line-number'>1976</span>
<span class='line-number'>1977</span>
<span class='line-number'>1978</span>
<span class='line-number'>1979</span>
<span class='line-number'>1980</span>
<span class='line-number'>1981</span>
<span class='line-number'>1982</span>
<span class='line-number'>1983</span>
<span class='line-number'>1984</span>
<span class='line-number'>1985</span>
<span class='line-number'>1986</span>
<span class='line-number'>1987</span>
<span class='line-number'>1988</span>
<span class='line-number'>1989</span>
<span class='line-number'>1990</span>
<span class='line-number'>1991</span>
<span class='line-number'>1992</span>
<span class='line-number'>1993</span>
<span class='line-number'>1994</span>
<span class='line-number'>1995</span>
<span class='line-number'>1996</span>
<span class='line-number'>1997</span>
<span class='line-number'>1998</span>
<span class='line-number'>1999</span>
<span class='line-number'>2000</span>
<span class='line-number'>2001</span>
<span class='line-number'>2002</span>
<span class='line-number'>2003</span>
<span class='line-number'>2004</span>
<span class='line-number'>2005</span>
<span class='line-number'>2006</span>
<span class='line-number'>2007</span>
<span class='line-number'>2008</span>
<span class='line-number'>2009</span>
<span class='line-number'>2010</span>
<span class='line-number'>2011</span>
<span class='line-number'>2012</span>
<span class='line-number'>2013</span>
<span class='line-number'>2014</span>
<span class='line-number'>2015</span>
<span class='line-number'>2016</span>
<span class='line-number'>2017</span>
<span class='line-number'>2018</span>
<span class='line-number'>2019</span>
<span class='line-number'>2020</span>
<span class='line-number'>2021</span>
<span class='line-number'>2022</span>
<span class='line-number'>2023</span>
<span class='line-number'>2024</span>
<span class='line-number'>2025</span>
<span class='line-number'>2026</span>
<span class='line-number'>2027</span>
<span class='line-number'>2028</span>
<span class='line-number'>2029</span>
<span class='line-number'>2030</span>
<span class='line-number'>2031</span>
<span class='line-number'>2032</span>
<span class='line-number'>2033</span>
<span class='line-number'>2034</span>
<span class='line-number'>2035</span>
<span class='line-number'>2036</span>
<span class='line-number'>2037</span>
<span class='line-number'>2038</span>
<span class='line-number'>2039</span>
<span class='line-number'>2040</span>
<span class='line-number'>2041</span>
<span class='line-number'>2042</span>
<span class='line-number'>2043</span>
<span class='line-number'>2044</span>
<span class='line-number'>2045</span>
<span class='line-number'>2046</span>
<span class='line-number'>2047</span>
<span class='line-number'>2048</span>
<span class='line-number'>2049</span>
<span class='line-number'>2050</span>
<span class='line-number'>2051</span>
<span class='line-number'>2052</span>
<span class='line-number'>2053</span>
<span class='line-number'>2054</span>
<span class='line-number'>2055</span>
<span class='line-number'>2056</span>
<span class='line-number'>2057</span>
<span class='line-number'>2058</span>
<span class='line-number'>2059</span>
<span class='line-number'>2060</span>
<span class='line-number'>2061</span>
<span class='line-number'>2062</span>
<span class='line-number'>2063</span>
<span class='line-number'>2064</span>
<span class='line-number'>2065</span>
<span class='line-number'>2066</span>
<span class='line-number'>2067</span>
<span class='line-number'>2068</span>
<span class='line-number'>2069</span>
<span class='line-number'>2070</span>
<span class='line-number'>2071</span>
<span class='line-number'>2072</span>
<span class='line-number'>2073</span>
<span class='line-number'>2074</span>
<span class='line-number'>2075</span>
<span class='line-number'>2076</span>
<span class='line-number'>2077</span>
<span class='line-number'>2078</span>
<span class='line-number'>2079</span>
<span class='line-number'>2080</span>
<span class='line-number'>2081</span>
<span class='line-number'>2082</span>
<span class='line-number'>2083</span>
<span class='line-number'>2084</span>
<span class='line-number'>2085</span>
<span class='line-number'>2086</span>
<span class='line-number'>2087</span>
<span class='line-number'>2088</span>
<span class='line-number'>2089</span>
<span class='line-number'>2090</span>
<span class='line-number'>2091</span>
<span class='line-number'>2092</span>
<span class='line-number'>2093</span>
<span class='line-number'>2094</span>
<span class='line-number'>2095</span>
<span class='line-number'>2096</span>
<span class='line-number'>2097</span>
<span class='line-number'>2098</span>
<span class='line-number'>2099</span>
<span class='line-number'>2100</span>
<span class='line-number'>2101</span>
<span class='line-number'>2102</span>
<span class='line-number'>2103</span>
<span class='line-number'>2104</span>
<span class='line-number'>2105</span>
<span class='line-number'>2106</span>
<span class='line-number'>2107</span>
<span class='line-number'>2108</span>
<span class='line-number'>2109</span>
<span class='line-number'>2110</span>
<span class='line-number'>2111</span>
<span class='line-number'>2112</span>
<span class='line-number'>2113</span>
<span class='line-number'>2114</span>
<span class='line-number'>2115</span>
<span class='line-number'>2116</span>
<span class='line-number'>2117</span>
<span class='line-number'>2118</span>
<span class='line-number'>2119</span>
<span class='line-number'>2120</span>
<span class='line-number'>2121</span>
<span class='line-number'>2122</span>
<span class='line-number'>2123</span>
<span class='line-number'>2124</span>
<span class='line-number'>2125</span>
<span class='line-number'>2126</span>
<span class='line-number'>2127</span>
<span class='line-number'>2128</span>
<span class='line-number'>2129</span>
<span class='line-number'>2130</span>
<span class='line-number'>2131</span>
<span class='line-number'>2132</span>
<span class='line-number'>2133</span>
<span class='line-number'>2134</span>
<span class='line-number'>2135</span>
<span class='line-number'>2136</span>
<span class='line-number'>2137</span>
<span class='line-number'>2138</span>
<span class='line-number'>2139</span>
<span class='line-number'>2140</span>
<span class='line-number'>2141</span>
<span class='line-number'>2142</span>
<span class='line-number'>2143</span>
<span class='line-number'>2144</span>
<span class='line-number'>2145</span>
<span class='line-number'>2146</span>
<span class='line-number'>2147</span>
<span class='line-number'>2148</span>
<span class='line-number'>2149</span>
<span class='line-number'>2150</span>
<span class='line-number'>2151</span>
<span class='line-number'>2152</span>
<span class='line-number'>2153</span>
<span class='line-number'>2154</span>
<span class='line-number'>2155</span>
<span class='line-number'>2156</span>
<span class='line-number'>2157</span>
<span class='line-number'>2158</span>
<span class='line-number'>2159</span>
<span class='line-number'>2160</span>
<span class='line-number'>2161</span>
<span class='line-number'>2162</span>
<span class='line-number'>2163</span>
<span class='line-number'>2164</span>
<span class='line-number'>2165</span>
<span class='line-number'>2166</span>
<span class='line-number'>2167</span>
<span class='line-number'>2168</span>
<span class='line-number'>2169</span>
<span class='line-number'>2170</span>
<span class='line-number'>2171</span>
<span class='line-number'>2172</span>
<span class='line-number'>2173</span>
<span class='line-number'>2174</span>
<span class='line-number'>2175</span>
<span class='line-number'>2176</span>
<span class='line-number'>2177</span>
<span class='line-number'>2178</span>
<span class='line-number'>2179</span>
<span class='line-number'>2180</span>
<span class='line-number'>2181</span>
<span class='line-number'>2182</span>
<span class='line-number'>2183</span>
<span class='line-number'>2184</span>
<span class='line-number'>2185</span>
<span class='line-number'>2186</span>
<span class='line-number'>2187</span>
<span class='line-number'>2188</span>
<span class='line-number'>2189</span>
<span class='line-number'>2190</span>
<span class='line-number'>2191</span>
<span class='line-number'>2192</span>
<span class='line-number'>2193</span>
<span class='line-number'>2194</span>
<span class='line-number'>2195</span>
<span class='line-number'>2196</span>
<span class='line-number'>2197</span>
<span class='line-number'>2198</span>
<span class='line-number'>2199</span>
<span class='line-number'>2200</span>
<span class='line-number'>2201</span>
<span class='line-number'>2202</span>
<span class='line-number'>2203</span>
<span class='line-number'>2204</span>
<span class='line-number'>2205</span>
<span class='line-number'>2206</span>
<span class='line-number'>2207</span>
<span class='line-number'>2208</span>
<span class='line-number'>2209</span>
<span class='line-number'>2210</span>
<span class='line-number'>2211</span>
<span class='line-number'>2212</span>
<span class='line-number'>2213</span>
<span class='line-number'>2214</span>
<span class='line-number'>2215</span>
<span class='line-number'>2216</span>
<span class='line-number'>2217</span>
<span class='line-number'>2218</span>
<span class='line-number'>2219</span>
<span class='line-number'>2220</span>
<span class='line-number'>2221</span>
<span class='line-number'>2222</span>
<span class='line-number'>2223</span>
<span class='line-number'>2224</span>
<span class='line-number'>2225</span>
<span class='line-number'>2226</span>
<span class='line-number'>2227</span>
<span class='line-number'>2228</span>
<span class='line-number'>2229</span>
<span class='line-number'>2230</span>
<span class='line-number'>2231</span>
<span class='line-number'>2232</span>
<span class='line-number'>2233</span>
<span class='line-number'>2234</span>
<span class='line-number'>2235</span>
<span class='line-number'>2236</span>
<span class='line-number'>2237</span>
<span class='line-number'>2238</span>
<span class='line-number'>2239</span>
<span class='line-number'>2240</span>
<span class='line-number'>2241</span>
<span class='line-number'>2242</span>
<span class='line-number'>2243</span>
<span class='line-number'>2244</span>
<span class='line-number'>2245</span>
<span class='line-number'>2246</span>
<span class='line-number'>2247</span>
<span class='line-number'>2248</span>
<span class='line-number'>2249</span>
<span class='line-number'>2250</span>
<span class='line-number'>2251</span>
<span class='line-number'>2252</span>
<span class='line-number'>2253</span>
<span class='line-number'>2254</span>
<span class='line-number'>2255</span>
<span class='line-number'>2256</span>
<span class='line-number'>2257</span>
<span class='line-number'>2258</span>
<span class='line-number'>2259</span>
<span class='line-number'>2260</span>
<span class='line-number'>2261</span>
<span class='line-number'>2262</span>
<span class='line-number'>2263</span>
<span class='line-number'>2264</span>
<span class='line-number'>2265</span>
<span class='line-number'>2266</span>
<span class='line-number'>2267</span>
<span class='line-number'>2268</span>
<span class='line-number'>2269</span>
<span class='line-number'>2270</span>
<span class='line-number'>2271</span>
<span class='line-number'>2272</span>
<span class='line-number'>2273</span>
<span class='line-number'>2274</span>
<span class='line-number'>2275</span>
<span class='line-number'>2276</span>
<span class='line-number'>2277</span>
<span class='line-number'>2278</span>
<span class='line-number'>2279</span>
<span class='line-number'>2280</span>
<span class='line-number'>2281</span>
<span class='line-number'>2282</span>
<span class='line-number'>2283</span>
<span class='line-number'>2284</span>
<span class='line-number'>2285</span>
<span class='line-number'>2286</span>
<span class='line-number'>2287</span>
<span class='line-number'>2288</span>
<span class='line-number'>2289</span>
<span class='line-number'>2290</span>
<span class='line-number'>2291</span>
<span class='line-number'>2292</span>
<span class='line-number'>2293</span>
<span class='line-number'>2294</span>
<span class='line-number'>2295</span>
<span class='line-number'>2296</span>
<span class='line-number'>2297</span>
<span class='line-number'>2298</span>
<span class='line-number'>2299</span>
<span class='line-number'>2300</span>
<span class='line-number'>2301</span>
<span class='line-number'>2302</span>
<span class='line-number'>2303</span>
<span class='line-number'>2304</span>
<span class='line-number'>2305</span>
<span class='line-number'>2306</span>
<span class='line-number'>2307</span>
<span class='line-number'>2308</span>
<span class='line-number'>2309</span>
<span class='line-number'>2310</span>
<span class='line-number'>2311</span>
<span class='line-number'>2312</span>
<span class='line-number'>2313</span>
<span class='line-number'>2314</span>
<span class='line-number'>2315</span>
<span class='line-number'>2316</span>
<span class='line-number'>2317</span>
<span class='line-number'>2318</span>
<span class='line-number'>2319</span>
<span class='line-number'>2320</span>
<span class='line-number'>2321</span>
<span class='line-number'>2322</span>
<span class='line-number'>2323</span>
<span class='line-number'>2324</span>
<span class='line-number'>2325</span>
<span class='line-number'>2326</span>
<span class='line-number'>2327</span>
<span class='line-number'>2328</span>
<span class='line-number'>2329</span>
<span class='line-number'>2330</span>
<span class='line-number'>2331</span>
<span class='line-number'>2332</span>
<span class='line-number'>2333</span>
<span class='line-number'>2334</span>
<span class='line-number'>2335</span>
<span class='line-number'>2336</span>
<span class='line-number'>2337</span>
<span class='line-number'>2338</span>
<span class='line-number'>2339</span>
<span class='line-number'>2340</span>
<span class='line-number'>2341</span>
<span class='line-number'>2342</span>
<span class='line-number'>2343</span>
<span class='line-number'>2344</span>
<span class='line-number'>2345</span>
<span class='line-number'>2346</span>
<span class='line-number'>2347</span>
<span class='line-number'>2348</span>
<span class='line-number'>2349</span>
<span class='line-number'>2350</span>
<span class='line-number'>2351</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="cm">/*! jQuery UI - v1.10.2 - 2013-04-02</span>
</span><span class='line'><span class="cm">* http://jqueryui.com</span>
</span><span class='line'><span class="cm">* Includes: jquery.ui.core.js, jquery.ui.datepicker.js</span>
</span><span class='line'><span class="cm">* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">uuid</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">runiqueId</span> <span class="o">=</span> <span class="sr">/^ui-id-\d+$/</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// $.ui might exist from components with no dependencies, e.g., $.ui.position</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">ui</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">ui</span> <span class="o">||</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">ui</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;1.10.2&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">keyCode</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">BACKSPACE</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">COMMA</span><span class="o">:</span> <span class="mi">188</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">DELETE</span><span class="o">:</span> <span class="mi">46</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">DOWN</span><span class="o">:</span> <span class="mi">40</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">END</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">ENTER</span><span class="o">:</span> <span class="mi">13</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">ESCAPE</span><span class="o">:</span> <span class="mi">27</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">HOME</span><span class="o">:</span> <span class="mi">36</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">LEFT</span><span class="o">:</span> <span class="mi">37</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">NUMPAD_ADD</span><span class="o">:</span> <span class="mi">107</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">NUMPAD_DECIMAL</span><span class="o">:</span> <span class="mi">110</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">NUMPAD_DIVIDE</span><span class="o">:</span> <span class="mi">111</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">NUMPAD_ENTER</span><span class="o">:</span> <span class="mi">108</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">NUMPAD_MULTIPLY</span><span class="o">:</span> <span class="mi">106</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">NUMPAD_SUBTRACT</span><span class="o">:</span> <span class="mi">109</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">PAGE_DOWN</span><span class="o">:</span> <span class="mi">34</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">PAGE_UP</span><span class="o">:</span> <span class="mi">33</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">PERIOD</span><span class="o">:</span> <span class="mi">190</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">RIGHT</span><span class="o">:</span> <span class="mi">39</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">SPACE</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">TAB</span><span class="o">:</span> <span class="mi">9</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">UP</span><span class="o">:</span> <span class="mi">38</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// plugins</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">focus</span><span class="o">:</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">orig</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">delay</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="k">typeof</span> <span class="nx">delay</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">?</span>
</span><span class='line'>              <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>                  <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>                  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>                      <span class="nx">$</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
</span><span class='line'>                      <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                  <span class="p">},</span> <span class="nx">delay</span> <span class="p">);</span>
</span><span class='line'>              <span class="p">})</span> <span class="o">:</span>
</span><span class='line'>              <span class="nx">orig</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
</span><span class='line'>      <span class="p">};</span>
</span><span class='line'>  <span class="p">})(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">focus</span> <span class="p">),</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">scrollParent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">scrollParent</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">((</span><span class="nx">$</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">ie</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="sr">/(static|relative)/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">)))</span> <span class="o">||</span> <span class="p">(</span><span class="sr">/absolute/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">)))</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">scrollParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parents</span><span class="p">().</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="p">(</span><span class="sr">/(relative|absolute|fixed)/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;position&quot;</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="sr">/(auto|scroll)/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;overflow&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;overflow-y&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;overflow-x&quot;</span><span class="p">));</span>
</span><span class='line'>          <span class="p">}).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">scrollParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parents</span><span class="p">().</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="p">(</span><span class="sr">/(auto|scroll)/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;overflow&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;overflow-y&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;overflow-x&quot;</span><span class="p">));</span>
</span><span class='line'>          <span class="p">}).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="p">(</span><span class="sr">/fixed/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">))</span> <span class="o">||</span> <span class="o">!</span><span class="nx">scrollParent</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">)</span> <span class="o">:</span> <span class="nx">scrollParent</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">zIndex</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">zIndex</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span> <span class="nx">zIndex</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="s2">&quot;zIndex&quot;</span><span class="p">,</span> <span class="nx">zIndex</span> <span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">),</span> <span class="nx">position</span><span class="p">,</span> <span class="nx">value</span><span class="p">;</span>
</span><span class='line'>          <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">!==</span> <span class="nb">document</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// Ignore z-index if position is set to a value where z-index is ignored by the browser</span>
</span><span class='line'>              <span class="c1">// This makes behavior of this function consistent across browsers</span>
</span><span class='line'>              <span class="c1">// WebKit always returns auto if the element is positioned</span>
</span><span class='line'>              <span class="nx">position</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="s2">&quot;position&quot;</span> <span class="p">);</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;absolute&quot;</span> <span class="o">||</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;relative&quot;</span> <span class="o">||</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;fixed&quot;</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="c1">// IE returns 0 when zIndex is not specified</span>
</span><span class='line'>                  <span class="c1">// other browsers return a string</span>
</span><span class='line'>                  <span class="c1">// we ignore the case of nested elements with an explicit value of 0</span>
</span><span class='line'>                  <span class="c1">// &lt;div style=&quot;z-index: -10;&quot;&gt;&lt;div style=&quot;z-index: 0;&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span>
</span><span class='line'>                  <span class="nx">value</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="s2">&quot;zIndex&quot;</span> <span class="p">),</span> <span class="mi">10</span> <span class="p">);</span>
</span><span class='line'>                  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">!==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                      <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
</span><span class='line'>                  <span class="p">}</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parent</span><span class="p">();</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">uniqueId</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;ui-id-&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="o">++</span><span class="nx">uuid</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">removeUniqueId</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span> <span class="nx">runiqueId</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span> <span class="s2">&quot;id&quot;</span> <span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// selectors</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">focusable</span><span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">isTabIndexNotNaN</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">mapName</span><span class="p">,</span> <span class="nx">img</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;area&quot;</span> <span class="o">===</span> <span class="nx">nodeName</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">map</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">mapName</span> <span class="o">=</span> <span class="nx">map</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">element</span><span class="p">.</span><span class="nx">href</span> <span class="o">||</span> <span class="o">!</span><span class="nx">mapName</span> <span class="o">||</span> <span class="nx">map</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">!==</span> <span class="s2">&quot;map&quot;</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">img</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span> <span class="s2">&quot;img[usemap=#&quot;</span> <span class="o">+</span> <span class="nx">mapName</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span> <span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>      <span class="k">return</span> <span class="o">!!</span><span class="nx">img</span> <span class="o">&amp;&amp;</span> <span class="nx">visible</span><span class="p">(</span> <span class="nx">img</span> <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">(</span> <span class="sr">/input|select|textarea|button|object/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">nodeName</span> <span class="p">)</span> <span class="o">?</span>
</span><span class='line'>      <span class="o">!</span><span class="nx">element</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">:</span>
</span><span class='line'>      <span class="s2">&quot;a&quot;</span> <span class="o">===</span> <span class="nx">nodeName</span> <span class="o">?</span>
</span><span class='line'>          <span class="nx">element</span><span class="p">.</span><span class="nx">href</span> <span class="o">||</span> <span class="nx">isTabIndexNotNaN</span> <span class="o">:</span>
</span><span class='line'>          <span class="nx">isTabIndexNotNaN</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>      <span class="c1">// the element and all of its ancestors must be visible</span>
</span><span class='line'>      <span class="nx">visible</span><span class="p">(</span> <span class="nx">element</span> <span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">visible</span><span class="p">(</span> <span class="nx">element</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">visible</span><span class="p">(</span> <span class="nx">element</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>      <span class="o">!</span><span class="nx">$</span><span class="p">(</span> <span class="nx">element</span> <span class="p">).</span><span class="nx">parents</span><span class="p">().</span><span class="nx">addBack</span><span class="p">().</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;visibility&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;hidden&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}).</span><span class="nx">length</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">expr</span><span class="p">[</span> <span class="s2">&quot;:&quot;</span> <span class="p">],</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">data</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">createPseudo</span> <span class="o">?</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">createPseudo</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">dataName</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="o">!!</span><span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">dataName</span> <span class="p">);</span>
</span><span class='line'>          <span class="p">};</span>
</span><span class='line'>      <span class="p">})</span> <span class="o">:</span>
</span><span class='line'>      <span class="c1">// support: jQuery &lt;1.8</span>
</span><span class='line'>      <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="o">!!</span><span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="p">);</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">focusable</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">element</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">focusable</span><span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;tabindex&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">tabbable</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">element</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">tabIndex</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;tabindex&quot;</span> <span class="p">),</span>
</span><span class='line'>          <span class="nx">isTabIndexNaN</span> <span class="o">=</span> <span class="nb">isNaN</span><span class="p">(</span> <span class="nx">tabIndex</span> <span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">(</span> <span class="nx">isTabIndexNaN</span> <span class="o">||</span> <span class="nx">tabIndex</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">focusable</span><span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="o">!</span><span class="nx">isTabIndexNaN</span> <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// support: jQuery &lt;1.8</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">$</span><span class="p">(</span> <span class="s2">&quot;&lt;a&gt;&quot;</span> <span class="p">).</span><span class="nx">outerWidth</span><span class="p">(</span> <span class="mi">1</span> <span class="p">).</span><span class="nx">jquery</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">[</span> <span class="s2">&quot;Width&quot;</span><span class="p">,</span> <span class="s2">&quot;Height&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">side</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;Width&quot;</span> <span class="o">?</span> <span class="p">[</span> <span class="s2">&quot;Left&quot;</span><span class="p">,</span> <span class="s2">&quot;Right&quot;</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Top&quot;</span><span class="p">,</span> <span class="s2">&quot;Bottom&quot;</span> <span class="p">],</span>
</span><span class='line'>          <span class="nx">type</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">(),</span>
</span><span class='line'>          <span class="nx">orig</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">innerWidth</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span>
</span><span class='line'>              <span class="nx">innerHeight</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">,</span>
</span><span class='line'>              <span class="nx">outerWidth</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">,</span>
</span><span class='line'>              <span class="nx">outerHeight</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">outerHeight</span>
</span><span class='line'>          <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">function</span> <span class="nx">reduce</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">size</span><span class="p">,</span> <span class="nx">border</span><span class="p">,</span> <span class="nx">margin</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">side</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">size</span> <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span> <span class="o">+</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span> <span class="nx">border</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">size</span> <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span> <span class="o">+</span> <span class="k">this</span> <span class="o">+</span> <span class="s2">&quot;Width&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span> <span class="nx">margin</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">size</span> <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;margin&quot;</span> <span class="o">+</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">});</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">size</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="s2">&quot;inner&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">size</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span> <span class="nx">size</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="nx">orig</span><span class="p">[</span> <span class="s2">&quot;inner&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">].</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">css</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">reduce</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">size</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span> <span class="p">);</span>
</span><span class='line'>          <span class="p">});</span>
</span><span class='line'>      <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="s2">&quot;outer&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">size</span><span class="p">,</span> <span class="nx">margin</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">size</span> <span class="o">!==</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="nx">orig</span><span class="p">[</span> <span class="s2">&quot;outer&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">].</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">size</span> <span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">(</span> <span class="k">this</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">reduce</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">size</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">margin</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span> <span class="p">);</span>
</span><span class='line'>          <span class="p">});</span>
</span><span class='line'>      <span class="p">};</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// support: jQuery &lt;1.8</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">addBack</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">addBack</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">selector</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">prevObject</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">prevObject</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span>
</span><span class='line'>      <span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">(</span> <span class="s2">&quot;&lt;a&gt;&quot;</span> <span class="p">).</span><span class="nx">data</span><span class="p">(</span> <span class="s2">&quot;a-b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span> <span class="p">).</span><span class="nx">removeData</span><span class="p">(</span> <span class="s2">&quot;a-b&quot;</span> <span class="p">).</span><span class="nx">data</span><span class="p">(</span> <span class="s2">&quot;a-b&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">removeData</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">removeData</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="nx">removeData</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">);</span>
</span><span class='line'>          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="nx">removeData</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">};</span>
</span><span class='line'>  <span class="p">})(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">removeData</span> <span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// deprecated</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">ie</span> <span class="o">=</span> <span class="o">!!</span><span class="sr">/msie [\w.]+/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">selectstart</span> <span class="o">=</span> <span class="s2">&quot;onselectstart&quot;</span> <span class="k">in</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">disableSelection</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">selectstart</span> <span class="o">?</span> <span class="s2">&quot;selectstart&quot;</span> <span class="o">:</span> <span class="s2">&quot;mousedown&quot;</span> <span class="p">)</span> <span class="o">+</span>
</span><span class='line'>          <span class="s2">&quot;.ui-disableSelection&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>          <span class="p">});</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">enableSelection</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span> <span class="s2">&quot;.ui-disableSelection&quot;</span> <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">ui</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// $.ui.plugin is deprecated.  Use the proxy pattern instead.</span>
</span><span class='line'>  <span class="nx">plugin</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">option</span><span class="p">,</span> <span class="nx">set</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
</span><span class='line'>              <span class="nx">proto</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">ui</span><span class="p">[</span> <span class="nx">module</span> <span class="p">].</span><span class="nx">prototype</span><span class="p">;</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">set</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">proto</span><span class="p">.</span><span class="nx">plugins</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">plugins</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
</span><span class='line'>              <span class="nx">proto</span><span class="p">.</span><span class="nx">plugins</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">push</span><span class="p">(</span> <span class="p">[</span> <span class="nx">option</span><span class="p">,</span> <span class="nx">set</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">]</span> <span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">call</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">instance</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
</span><span class='line'>              <span class="nx">set</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">plugins</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">set</span> <span class="o">||</span> <span class="o">!</span><span class="nx">instance</span><span class="p">.</span><span class="nx">element</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">parentNode</span> <span class="o">||</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">element</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">set</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span> <span class="nx">set</span><span class="p">[</span> <span class="nx">i</span> <span class="p">][</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">set</span><span class="p">[</span> <span class="nx">i</span> <span class="p">][</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// only used by resizable</span>
</span><span class='line'>  <span class="nx">hasScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">el</span><span class="p">,</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">//If overflow is hidden, the element might have extra content, but the user wants to hide it</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">(</span> <span class="nx">el</span> <span class="p">).</span><span class="nx">css</span><span class="p">(</span> <span class="s2">&quot;overflow&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;hidden&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">scroll</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">===</span> <span class="s2">&quot;left&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;scrollLeft&quot;</span> <span class="o">:</span> <span class="s2">&quot;scrollTop&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">has</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span> <span class="nx">el</span><span class="p">[</span> <span class="nx">scroll</span> <span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// TODO: determine which cases actually cause this to happen</span>
</span><span class='line'>      <span class="c1">// if the element doesn&#39;t have the scroll set, see if it&#39;s possible to</span>
</span><span class='line'>      <span class="c1">// set the scroll</span>
</span><span class='line'>      <span class="nx">el</span><span class="p">[</span> <span class="nx">scroll</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">has</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">el</span><span class="p">[</span> <span class="nx">scroll</span> <span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">);</span>
</span><span class='line'>      <span class="nx">el</span><span class="p">[</span> <span class="nx">scroll</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">has</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">})(</span> <span class="nx">jQuery</span> <span class="p">);</span>
</span><span class='line'><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">ui</span><span class="p">,</span> <span class="p">{</span> <span class="nx">datepicker</span><span class="o">:</span> <span class="p">{</span> <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;1.10.2&quot;</span> <span class="p">}</span> <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">PROP_NAME</span> <span class="o">=</span> <span class="s2">&quot;datepicker&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">dpuuid</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
</span><span class='line'>  <span class="nx">instActive</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Date picker manager.</span>
</span><span class='line'><span class="cm">   Use the singleton instance of this class, $.datepicker, to interact with the date picker.</span>
</span><span class='line'><span class="cm">   Settings for (groups of) date pickers are maintained in an instance object,</span>
</span><span class='line'><span class="cm">   allowing multiple different settings on the same page. */</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">Datepicker</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_curInst</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// The current instance in use</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_keyEvent</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// If the last event was a key event</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_disabledInputs</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// List of date picker inputs that have been disabled</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_datepickerShowing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// True if the popup picker is showing , false if not</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_inDialog</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// True if showing within a &quot;dialog&quot;, false if not</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_mainDivId</span> <span class="o">=</span> <span class="s2">&quot;ui-datepicker-div&quot;</span><span class="p">;</span> <span class="c1">// The ID of the main datepicker division</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_inlineClass</span> <span class="o">=</span> <span class="s2">&quot;ui-datepicker-inline&quot;</span><span class="p">;</span> <span class="c1">// The name of the inline marker class</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_appendClass</span> <span class="o">=</span> <span class="s2">&quot;ui-datepicker-append&quot;</span><span class="p">;</span> <span class="c1">// The name of the append marker class</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_triggerClass</span> <span class="o">=</span> <span class="s2">&quot;ui-datepicker-trigger&quot;</span><span class="p">;</span> <span class="c1">// The name of the trigger marker class</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_dialogClass</span> <span class="o">=</span> <span class="s2">&quot;ui-datepicker-dialog&quot;</span><span class="p">;</span> <span class="c1">// The name of the dialog marker class</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_disableClass</span> <span class="o">=</span> <span class="s2">&quot;ui-datepicker-disabled&quot;</span><span class="p">;</span> <span class="c1">// The name of the disabled covering marker class</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_unselectableClass</span> <span class="o">=</span> <span class="s2">&quot;ui-datepicker-unselectable&quot;</span><span class="p">;</span> <span class="c1">// The name of the unselectable cell marker class</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_currentClass</span> <span class="o">=</span> <span class="s2">&quot;ui-datepicker-current-day&quot;</span><span class="p">;</span> <span class="c1">// The name of the current day marker class</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_dayOverClass</span> <span class="o">=</span> <span class="s2">&quot;ui-datepicker-days-cell-over&quot;</span><span class="p">;</span> <span class="c1">// The name of the day hover marker class</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">regional</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// Available regional settings, indexed by language code</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">regional</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">closeText</span><span class="o">:</span> <span class="s1">&#39;关闭&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">prevText</span><span class="o">:</span> <span class="s1">&#39;&amp;#x3c;上月&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">nextText</span><span class="o">:</span> <span class="s1">&#39;下月&amp;#x3e;&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">currentText</span><span class="o">:</span> <span class="s1">&#39;今天&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">monthNames</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;一月&#39;</span><span class="p">,</span><span class="s1">&#39;二月&#39;</span><span class="p">,</span><span class="s1">&#39;三月&#39;</span><span class="p">,</span><span class="s1">&#39;四月&#39;</span><span class="p">,</span><span class="s1">&#39;五月&#39;</span><span class="p">,</span><span class="s1">&#39;六月&#39;</span><span class="p">,</span><span class="s1">&#39;七月&#39;</span><span class="p">,</span><span class="s1">&#39;八月&#39;</span><span class="p">,</span><span class="s1">&#39;九月&#39;</span><span class="p">,</span><span class="s1">&#39;十月&#39;</span><span class="p">,</span><span class="s1">&#39;十一月&#39;</span><span class="p">,</span><span class="s1">&#39;十二月&#39;</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">monthNamesShort</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;一&#39;</span><span class="p">,</span><span class="s1">&#39;二&#39;</span><span class="p">,</span><span class="s1">&#39;三&#39;</span><span class="p">,</span><span class="s1">&#39;四&#39;</span><span class="p">,</span><span class="s1">&#39;五&#39;</span><span class="p">,</span><span class="s1">&#39;六&#39;</span><span class="p">,</span><span class="s1">&#39;七&#39;</span><span class="p">,</span><span class="s1">&#39;八&#39;</span><span class="p">,</span><span class="s1">&#39;九&#39;</span><span class="p">,</span><span class="s1">&#39;十&#39;</span><span class="p">,</span><span class="s1">&#39;十一&#39;</span><span class="p">,</span><span class="s1">&#39;十二&#39;</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">dayNames</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;星期日&#39;</span><span class="p">,</span><span class="s1">&#39;星期一&#39;</span><span class="p">,</span><span class="s1">&#39;星期二&#39;</span><span class="p">,</span><span class="s1">&#39;星期三&#39;</span><span class="p">,</span><span class="s1">&#39;星期四&#39;</span><span class="p">,</span><span class="s1">&#39;星期五&#39;</span><span class="p">,</span><span class="s1">&#39;星期六&#39;</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">dayNamesShort</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;周日&#39;</span><span class="p">,</span><span class="s1">&#39;周一&#39;</span><span class="p">,</span><span class="s1">&#39;周二&#39;</span><span class="p">,</span><span class="s1">&#39;周三&#39;</span><span class="p">,</span><span class="s1">&#39;周四&#39;</span><span class="p">,</span><span class="s1">&#39;周五&#39;</span><span class="p">,</span><span class="s1">&#39;周六&#39;</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">dayNamesMin</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;日&#39;</span><span class="p">,</span><span class="s1">&#39;一&#39;</span><span class="p">,</span><span class="s1">&#39;二&#39;</span><span class="p">,</span><span class="s1">&#39;三&#39;</span><span class="p">,</span><span class="s1">&#39;四&#39;</span><span class="p">,</span><span class="s1">&#39;五&#39;</span><span class="p">,</span><span class="s1">&#39;六&#39;</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">weekHeader</span><span class="o">:</span> <span class="s1">&#39;周&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">dateFormat</span><span class="o">:</span> <span class="s1">&#39;yy-mm-dd&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">firstDay</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">isRTL</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">showMonthAfterYear</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">yearSuffix</span><span class="o">:</span> <span class="s1">&#39;年&#39;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// Global defaults for all the date picker instances</span>
</span><span class='line'>      <span class="nx">showOn</span><span class="o">:</span> <span class="s2">&quot;focus&quot;</span><span class="p">,</span> <span class="c1">// &quot;focus&quot; for popup on focus,</span>
</span><span class='line'>          <span class="c1">// &quot;button&quot; for trigger button, or &quot;both&quot; for either</span>
</span><span class='line'>      <span class="nx">showAnim</span><span class="o">:</span> <span class="s2">&quot;fadeIn&quot;</span><span class="p">,</span> <span class="c1">// Name of jQuery animation for popup</span>
</span><span class='line'>      <span class="nx">showOptions</span><span class="o">:</span> <span class="p">{},</span> <span class="c1">// Options for enhanced animations</span>
</span><span class='line'>      <span class="nx">defaultDate</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// Used when field is blank: actual date,</span>
</span><span class='line'>          <span class="c1">// +/-number for offset from today, null for today</span>
</span><span class='line'>      <span class="nx">appendText</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="c1">// Display text following the input box, e.g. showing the format</span>
</span><span class='line'>      <span class="nx">buttonText</span><span class="o">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="c1">// Text for trigger button</span>
</span><span class='line'>      <span class="nx">buttonImage</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="c1">// URL for trigger button image</span>
</span><span class='line'>      <span class="nx">buttonImageOnly</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True if the image appears alone, false if it appears on a button</span>
</span><span class='line'>      <span class="nx">hideIfNoPrevNext</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True to hide next/previous month links</span>
</span><span class='line'>          <span class="c1">// if not applicable, false to just disable them</span>
</span><span class='line'>      <span class="nx">navigationAsDateFormat</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True if date formatting applied to prev/today/next links</span>
</span><span class='line'>      <span class="nx">gotoCurrent</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True if today link goes back to current selection instead</span>
</span><span class='line'>      <span class="nx">changeMonth</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True if month can be selected directly, false if only prev/next</span>
</span><span class='line'>      <span class="nx">changeYear</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True if year can be selected directly, false if only prev/next</span>
</span><span class='line'>      <span class="nx">yearRange</span><span class="o">:</span> <span class="s2">&quot;c-10:c+10&quot;</span><span class="p">,</span> <span class="c1">// Range of years to display in drop-down,</span>
</span><span class='line'>          <span class="c1">// either relative to today&#39;s year (-nn:+nn), relative to currently displayed year</span>
</span><span class='line'>          <span class="c1">// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)</span>
</span><span class='line'>      <span class="nx">showOtherMonths</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True to show dates in other months, false to leave blank</span>
</span><span class='line'>      <span class="nx">selectOtherMonths</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True to allow selection of dates in other months, false for unselectable</span>
</span><span class='line'>      <span class="nx">showWeek</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True to show week of the year, false to not show it</span>
</span><span class='line'>      <span class="nx">calculateWeek</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">iso8601Week</span><span class="p">,</span> <span class="c1">// How to calculate the week of the year,</span>
</span><span class='line'>          <span class="c1">// takes a Date and returns the number of the week for it</span>
</span><span class='line'>      <span class="nx">shortYearCutoff</span><span class="o">:</span> <span class="s2">&quot;+10&quot;</span><span class="p">,</span> <span class="c1">// Short year values &lt; this are in the current century,</span>
</span><span class='line'>          <span class="c1">// &gt; this are in the previous century,</span>
</span><span class='line'>          <span class="c1">// string value starting with &quot;+&quot; for current year + value</span>
</span><span class='line'>      <span class="nx">minDate</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// The earliest selectable date, or null for no limit</span>
</span><span class='line'>      <span class="nx">maxDate</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// The latest selectable date, or null for no limit</span>
</span><span class='line'>      <span class="nx">duration</span><span class="o">:</span> <span class="s2">&quot;fast&quot;</span><span class="p">,</span> <span class="c1">// Duration of display/closure</span>
</span><span class='line'>      <span class="nx">beforeShowDay</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// Function that takes a date and returns an array with</span>
</span><span class='line'>          <span class="c1">// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or &quot;&quot;,</span>
</span><span class='line'>          <span class="c1">// [2] = cell title (optional), e.g. $.datepicker.noWeekends</span>
</span><span class='line'>      <span class="nx">beforeShow</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// Function that takes an input field and</span>
</span><span class='line'>          <span class="c1">// returns a set of custom settings for the date picker</span>
</span><span class='line'>      <span class="nx">onSelect</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// Define a callback function when a date is selected</span>
</span><span class='line'>      <span class="nx">onChangeMonthYear</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// Define a callback function when the month or year is changed</span>
</span><span class='line'>      <span class="nx">onClose</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// Define a callback function when the datepicker is closed</span>
</span><span class='line'>      <span class="nx">numberOfMonths</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// Number of months to show at a time</span>
</span><span class='line'>      <span class="nx">showCurrentAtPos</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// The position in multipe months at which to show the current month (starting at 0)</span>
</span><span class='line'>      <span class="nx">stepMonths</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// Number of months to step back/forward</span>
</span><span class='line'>      <span class="nx">stepBigMonths</span><span class="o">:</span> <span class="mi">12</span><span class="p">,</span> <span class="c1">// Number of months to step back/forward for the big links</span>
</span><span class='line'>      <span class="nx">altField</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="c1">// Selector for an alternate field to store selected dates into</span>
</span><span class='line'>      <span class="nx">altFormat</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="c1">// The date format to use for the alternate field</span>
</span><span class='line'>      <span class="nx">constrainInput</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// The input is constrained by the current date format</span>
</span><span class='line'>      <span class="nx">showButtonPanel</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True to show button panel, false to not show it</span>
</span><span class='line'>      <span class="nx">autoSize</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// True to size the input for the date format, false to leave as is</span>
</span><span class='line'>      <span class="nx">disabled</span><span class="o">:</span> <span class="kc">false</span> <span class="c1">// The initial disabled state</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">regional</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]);</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">dpDiv</span> <span class="o">=</span> <span class="nx">bindHover</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;div id=&#39;&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_mainDivId</span> <span class="o">+</span> <span class="s2">&quot;&#39; class=&#39;ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all&#39;&gt;&lt;/div&gt;&quot;</span><span class="p">));</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Datepicker</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>  <span class="cm">/* Class name added to elements to indicate already configured with a date picker. */</span>
</span><span class='line'>  <span class="nx">markerClassName</span><span class="o">:</span> <span class="s2">&quot;hasDatepicker&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">//Keep track of the maximum number of rows displayed (see #7043)</span>
</span><span class='line'>  <span class="nx">maxRows</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// TODO rename to &quot;widget&quot; when switching to widget factory</span>
</span><span class='line'>  <span class="nx">_widgetDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Override the default settings for all instances of the date picker.</span>
</span><span class='line'><span class="cm">  * @param  settings  object - the new settings to use as defaults (anonymous object)</span>
</span><span class='line'><span class="cm">  * @return the manager object</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">setDefaults</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">extendRemove</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">,</span> <span class="nx">settings</span> <span class="o">||</span> <span class="p">{});</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Attach the date picker to a jQuery selection.</span>
</span><span class='line'><span class="cm">  * @param  target   element - the target input field or division or span</span>
</span><span class='line'><span class="cm">  * @param  settings  object - the new settings to use for this date picker instance (anonymous)</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_attachDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">nodeName</span><span class="p">,</span> <span class="nx">inline</span><span class="p">,</span> <span class="nx">inst</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">inline</span> <span class="o">=</span> <span class="p">(</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;div&quot;</span> <span class="o">||</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;span&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">target</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">uuid</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">target</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;dp&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">uuid</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_newInst</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">target</span><span class="p">),</span> <span class="nx">inline</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">settings</span> <span class="o">||</span> <span class="p">{});</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_connectDatepicker</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">inline</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_inlineDatepicker</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Create a new instance object. */</span>
</span><span class='line'>  <span class="nx">_newInst</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">inline</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">target</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">id</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/([^A-Za-z0-9_\-])/g</span><span class="p">,</span> <span class="s2">&quot;\\\\$1&quot;</span><span class="p">);</span> <span class="c1">// escape jQuery meta chars</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">input</span><span class="o">:</span> <span class="nx">target</span><span class="p">,</span> <span class="c1">// associated target</span>
</span><span class='line'>          <span class="nx">selectedDay</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">selectedMonth</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">selectedYear</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// current selection</span>
</span><span class='line'>          <span class="nx">drawMonth</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">drawYear</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// month being drawn</span>
</span><span class='line'>          <span class="nx">inline</span><span class="o">:</span> <span class="nx">inline</span><span class="p">,</span> <span class="c1">// is datepicker inline or not</span>
</span><span class='line'>          <span class="nx">dpDiv</span><span class="o">:</span> <span class="p">(</span><span class="o">!</span><span class="nx">inline</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">dpDiv</span> <span class="o">:</span> <span class="c1">// presentation div</span>
</span><span class='line'>          <span class="nx">bindHover</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;div class=&#39;&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_inlineClass</span> <span class="o">+</span> <span class="s2">&quot; ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all&#39;&gt;&lt;/div&gt;&quot;</span><span class="p">)))};</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Attach the date picker to an input field. */</span>
</span><span class='line'>  <span class="nx">_connectDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">append</span> <span class="o">=</span> <span class="nx">$</span><span class="p">([]);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">trigger</span> <span class="o">=</span> <span class="nx">$</span><span class="p">([]);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_attachments</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">input</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">).</span><span class="nx">keydown</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_doKeyDown</span><span class="p">).</span>
</span><span class='line'>          <span class="nx">keypress</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_doKeyPress</span><span class="p">).</span><span class="nx">keyup</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_doKeyUp</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_autoSize</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">PROP_NAME</span><span class="p">,</span> <span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="c1">//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">disabled</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_disableDatepicker</span><span class="p">(</span> <span class="nx">target</span> <span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Make attachments based on settings. */</span>
</span><span class='line'>  <span class="nx">_attachments</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">showOn</span><span class="p">,</span> <span class="nx">buttonText</span><span class="p">,</span> <span class="nx">buttonImage</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">appendText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;appendText&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">isRTL</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;isRTL&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">append</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">append</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">appendText</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">append</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;span class=&#39;&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_appendClass</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">appendText</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">input</span><span class="p">[</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="s2">&quot;before&quot;</span> <span class="o">:</span> <span class="s2">&quot;after&quot;</span><span class="p">](</span><span class="nx">inst</span><span class="p">.</span><span class="nx">append</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">input</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;focus&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_showDatepicker</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">trigger</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">showOn</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showOn&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">showOn</span> <span class="o">===</span> <span class="s2">&quot;focus&quot;</span> <span class="o">||</span> <span class="nx">showOn</span> <span class="o">===</span> <span class="s2">&quot;both&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// pop-up date picker when in the marked field</span>
</span><span class='line'>          <span class="nx">input</span><span class="p">.</span><span class="nx">focus</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_showDatepicker</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">showOn</span> <span class="o">===</span> <span class="s2">&quot;button&quot;</span> <span class="o">||</span> <span class="nx">showOn</span> <span class="o">===</span> <span class="s2">&quot;both&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// pop-up date picker when button clicked</span>
</span><span class='line'>          <span class="nx">buttonText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;buttonText&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">buttonImage</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;buttonImage&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">trigger</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;buttonImageOnly&quot;</span><span class="p">)</span> <span class="o">?</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;img/&gt;&quot;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_triggerClass</span><span class="p">).</span>
</span><span class='line'>                  <span class="nx">attr</span><span class="p">({</span> <span class="nx">src</span><span class="o">:</span> <span class="nx">buttonImage</span><span class="p">,</span> <span class="nx">alt</span><span class="o">:</span> <span class="nx">buttonText</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="nx">buttonText</span> <span class="p">})</span> <span class="o">:</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;button type=&#39;button&#39;&gt;&lt;/button&gt;&quot;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_triggerClass</span><span class="p">).</span>
</span><span class='line'>                  <span class="nx">html</span><span class="p">(</span><span class="o">!</span><span class="nx">buttonImage</span> <span class="o">?</span> <span class="nx">buttonText</span> <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;img/&gt;&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span>
</span><span class='line'>                  <span class="p">{</span> <span class="nx">src</span><span class="o">:</span><span class="nx">buttonImage</span><span class="p">,</span> <span class="nx">alt</span><span class="o">:</span><span class="nx">buttonText</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span><span class="nx">buttonText</span> <span class="p">})));</span>
</span><span class='line'>          <span class="nx">input</span><span class="p">[</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="s2">&quot;before&quot;</span> <span class="o">:</span> <span class="s2">&quot;after&quot;</span><span class="p">](</span><span class="nx">inst</span><span class="p">.</span><span class="nx">trigger</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_datepickerShowing</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_lastInput</span> <span class="o">===</span> <span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_hideDatepicker</span><span class="p">();</span>
</span><span class='line'>              <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_datepickerShowing</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_lastInput</span> <span class="o">!==</span> <span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_hideDatepicker</span><span class="p">();</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_showDatepicker</span><span class="p">(</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_showDatepicker</span><span class="p">(</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>          <span class="p">});</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Apply the maximum length for the date format. */</span>
</span><span class='line'>  <span class="nx">_autoSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;autoSize&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">findMax</span><span class="p">,</span> <span class="nx">max</span><span class="p">,</span> <span class="nx">maxI</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span>
</span><span class='line'>              <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">12</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="c1">// Ensure double digits</span>
</span><span class='line'>              <span class="nx">dateFormat</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dateFormat&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">dateFormat</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/[DM]/</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">findMax</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">names</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">max</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>                  <span class="nx">maxI</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">names</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                      <span class="k">if</span> <span class="p">(</span><span class="nx">names</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">max</span> <span class="o">=</span> <span class="nx">names</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
</span><span class='line'>                          <span class="nx">maxI</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                  <span class="p">}</span>
</span><span class='line'>                  <span class="k">return</span> <span class="nx">maxI</span><span class="p">;</span>
</span><span class='line'>              <span class="p">};</span>
</span><span class='line'>              <span class="nx">date</span><span class="p">.</span><span class="nx">setMonth</span><span class="p">(</span><span class="nx">findMax</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="p">(</span><span class="nx">dateFormat</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/MM/</span><span class="p">)</span> <span class="o">?</span>
</span><span class='line'>                  <span class="s2">&quot;monthNames&quot;</span> <span class="o">:</span> <span class="s2">&quot;monthNamesShort&quot;</span><span class="p">))));</span>
</span><span class='line'>              <span class="nx">date</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">findMax</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="p">(</span><span class="nx">dateFormat</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/DD/</span><span class="p">)</span> <span class="o">?</span>
</span><span class='line'>                  <span class="s2">&quot;dayNames&quot;</span> <span class="o">:</span> <span class="s2">&quot;dayNamesShort&quot;</span><span class="p">)))</span> <span class="o">+</span> <span class="mi">20</span> <span class="o">-</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDay</span><span class="p">());</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_formatDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">date</span><span class="p">).</span><span class="nx">length</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Attach an inline date picker to a div. */</span>
</span><span class='line'>  <span class="nx">_inlineDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">divSpan</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">divSpan</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">divSpan</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">PROP_NAME</span><span class="p">,</span> <span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_setDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getDefaultDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_updateDatepicker</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_updateAlternate</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="c1">//If disabled option is true, disable the datepicker before showing it (see ticket #5665)</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">disabled</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_disableDatepicker</span><span class="p">(</span> <span class="nx">target</span> <span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="c1">// Set display:block in place of inst.dpDiv.show() which won&#39;t work on disconnected elements</span>
</span><span class='line'>      <span class="c1">// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="s2">&quot;display&quot;</span><span class="p">,</span> <span class="s2">&quot;block&quot;</span> <span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Pop-up the date picker in a &quot;dialog&quot; box.</span>
</span><span class='line'><span class="cm">  * @param  input element - ignored</span>
</span><span class='line'><span class="cm">  * @param  date string or Date - the initial date to display</span>
</span><span class='line'><span class="cm">  * @param  onSelect  function - the function to call when a date is selected</span>
</span><span class='line'><span class="cm">  * @param  settings  object - update the dialog date picker instance&#39;s settings (anonymous object)</span>
</span><span class='line'><span class="cm">  * @param  pos int[2] - coordinates for the dialog&#39;s position within the screen or</span>
</span><span class='line'><span class="cm">  *                  event - with x/y coordinates or</span>
</span><span class='line'><span class="cm">  *                  leave empty for default (screen centre)</span>
</span><span class='line'><span class="cm">  * @return the manager object</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_dialogDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">onSelect</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">pos</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">browserWidth</span><span class="p">,</span> <span class="nx">browserHeight</span><span class="p">,</span> <span class="nx">scrollX</span><span class="p">,</span> <span class="nx">scrollY</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dialogInst</span><span class="p">;</span> <span class="c1">// internal instance</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">uuid</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;dp&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">uuid</span><span class="p">;</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_dialogInput</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;input type=&#39;text&#39; id=&#39;&quot;</span> <span class="o">+</span> <span class="nx">id</span> <span class="o">+</span>
</span><span class='line'>              <span class="s2">&quot;&#39; style=&#39;position: absolute; top: -100px; width: 0px;&#39;/&gt;&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_dialogInput</span><span class="p">.</span><span class="nx">keydown</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_doKeyDown</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dialogInput</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dialogInst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_newInst</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dialogInput</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dialogInput</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">PROP_NAME</span><span class="p">,</span> <span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">extendRemove</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">settings</span> <span class="o">||</span> <span class="p">{});</span>
</span><span class='line'>      <span class="nx">date</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span> <span class="o">&amp;&amp;</span> <span class="nx">date</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Date</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_formatDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">date</span><span class="p">)</span> <span class="o">:</span> <span class="nx">date</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_dialogInput</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">date</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_pos</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pos</span> <span class="o">?</span> <span class="p">(</span><span class="nx">pos</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">pos</span> <span class="o">:</span> <span class="p">[</span><span class="nx">pos</span><span class="p">.</span><span class="nx">pageX</span><span class="p">,</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">pageY</span><span class="p">])</span> <span class="o">:</span> <span class="kc">null</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_pos</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">browserWidth</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">browserHeight</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">scrollX</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">scrollY</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_pos</span> <span class="o">=</span> <span class="c1">// should use actual width/height below</span>
</span><span class='line'>              <span class="p">[(</span><span class="nx">browserWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">100</span> <span class="o">+</span> <span class="nx">scrollX</span><span class="p">,</span> <span class="p">(</span><span class="nx">browserHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">150</span> <span class="o">+</span> <span class="nx">scrollY</span><span class="p">];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// move input on screen for focus, but hidden behind dialog</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_dialogInput</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">20</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onSelect</span> <span class="o">=</span> <span class="nx">onSelect</span><span class="p">;</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_inDialog</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dialogClass</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_showDatepicker</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dialogInput</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">blockUI</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">blockUI</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dialogInput</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">PROP_NAME</span><span class="p">,</span> <span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Detach a datepicker from its control.</span>
</span><span class='line'><span class="cm">  * @param  target   element - the target input field or division or span</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_destroyDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">nodeName</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">$target</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">target</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">PROP_NAME</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$target</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">PROP_NAME</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">append</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</span><span class='line'>          <span class="nx">$target</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">).</span>
</span><span class='line'>              <span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;focus&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_showDatepicker</span><span class="p">).</span>
</span><span class='line'>              <span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;keydown&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_doKeyDown</span><span class="p">).</span>
</span><span class='line'>              <span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;keypress&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_doKeyPress</span><span class="p">).</span>
</span><span class='line'>              <span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;keyup&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_doKeyUp</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;div&quot;</span> <span class="o">||</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;span&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">$target</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Enable the date picker to a jQuery selection.</span>
</span><span class='line'><span class="cm">  * @param  target   element - the target input field or division or span</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_enableDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">nodeName</span><span class="p">,</span> <span class="nx">inline</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">$target</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">target</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">PROP_NAME</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$target</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">target</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">).</span>
</span><span class='line'>              <span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}).</span><span class="nx">end</span><span class="p">().</span>
</span><span class='line'>              <span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span> <span class="nx">cursor</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">});</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;div&quot;</span> <span class="o">||</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;span&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inline</span> <span class="o">=</span> <span class="nx">$target</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_inlineClass</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">inline</span><span class="p">.</span><span class="nx">children</span><span class="p">().</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;ui-state-disabled&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">inline</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;select.ui-datepicker-month, select.ui-datepicker-year&quot;</span><span class="p">).</span>
</span><span class='line'>              <span class="nx">prop</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_disabledInputs</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_disabledInputs</span><span class="p">,</span>
</span><span class='line'>          <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">target</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">value</span><span class="p">);</span> <span class="p">});</span> <span class="c1">// delete entry</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Disable the date picker to a jQuery selection.</span>
</span><span class='line'><span class="cm">  * @param  target   element - the target input field or division or span</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_disableDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">nodeName</span><span class="p">,</span> <span class="nx">inline</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">$target</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">target</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">PROP_NAME</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$target</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">target</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">).</span>
</span><span class='line'>              <span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}).</span><span class="nx">end</span><span class="p">().</span>
</span><span class='line'>              <span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="s2">&quot;0.5&quot;</span><span class="p">,</span> <span class="nx">cursor</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">});</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;div&quot;</span> <span class="o">||</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;span&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inline</span> <span class="o">=</span> <span class="nx">$target</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_inlineClass</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">inline</span><span class="p">.</span><span class="nx">children</span><span class="p">().</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;ui-state-disabled&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">inline</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;select.ui-datepicker-month, select.ui-datepicker-year&quot;</span><span class="p">).</span>
</span><span class='line'>              <span class="nx">prop</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_disabledInputs</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_disabledInputs</span><span class="p">,</span>
</span><span class='line'>          <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">target</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">value</span><span class="p">);</span> <span class="p">});</span> <span class="c1">// delete entry</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_disabledInputs</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_disabledInputs</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">target</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Is the first field in a jQuery collection disabled as a datepicker?</span>
</span><span class='line'><span class="cm">  * @param  target   element - the target input field or division or span</span>
</span><span class='line'><span class="cm">  * @return boolean - true if disabled, false if enabled</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_isDisabledDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_disabledInputs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_disabledInputs</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Retrieve the instance data for the target control.</span>
</span><span class='line'><span class="cm">  * @param  target  element - the target input field or division or span</span>
</span><span class='line'><span class="cm">  * @return  object - the associated instance data</span>
</span><span class='line'><span class="cm">  * @throws  error if a jQuery problem getting data</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_getInst</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">PROP_NAME</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">throw</span> <span class="s2">&quot;Missing instance data for this datepicker&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Update or retrieve the settings for a date picker attached to an input field or division.</span>
</span><span class='line'><span class="cm">  * @param  target  element - the target input field or division or span</span>
</span><span class='line'><span class="cm">  * @param  name object - the new settings to update or</span>
</span><span class='line'><span class="cm">  *              string - the name of the setting to change or retrieve,</span>
</span><span class='line'><span class="cm">  *              when retrieving also &quot;all&quot; for all instance settings or</span>
</span><span class='line'><span class="cm">  *              &quot;defaults&quot; for all global defaults</span>
</span><span class='line'><span class="cm">  * @param  value   any - the new value for the setting</span>
</span><span class='line'><span class="cm">  *              (omit if above is an object or to retrieve a value)</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_optionDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">minDate</span><span class="p">,</span> <span class="nx">maxDate</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;defaults&quot;</span> <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">)</span> <span class="o">:</span>
</span><span class='line'>              <span class="p">(</span><span class="nx">inst</span> <span class="o">?</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;all&quot;</span> <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">)</span> <span class="o">:</span>
</span><span class='line'>              <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">name</span><span class="p">))</span> <span class="o">:</span> <span class="kc">null</span><span class="p">));</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">settings</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">||</span> <span class="p">{};</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">settings</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>          <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_curInst</span> <span class="o">===</span> <span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">this</span><span class="p">.</span><span class="nx">_hideDatepicker</span><span class="p">();</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="nx">date</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getDateDatepicker</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">minDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getMinMaxDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">maxDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getMinMaxDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">extendRemove</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</span><span class='line'>          <span class="c1">// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn&#39;t provided</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">minDate</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">dateFormat</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">minDate</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">minDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_formatDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">minDate</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">maxDate</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">dateFormat</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">maxDate</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">maxDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_formatDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">maxDate</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;disabled&quot;</span> <span class="k">in</span> <span class="nx">settings</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">disabled</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">this</span><span class="p">.</span><span class="nx">_disableDatepicker</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">this</span><span class="p">.</span><span class="nx">_enableDatepicker</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_attachments</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">target</span><span class="p">),</span> <span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_autoSize</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_setDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">date</span><span class="p">);</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_updateAlternate</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_updateDatepicker</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// change method deprecated</span>
</span><span class='line'>  <span class="nx">_changeDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_optionDatepicker</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Redraw the date picker attached to an input field or division.</span>
</span><span class='line'><span class="cm">  * @param  target  element - the target input field or division or span</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_refreshDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_updateDatepicker</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Set the dates for a jQuery selection.</span>
</span><span class='line'><span class="cm">  * @param  target element - the target input field or division or span</span>
</span><span class='line'><span class="cm">  * @param  date Date - the new date</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_setDateDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_setDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">date</span><span class="p">);</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_updateDatepicker</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_updateAlternate</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Get the date(s) for the first entry in a jQuery selection.</span>
</span><span class='line'><span class="cm">  * @param  target element - the target input field or division or span</span>
</span><span class='line'><span class="cm">  * @param  noDefault boolean - true if no default date is to be used</span>
</span><span class='line'><span class="cm">  * @return Date - the current date</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_getDateDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">noDefault</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_setDateFromField</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">noDefault</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">(</span><span class="nx">inst</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Handle keystrokes. */</span>
</span><span class='line'>  <span class="nx">_doKeyDown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">onSelect</span><span class="p">,</span> <span class="nx">dateStr</span><span class="p">,</span> <span class="nx">sel</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">handled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">isRTL</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;.ui-datepicker-rtl&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">_keyEvent</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_datepickerShowing</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">switch</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">9</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_hideDatepicker</span><span class="p">();</span>
</span><span class='line'>                      <span class="nx">handled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span> <span class="c1">// hide on tab out</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">13</span><span class="o">:</span> <span class="nx">sel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;td.&quot;</span> <span class="o">+</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_dayOverClass</span> <span class="o">+</span> <span class="s2">&quot;:not(.&quot;</span> <span class="o">+</span>
</span><span class='line'>                                  <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_currentClass</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">);</span>
</span><span class='line'>                      <span class="k">if</span> <span class="p">(</span><span class="nx">sel</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_selectDay</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span><span class="p">,</span> <span class="nx">sel</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>                      <span class="nx">onSelect</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;onSelect&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="k">if</span> <span class="p">(</span><span class="nx">onSelect</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">dateStr</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_formatDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>                          <span class="c1">// trigger custom callback</span>
</span><span class='line'>                          <span class="nx">onSelect</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">?</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">),</span> <span class="p">[</span><span class="nx">dateStr</span><span class="p">,</span> <span class="nx">inst</span><span class="p">]);</span>
</span><span class='line'>                      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_hideDatepicker</span><span class="p">();</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>                      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// don&#39;t submit the form</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">27</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_hideDatepicker</span><span class="p">();</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span> <span class="c1">// hide on escape</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">33</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">?</span>
</span><span class='line'>                          <span class="o">-</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;stepBigMonths&quot;</span><span class="p">)</span> <span class="o">:</span>
</span><span class='line'>                          <span class="o">-</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;stepMonths&quot;</span><span class="p">)),</span> <span class="s2">&quot;M&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span> <span class="c1">// previous month/year on page up/+ ctrl</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">34</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">?</span>
</span><span class='line'>                          <span class="o">+</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;stepBigMonths&quot;</span><span class="p">)</span> <span class="o">:</span>
</span><span class='line'>                          <span class="o">+</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;stepMonths&quot;</span><span class="p">)),</span> <span class="s2">&quot;M&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span> <span class="c1">// next month/year on page down/+ ctrl</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">35</span><span class="o">:</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_clearDate</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                      <span class="nx">handled</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span> <span class="c1">// clear on ctrl or command +end</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">36</span><span class="o">:</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_gotoToday</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                      <span class="nx">handled</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span> <span class="c1">// current on ctrl or command +home</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">37</span><span class="o">:</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="p">(</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="o">+</span><span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;D&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                      <span class="nx">handled</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">;</span>
</span><span class='line'>                      <span class="c1">// -1 day on ctrl or command +left</span>
</span><span class='line'>                      <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">altKey</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">?</span>
</span><span class='line'>                              <span class="o">-</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;stepBigMonths&quot;</span><span class="p">)</span> <span class="o">:</span>
</span><span class='line'>                              <span class="o">-</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;stepMonths&quot;</span><span class="p">)),</span> <span class="s2">&quot;M&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                      <span class="c1">// next month/year on alt +left on Mac</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">38</span><span class="o">:</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                      <span class="nx">handled</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span> <span class="c1">// -1 week on ctrl or command +up</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">39</span><span class="o">:</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="p">(</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;D&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                      <span class="nx">handled</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">;</span>
</span><span class='line'>                      <span class="c1">// +1 day on ctrl or command +right</span>
</span><span class='line'>                      <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">altKey</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">?</span>
</span><span class='line'>                              <span class="o">+</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;stepBigMonths&quot;</span><span class="p">)</span> <span class="o">:</span>
</span><span class='line'>                              <span class="o">+</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;stepMonths&quot;</span><span class="p">)),</span> <span class="s2">&quot;M&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                      <span class="c1">// next month/year on alt +right</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>              <span class="k">case</span> <span class="mi">40</span><span class="o">:</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="o">+</span><span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                      <span class="nx">handled</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span> <span class="c1">// +1 week on ctrl or command +down</span>
</span><span class='line'>              <span class="k">default</span><span class="o">:</span> <span class="nx">handled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">36</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// display the date picker on ctrl+home</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_showDatepicker</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">handled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">handled</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>          <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Filter entered characters - based on date format. */</span>
</span><span class='line'>  <span class="nx">_doKeyPress</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">chars</span><span class="p">,</span> <span class="nx">chr</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;constrainInput&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">chars</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_possibleChars</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dateFormat&quot;</span><span class="p">));</span>
</span><span class='line'>          <span class="nx">chr</span> <span class="o">=</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">charCode</span><span class="p">);</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span> <span class="o">||</span> <span class="p">(</span><span class="nx">chr</span> <span class="o">&lt;</span> <span class="s2">&quot; &quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">chars</span> <span class="o">||</span> <span class="nx">chars</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">chr</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Synchronise manual entry and field/alternate field. */</span>
</span><span class='line'>  <span class="nx">_doKeyUp</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">date</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">!==</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">lastVal</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">date</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">parseDate</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dateFormat&quot;</span><span class="p">),</span>
</span><span class='line'>                  <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">?</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">:</span> <span class="kc">null</span><span class="p">),</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_getFormatConfig</span><span class="p">(</span><span class="nx">inst</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// only if valid</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_setDateFromField</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_updateAlternate</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_updateDatepicker</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Pop-up the date picker for a given input field.</span>
</span><span class='line'><span class="cm">  * If false returned from beforeShow event handler do not show.</span>
</span><span class='line'><span class="cm">  * @param  input  element - the input field attached to the date picker or</span>
</span><span class='line'><span class="cm">  *                  event - if triggered by focus</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_showDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">input</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">target</span> <span class="o">||</span> <span class="nx">input</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">!==</span> <span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// find from button/image trigger</span>
</span><span class='line'>          <span class="nx">input</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="nx">input</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_isDisabledDatepicker</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_lastInput</span> <span class="o">===</span> <span class="nx">input</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// already here</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">inst</span><span class="p">,</span> <span class="nx">beforeShow</span><span class="p">,</span> <span class="nx">beforeShowSettings</span><span class="p">,</span> <span class="nx">isFixed</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">offset</span><span class="p">,</span> <span class="nx">showAnim</span><span class="p">,</span> <span class="nx">duration</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">inst</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_curInst</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_curInst</span> <span class="o">!==</span> <span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_curInst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span> <span class="nx">inst</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_datepickerShowing</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_hideDatepicker</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_curInst</span><span class="p">.</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">beforeShow</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;beforeShow&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">beforeShowSettings</span> <span class="o">=</span> <span class="nx">beforeShow</span> <span class="o">?</span> <span class="nx">beforeShow</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="p">[</span><span class="nx">input</span><span class="p">,</span> <span class="nx">inst</span><span class="p">])</span> <span class="o">:</span> <span class="p">{};</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">beforeShowSettings</span> <span class="o">===</span> <span class="kc">false</span><span class="p">){</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">extendRemove</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">beforeShowSettings</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">lastVal</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_lastInput</span> <span class="o">=</span> <span class="nx">input</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_setDateFromField</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_inDialog</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// hide cursor</span>
</span><span class='line'>          <span class="nx">input</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_pos</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// position below input</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_pos</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_findPos</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span> <span class="c1">// add the height</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">isFixed</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="nx">input</span><span class="p">).</span><span class="nx">parents</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">isFixed</span> <span class="o">|=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;fixed&quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="o">!</span><span class="nx">isFixed</span><span class="p">;</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">offset</span> <span class="o">=</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]};</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_pos</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>      <span class="c1">//to avoid flashes on Firefox</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">empty</span><span class="p">();</span>
</span><span class='line'>      <span class="c1">// determine sizing offscreen</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span><span class="nx">position</span><span class="o">:</span> <span class="s2">&quot;absolute&quot;</span><span class="p">,</span> <span class="nx">display</span><span class="o">:</span> <span class="s2">&quot;block&quot;</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="s2">&quot;-1000px&quot;</span><span class="p">});</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_updateDatepicker</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="c1">// fix width for dynamic number of date pickers</span>
</span><span class='line'>      <span class="c1">// and adjust position before showing</span>
</span><span class='line'>      <span class="nx">offset</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_checkOffset</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">offset</span><span class="p">,</span> <span class="nx">isFixed</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span><span class="nx">position</span><span class="o">:</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_inDialog</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">blockUI</span> <span class="o">?</span>
</span><span class='line'>          <span class="s2">&quot;static&quot;</span> <span class="o">:</span> <span class="p">(</span><span class="nx">isFixed</span> <span class="o">?</span> <span class="s2">&quot;fixed&quot;</span> <span class="o">:</span> <span class="s2">&quot;absolute&quot;</span><span class="p">)),</span> <span class="nx">display</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">left</span><span class="o">:</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">});</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">showAnim</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showAnim&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">duration</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">zIndex</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">input</span><span class="p">).</span><span class="nx">zIndex</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_datepickerShowing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">effects</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">effects</span><span class="p">.</span><span class="nx">effect</span><span class="p">[</span> <span class="nx">showAnim</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">showAnim</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showOptions&quot;</span><span class="p">),</span> <span class="nx">duration</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">[</span><span class="nx">showAnim</span> <span class="o">||</span> <span class="s2">&quot;show&quot;</span><span class="p">](</span><span class="nx">showAnim</span> <span class="o">?</span> <span class="nx">duration</span> <span class="o">:</span> <span class="kc">null</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;:visible&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;:disabled&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_curInst</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Generate the date picker content. */</span>
</span><span class='line'>  <span class="nx">_updateDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">maxRows</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">//Reset the max number of rows being displayed (see #7043)</span>
</span><span class='line'>      <span class="nx">instActive</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">;</span> <span class="c1">// for delegate hover events</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_generateHTML</span><span class="p">(</span><span class="nx">inst</span><span class="p">));</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_attachHandlers</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dayOverClass</span> <span class="o">+</span> <span class="s2">&quot; a&quot;</span><span class="p">).</span><span class="nx">mouseover</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">origyearshtml</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">numMonths</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getNumberOfMonths</span><span class="p">(</span><span class="nx">inst</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">cols</span> <span class="o">=</span> <span class="nx">numMonths</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">width</span> <span class="o">=</span> <span class="mi">17</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4&quot;</span><span class="p">).</span><span class="nx">width</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">cols</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;ui-datepicker-multi-&quot;</span> <span class="o">+</span> <span class="nx">cols</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">width</span> <span class="o">*</span> <span class="nx">cols</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;em&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">[(</span><span class="nx">numMonths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">numMonths</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">?</span> <span class="s2">&quot;add&quot;</span> <span class="o">:</span> <span class="s2">&quot;remove&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>          <span class="s2">&quot;Class&quot;</span><span class="p">](</span><span class="s2">&quot;ui-datepicker-multi&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">[(</span><span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;isRTL&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;add&quot;</span> <span class="o">:</span> <span class="s2">&quot;remove&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>          <span class="s2">&quot;Class&quot;</span><span class="p">](</span><span class="s2">&quot;ui-datepicker-rtl&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// #6694 - don&#39;t focus the input if it&#39;s already focused</span>
</span><span class='line'>      <span class="c1">// this breaks the change event in IE</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span> <span class="o">===</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_curInst</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_datepickerShowing</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;:visible&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;:disabled&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// deffered render of the years select (to avoid flashes on Firefox)</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span> <span class="p">){</span>
</span><span class='line'>          <span class="nx">origyearshtml</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>              <span class="c1">//assure that inst.yearshtml didn&#39;t change.</span>
</span><span class='line'>              <span class="k">if</span><span class="p">(</span> <span class="nx">origyearshtml</span> <span class="o">===</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span> <span class="p">){</span>
</span><span class='line'>                  <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;select.ui-datepicker-year:first&quot;</span><span class="p">).</span><span class="nx">replaceWith</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">origyearshtml</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>          <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Retrieve the size of left and top borders for an element.</span>
</span><span class='line'><span class="cm">  * @param  elem  (jQuery object) the element of interest</span>
</span><span class='line'><span class="cm">  * @return  (number[2]) the left and top borders</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_getBorders</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">convert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="p">{</span><span class="nx">thin</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">medium</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">thick</span><span class="o">:</span> <span class="mi">3</span><span class="p">}[</span><span class="nx">value</span><span class="p">]</span> <span class="o">||</span> <span class="nx">value</span><span class="p">;</span>
</span><span class='line'>      <span class="p">};</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">[</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">convert</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;border-left-width&quot;</span><span class="p">))),</span>
</span><span class='line'>          <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">convert</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;border-top-width&quot;</span><span class="p">)))];</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Check positioning to remain on screen. */</span>
</span><span class='line'>  <span class="nx">_checkOffset</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">offset</span><span class="p">,</span> <span class="nx">isFixed</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">dpWidth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">(),</span>
</span><span class='line'>          <span class="nx">dpHeight</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">(),</span>
</span><span class='line'>          <span class="nx">inputWidth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">?</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">inputHeight</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">?</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">viewWidth</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">+</span> <span class="p">(</span><span class="nx">isFixed</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">scrollLeft</span><span class="p">()),</span>
</span><span class='line'>          <span class="nx">viewHeight</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">+</span> <span class="p">(</span><span class="nx">isFixed</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">scrollTop</span><span class="p">());</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">-=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;isRTL&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">dpWidth</span> <span class="o">-</span> <span class="nx">inputWidth</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">-=</span> <span class="p">(</span><span class="nx">isFixed</span> <span class="o">&amp;&amp;</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">===</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">offset</span><span class="p">().</span><span class="nx">left</span><span class="p">)</span> <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">scrollLeft</span><span class="p">()</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">-=</span> <span class="p">(</span><span class="nx">isFixed</span> <span class="o">&amp;&amp;</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">===</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">inputHeight</span><span class="p">))</span> <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">scrollTop</span><span class="p">()</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// now check if datepicker is showing outside window viewport - move to a better place if so.</span>
</span><span class='line'>      <span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">-=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">offset</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span> <span class="p">(</span><span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">dpWidth</span> <span class="o">&gt;</span> <span class="nx">viewWidth</span> <span class="o">&amp;&amp;</span> <span class="nx">viewWidth</span> <span class="o">&gt;</span> <span class="nx">dpWidth</span><span class="p">)</span> <span class="o">?</span>
</span><span class='line'>          <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">dpWidth</span> <span class="o">-</span> <span class="nx">viewWidth</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">-=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span> <span class="p">(</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">dpHeight</span> <span class="o">&gt;</span> <span class="nx">viewHeight</span> <span class="o">&amp;&amp;</span> <span class="nx">viewHeight</span> <span class="o">&gt;</span> <span class="nx">dpHeight</span><span class="p">)</span> <span class="o">?</span>
</span><span class='line'>          <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">dpHeight</span> <span class="o">+</span> <span class="nx">inputHeight</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="nx">offset</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Find an object&#39;s position on the screen. */</span>
</span><span class='line'>  <span class="nx">_findPos</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">position</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">obj</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">isRTL</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;isRTL&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="nx">obj</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;hidden&quot;</span> <span class="o">||</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">$</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">hidden</span><span class="p">(</span><span class="nx">obj</span><span class="p">)))</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">obj</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="s2">&quot;previousSibling&quot;</span> <span class="o">:</span> <span class="s2">&quot;nextSibling&quot;</span><span class="p">];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">position</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">obj</span><span class="p">).</span><span class="nx">offset</span><span class="p">();</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">[</span><span class="nx">position</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span> <span class="nx">position</span><span class="p">.</span><span class="nx">top</span><span class="p">];</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Hide the date picker from view.</span>
</span><span class='line'><span class="cm">  * @param  input  element - the input field attached to the date picker</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_hideDatepicker</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">showAnim</span><span class="p">,</span> <span class="nx">duration</span><span class="p">,</span> <span class="nx">postProcess</span><span class="p">,</span> <span class="nx">onClose</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_curInst</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">inst</span> <span class="o">||</span> <span class="p">(</span><span class="nx">input</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span> <span class="o">!==</span> <span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">PROP_NAME</span><span class="p">)))</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_datepickerShowing</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">showAnim</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showAnim&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">duration</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">postProcess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_tidyDialog</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>          <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>          <span class="c1">// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">effects</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">effects</span><span class="p">.</span><span class="nx">effect</span><span class="p">[</span> <span class="nx">showAnim</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">$</span><span class="p">.</span><span class="nx">effects</span><span class="p">[</span> <span class="nx">showAnim</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">hide</span><span class="p">(</span><span class="nx">showAnim</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showOptions&quot;</span><span class="p">),</span> <span class="nx">duration</span><span class="p">,</span> <span class="nx">postProcess</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">[(</span><span class="nx">showAnim</span> <span class="o">===</span> <span class="s2">&quot;slideDown&quot;</span> <span class="o">?</span> <span class="s2">&quot;slideUp&quot;</span> <span class="o">:</span>
</span><span class='line'>                  <span class="p">(</span><span class="nx">showAnim</span> <span class="o">===</span> <span class="s2">&quot;fadeIn&quot;</span> <span class="o">?</span> <span class="s2">&quot;fadeOut&quot;</span> <span class="o">:</span> <span class="s2">&quot;hide&quot;</span><span class="p">))]((</span><span class="nx">showAnim</span> <span class="o">?</span> <span class="nx">duration</span> <span class="o">:</span> <span class="kc">null</span><span class="p">),</span> <span class="nx">postProcess</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">showAnim</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">postProcess</span><span class="p">();</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_datepickerShowing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="nx">onClose</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;onClose&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">onClose</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">onClose</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">?</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">),</span> <span class="p">[(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">?</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="nx">inst</span><span class="p">]);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_lastInput</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_inDialog</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">this</span><span class="p">.</span><span class="nx">_dialogInput</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span> <span class="nx">position</span><span class="o">:</span> <span class="s2">&quot;absolute&quot;</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="s2">&quot;-100px&quot;</span> <span class="p">});</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">blockUI</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">.</span><span class="nx">unblockUI</span><span class="p">();</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_inDialog</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Tidy up after a dialog display. */</span>
</span><span class='line'>  <span class="nx">_tidyDialog</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dialogClass</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;.ui-datepicker-calendar&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Close date picker if clicked elsewhere. */</span>
</span><span class='line'>  <span class="nx">_checkExternalClick</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_curInst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">$target</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">$target</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">$target</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_mainDivId</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>              <span class="nx">$target</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_mainDivId</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>              <span class="o">!</span><span class="nx">$target</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>              <span class="o">!</span><span class="nx">$target</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_triggerClass</span><span class="p">).</span><span class="nx">length</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_datepickerShowing</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_inDialog</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">blockUI</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span>
</span><span class='line'>          <span class="p">(</span> <span class="nx">$target</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">markerClassName</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_curInst</span> <span class="o">!==</span> <span class="nx">inst</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_hideDatepicker</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Adjust one of the date sub-fields. */</span>
</span><span class='line'>  <span class="nx">_adjustDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">offset</span><span class="p">,</span> <span class="nx">period</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">target</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_isDisabledDatepicker</span><span class="p">(</span><span class="nx">target</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_adjustInstDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">offset</span> <span class="o">+</span>
</span><span class='line'>          <span class="p">(</span><span class="nx">period</span> <span class="o">===</span> <span class="s2">&quot;M&quot;</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showCurrentAtPos&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">),</span> <span class="c1">// undo positioning</span>
</span><span class='line'>          <span class="nx">period</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_updateDatepicker</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Action for current link. */</span>
</span><span class='line'>  <span class="nx">_gotoToday</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">date</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">target</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">target</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;gotoCurrent&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">drawMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentMonth</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">drawYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentYear</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">drawMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">();</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">drawYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_notifyChange</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Action for selecting a new month/year. */</span>
</span><span class='line'>  <span class="nx">_selectMonthYear</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">select</span><span class="p">,</span> <span class="nx">period</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">target</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">inst</span><span class="p">[</span><span class="s2">&quot;selected&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">period</span> <span class="o">===</span> <span class="s2">&quot;M&quot;</span> <span class="o">?</span> <span class="s2">&quot;Month&quot;</span> <span class="o">:</span> <span class="s2">&quot;Year&quot;</span><span class="p">)]</span> <span class="o">=</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">[</span><span class="s2">&quot;draw&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">period</span> <span class="o">===</span> <span class="s2">&quot;M&quot;</span> <span class="o">?</span> <span class="s2">&quot;Month&quot;</span> <span class="o">:</span> <span class="s2">&quot;Year&quot;</span><span class="p">)]</span> <span class="o">=</span>
</span><span class='line'>          <span class="nb">parseInt</span><span class="p">(</span><span class="nx">select</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">select</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">].</span><span class="nx">value</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_notifyChange</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Action for selecting a day. */</span>
</span><span class='line'>  <span class="nx">_selectDay</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="nx">year</span><span class="p">,</span> <span class="nx">td</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">inst</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">target</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">td</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_unselectableClass</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_isDisabledDatepicker</span><span class="p">(</span><span class="nx">target</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">target</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="nx">td</span><span class="p">).</span><span class="nx">html</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentMonth</span> <span class="o">=</span> <span class="nx">month</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentYear</span> <span class="o">=</span> <span class="nx">year</span><span class="p">;</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_selectDate</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_formatDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentMonth</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentYear</span><span class="p">));</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Erase the input field and hide the date picker. */</span>
</span><span class='line'>  <span class="nx">_clearDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_selectDate</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Update the input field with the selected date. */</span>
</span><span class='line'>  <span class="nx">_selectDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">dateStr</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">onSelect</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">target</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">inst</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getInst</span><span class="p">(</span><span class="nx">target</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">dateStr</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dateStr</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">dateStr</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_formatDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">));</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">dateStr</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_updateAlternate</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">onSelect</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;onSelect&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">onSelect</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">onSelect</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">?</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">),</span> <span class="p">[</span><span class="nx">dateStr</span><span class="p">,</span> <span class="nx">inst</span><span class="p">]);</span>  <span class="c1">// trigger custom callback</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">);</span> <span class="c1">// fire the change event</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">inline</span><span class="p">){</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_updateDatepicker</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_hideDatepicker</span><span class="p">();</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_lastInput</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span> <span class="c1">// restore focus</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_lastInput</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Update any alternate field to synchronise with the main field. */</span>
</span><span class='line'>  <span class="nx">_updateAlternate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">altFormat</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">dateStr</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">altField</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;altField&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">altField</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// update alternate field too</span>
</span><span class='line'>          <span class="nx">altFormat</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;altFormat&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dateFormat&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">date</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">dateStr</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatDate</span><span class="p">(</span><span class="nx">altFormat</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getFormatConfig</span><span class="p">(</span><span class="nx">inst</span><span class="p">));</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">(</span><span class="nx">altField</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">dateStr</span><span class="p">);</span> <span class="p">});</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Set as beforeShowDay function to prevent selection of weekends.</span>
</span><span class='line'><span class="cm">  * @param  date  Date - the date to customise</span>
</span><span class='line'><span class="cm">  * @return [boolean, string] - is this date selectable?, what is its CSS class?</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">noWeekends</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">[(</span><span class="nx">day</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">day</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">),</span> <span class="s2">&quot;&quot;</span><span class="p">];</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.</span>
</span><span class='line'><span class="cm">  * @param  date  Date - the date to get the week for</span>
</span><span class='line'><span class="cm">  * @return  number - the number of the week within the year that contains this date</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">iso8601Week</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">time</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">checkDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">());</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// Find Thursday of this week starting on Monday</span>
</span><span class='line'>      <span class="nx">checkDate</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">checkDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">-</span> <span class="p">(</span><span class="nx">checkDate</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">||</span> <span class="mi">7</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">time</span> <span class="o">=</span> <span class="nx">checkDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">checkDate</span><span class="p">.</span><span class="nx">setMonth</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// Compare with Jan 1</span>
</span><span class='line'>      <span class="nx">checkDate</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">time</span> <span class="o">-</span> <span class="nx">checkDate</span><span class="p">)</span> <span class="o">/</span> <span class="mi">86400000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">7</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Parse a string value into a date object.</span>
</span><span class='line'><span class="cm">  * See formatDate below for the possible formats.</span>
</span><span class='line'><span class="cm">  *</span>
</span><span class='line'><span class="cm">  * @param  format string - the expected format of the date</span>
</span><span class='line'><span class="cm">  * @param  value string - the date in the above format</span>
</span><span class='line'><span class="cm">  * @param  settings Object - attributes include:</span>
</span><span class='line'><span class="cm">  *                  shortYearCutoff  number - the cutoff year for determining the century (optional)</span>
</span><span class='line'><span class="cm">  *                  dayNamesShort   string[7] - abbreviated names of the days from Sunday (optional)</span>
</span><span class='line'><span class="cm">  *                  dayNames        string[7] - names of the days from Sunday (optional)</span>
</span><span class='line'><span class="cm">  *                  monthNamesShort string[12] - abbreviated names of the months (optional)</span>
</span><span class='line'><span class="cm">  *                  monthNames      string[12] - names of the months (optional)</span>
</span><span class='line'><span class="cm">  * @return  Date - the extracted date value or null if value is blank</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">parseDate</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">format</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">format</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">throw</span> <span class="s2">&quot;Invalid arguments&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">?</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">:</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">iFormat</span><span class="p">,</span> <span class="nx">dim</span><span class="p">,</span> <span class="nx">extra</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">iValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">shortYearCutoffTemp</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span> <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">shortYearCutoff</span> <span class="o">:</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">.</span><span class="nx">shortYearCutoff</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">shortYearCutoff</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">shortYearCutoffTemp</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span> <span class="nx">shortYearCutoffTemp</span> <span class="o">:</span>
</span><span class='line'>              <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">shortYearCutoffTemp</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span>
</span><span class='line'>          <span class="nx">dayNamesShort</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span> <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">dayNamesShort</span> <span class="o">:</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">.</span><span class="nx">dayNamesShort</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">dayNames</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span> <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">dayNames</span> <span class="o">:</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">.</span><span class="nx">dayNames</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">monthNamesShort</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span> <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">monthNamesShort</span> <span class="o">:</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">.</span><span class="nx">monthNamesShort</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">monthNames</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span> <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">monthNames</span> <span class="o">:</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">.</span><span class="nx">monthNames</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">year</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">month</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">day</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">doy</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">literal</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">date</span><span class="p">,</span>
</span><span class='line'>          <span class="c1">// Check whether a format character is doubled</span>
</span><span class='line'>          <span class="nx">lookAhead</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="p">(</span><span class="nx">iFormat</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">format</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="nx">match</span><span class="p">);</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">matches</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">iFormat</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">return</span> <span class="nx">matches</span><span class="p">;</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="c1">// Extract a number from the string value</span>
</span><span class='line'>          <span class="nx">getNumber</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="kd">var</span> <span class="nx">isDoubled</span> <span class="o">=</span> <span class="nx">lookAhead</span><span class="p">(</span><span class="nx">match</span><span class="p">),</span>
</span><span class='line'>                  <span class="nx">size</span> <span class="o">=</span> <span class="p">(</span><span class="nx">match</span> <span class="o">===</span> <span class="s2">&quot;@&quot;</span> <span class="o">?</span> <span class="mi">14</span> <span class="o">:</span> <span class="p">(</span><span class="nx">match</span> <span class="o">===</span> <span class="s2">&quot;!&quot;</span> <span class="o">?</span> <span class="mi">20</span> <span class="o">:</span>
</span><span class='line'>                  <span class="p">(</span><span class="nx">match</span> <span class="o">===</span> <span class="s2">&quot;y&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">isDoubled</span> <span class="o">?</span> <span class="mi">4</span> <span class="o">:</span> <span class="p">(</span><span class="nx">match</span> <span class="o">===</span> <span class="s2">&quot;o&quot;</span> <span class="o">?</span> <span class="mi">3</span> <span class="o">:</span> <span class="mi">2</span><span class="p">)))),</span>
</span><span class='line'>                  <span class="nx">digits</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;^\\d{1,&quot;</span> <span class="o">+</span> <span class="nx">size</span> <span class="o">+</span> <span class="s2">&quot;}&quot;</span><span class="p">),</span>
</span><span class='line'>                  <span class="nx">num</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">iValue</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="nx">digits</span><span class="p">);</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">throw</span> <span class="s2">&quot;Missing number at position &quot;</span> <span class="o">+</span> <span class="nx">iValue</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">iValue</span> <span class="o">+=</span> <span class="nx">num</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
</span><span class='line'>              <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">num</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="c1">// Extract a name from the string value and convert to an index</span>
</span><span class='line'>          <span class="nx">getName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">shortNames</span><span class="p">,</span> <span class="nx">longNames</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
</span><span class='line'>                  <span class="nx">names</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">lookAhead</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="o">?</span> <span class="nx">longNames</span> <span class="o">:</span> <span class="nx">shortNames</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                      <span class="k">return</span> <span class="p">[</span> <span class="p">[</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">]</span> <span class="p">];</span>
</span><span class='line'>                  <span class="p">}).</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                      <span class="k">return</span> <span class="o">-</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span><span class="p">);</span>
</span><span class='line'>                  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>              <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">names</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">pair</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>                  <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">iValue</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'>                      <span class="nx">index</span> <span class="o">=</span> <span class="nx">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>                      <span class="nx">iValue</span> <span class="o">+=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>                  <span class="p">}</span>
</span><span class='line'>              <span class="p">});</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">return</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">throw</span> <span class="s2">&quot;Unknown name at position &quot;</span> <span class="o">+</span> <span class="nx">iValue</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="c1">// Confirm that a literal character matches the string value</span>
</span><span class='line'>          <span class="nx">checkLiteral</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iValue</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">throw</span> <span class="s2">&quot;Unexpected literal at position &quot;</span> <span class="o">+</span> <span class="nx">iValue</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">iValue</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>          <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="nx">iFormat</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">iFormat</span> <span class="o">&lt;</span> <span class="nx">format</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">iFormat</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">literal</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">lookAhead</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">literal</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">checkLiteral</span><span class="p">();</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">switch</span> <span class="p">(</span><span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;d&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">day</span> <span class="o">=</span> <span class="nx">getNumber</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;D&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">getName</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="nx">dayNamesShort</span><span class="p">,</span> <span class="nx">dayNames</span><span class="p">);</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;o&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">doy</span> <span class="o">=</span> <span class="nx">getNumber</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;m&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">month</span> <span class="o">=</span> <span class="nx">getNumber</span><span class="p">(</span><span class="s2">&quot;m&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;M&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">month</span> <span class="o">=</span> <span class="nx">getName</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="nx">monthNamesShort</span><span class="p">,</span> <span class="nx">monthNames</span><span class="p">);</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;y&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">year</span> <span class="o">=</span> <span class="nx">getNumber</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">);</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;@&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">getNumber</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">));</span>
</span><span class='line'>                      <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
</span><span class='line'>                      <span class="nx">month</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>                      <span class="nx">day</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;!&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">((</span><span class="nx">getNumber</span><span class="p">(</span><span class="s2">&quot;!&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_ticksTo1970</span><span class="p">)</span> <span class="o">/</span> <span class="mi">10000</span><span class="p">);</span>
</span><span class='line'>                      <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
</span><span class='line'>                      <span class="nx">month</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>                      <span class="nx">day</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;&#39;&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="k">if</span> <span class="p">(</span><span class="nx">lookAhead</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">)){</span>
</span><span class='line'>                          <span class="nx">checkLiteral</span><span class="p">();</span>
</span><span class='line'>                      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">literal</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">default</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">checkLiteral</span><span class="p">();</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">iValue</span> <span class="o">&lt;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>
</span><span class='line'>          <span class="nx">extra</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">iValue</span><span class="p">);</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="sr">/^\s+/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">extra</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">throw</span> <span class="s2">&quot;Extra/unparsed characters found in date: &quot;</span> <span class="o">+</span> <span class="nx">extra</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">year</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">year</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getFullYear</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">year</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">year</span> <span class="o">+=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">-</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">+</span>
</span><span class='line'>              <span class="p">(</span><span class="nx">year</span> <span class="o">&lt;=</span> <span class="nx">shortYearCutoff</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="o">-</span><span class="mi">100</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">doy</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">month</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">day</span> <span class="o">=</span> <span class="nx">doy</span><span class="p">;</span>
</span><span class='line'>          <span class="k">do</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">dim</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getDaysInMonth</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">day</span> <span class="o">&lt;=</span> <span class="nx">dim</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">break</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">month</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>              <span class="nx">day</span> <span class="o">-=</span> <span class="nx">dim</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">date</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">day</span><span class="p">));</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">!==</span> <span class="nx">year</span> <span class="o">||</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">!==</span> <span class="nx">month</span> <span class="o">||</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">!==</span> <span class="nx">day</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">throw</span> <span class="s2">&quot;Invalid date&quot;</span><span class="p">;</span> <span class="c1">// E.g. 31/02/00</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">date</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Standard date formats. */</span>
</span><span class='line'>  <span class="nx">ATOM</span><span class="o">:</span> <span class="s2">&quot;yy-mm-dd&quot;</span><span class="p">,</span> <span class="c1">// RFC 3339 (ISO 8601)</span>
</span><span class='line'>  <span class="nx">COOKIE</span><span class="o">:</span> <span class="s2">&quot;D, dd M yy&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">ISO_8601</span><span class="o">:</span> <span class="s2">&quot;yy-mm-dd&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">RFC_822</span><span class="o">:</span> <span class="s2">&quot;D, d M y&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">RFC_850</span><span class="o">:</span> <span class="s2">&quot;DD, dd-M-y&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">RFC_1036</span><span class="o">:</span> <span class="s2">&quot;D, d M y&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">RFC_1123</span><span class="o">:</span> <span class="s2">&quot;D, d M yy&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">RFC_2822</span><span class="o">:</span> <span class="s2">&quot;D, d M yy&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">RSS</span><span class="o">:</span> <span class="s2">&quot;D, d M y&quot;</span><span class="p">,</span> <span class="c1">// RFC 822</span>
</span><span class='line'>  <span class="nx">TICKS</span><span class="o">:</span> <span class="s2">&quot;!&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">TIMESTAMP</span><span class="o">:</span> <span class="s2">&quot;@&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">W3C</span><span class="o">:</span> <span class="s2">&quot;yy-mm-dd&quot;</span><span class="p">,</span> <span class="c1">// ISO 8601</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">_ticksTo1970</span><span class="o">:</span> <span class="p">(((</span><span class="mi">1970</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">365</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="mi">1970</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="mi">1970</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>      <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="mi">1970</span> <span class="o">/</span> <span class="mi">400</span><span class="p">))</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">10000000</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Format a date object into a string value.</span>
</span><span class='line'><span class="cm">  * The format can be combinations of the following:</span>
</span><span class='line'><span class="cm">  * d  - day of month (no leading zero)</span>
</span><span class='line'><span class="cm">  * dd - day of month (two digit)</span>
</span><span class='line'><span class="cm">  * o  - day of year (no leading zeros)</span>
</span><span class='line'><span class="cm">  * oo - day of year (three digit)</span>
</span><span class='line'><span class="cm">  * D  - day name short</span>
</span><span class='line'><span class="cm">  * DD - day name long</span>
</span><span class='line'><span class="cm">  * m  - month of year (no leading zero)</span>
</span><span class='line'><span class="cm">  * mm - month of year (two digit)</span>
</span><span class='line'><span class="cm">  * M  - month name short</span>
</span><span class='line'><span class="cm">  * MM - month name long</span>
</span><span class='line'><span class="cm">  * y  - year (two digit)</span>
</span><span class='line'><span class="cm">  * yy - year (four digit)</span>
</span><span class='line'><span class="cm">  * @ - Unix timestamp (ms since 01/01/1970)</span>
</span><span class='line'><span class="cm">  * ! - Windows ticks (100ns since 01/01/0001)</span>
</span><span class='line'><span class="cm">  * &quot;...&quot; - literal text</span>
</span><span class='line'><span class="cm">  * &#39;&#39; - single quote</span>
</span><span class='line'><span class="cm">  *</span>
</span><span class='line'><span class="cm">  * @param  format string - the desired format of the date</span>
</span><span class='line'><span class="cm">  * @param  date Date - the date value to format</span>
</span><span class='line'><span class="cm">  * @param  settings Object - attributes include:</span>
</span><span class='line'><span class="cm">  *                  dayNamesShort   string[7] - abbreviated names of the days from Sunday (optional)</span>
</span><span class='line'><span class="cm">  *                  dayNames        string[7] - names of the days from Sunday (optional)</span>
</span><span class='line'><span class="cm">  *                  monthNamesShort string[12] - abbreviated names of the months (optional)</span>
</span><span class='line'><span class="cm">  *                  monthNames      string[12] - names of the months (optional)</span>
</span><span class='line'><span class="cm">  * @return  string - the date in the above format</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">formatDate</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">format</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">iFormat</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">dayNamesShort</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span> <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">dayNamesShort</span> <span class="o">:</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">.</span><span class="nx">dayNamesShort</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">dayNames</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span> <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">dayNames</span> <span class="o">:</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">.</span><span class="nx">dayNames</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">monthNamesShort</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span> <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">monthNamesShort</span> <span class="o">:</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">.</span><span class="nx">monthNamesShort</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">monthNames</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span> <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">monthNames</span> <span class="o">:</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">.</span><span class="nx">monthNames</span><span class="p">,</span>
</span><span class='line'>          <span class="c1">// Check whether a format character is doubled</span>
</span><span class='line'>          <span class="nx">lookAhead</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="p">(</span><span class="nx">iFormat</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">format</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="nx">match</span><span class="p">);</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">matches</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">iFormat</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">return</span> <span class="nx">matches</span><span class="p">;</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="c1">// Format a number, with leading zero if necessary</span>
</span><span class='line'>          <span class="nx">formatNumber</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">value</span><span class="p">;</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">lookAhead</span><span class="p">(</span><span class="nx">match</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">while</span> <span class="p">(</span><span class="nx">num</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                      <span class="nx">num</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span> <span class="o">+</span> <span class="nx">num</span><span class="p">;</span>
</span><span class='line'>                  <span class="p">}</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">return</span> <span class="nx">num</span><span class="p">;</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="c1">// Format a name, short or long as requested</span>
</span><span class='line'>          <span class="nx">formatName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">shortNames</span><span class="p">,</span> <span class="nx">longNames</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="p">(</span><span class="nx">lookAhead</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="o">?</span> <span class="nx">longNames</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">:</span> <span class="nx">shortNames</span><span class="p">[</span><span class="nx">value</span><span class="p">]);</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="nx">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">literal</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="nx">iFormat</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">iFormat</span> <span class="o">&lt;</span> <span class="nx">format</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">iFormat</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">literal</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">if</span> <span class="p">(</span><span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">lookAhead</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                      <span class="nx">literal</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>                  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                      <span class="nx">output</span> <span class="o">+=</span> <span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">);</span>
</span><span class='line'>                  <span class="p">}</span>
</span><span class='line'>              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">switch</span> <span class="p">(</span><span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;d&quot;</span><span class="o">:</span>
</span><span class='line'>                          <span class="nx">output</span> <span class="o">+=</span> <span class="nx">formatNumber</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">(),</span> <span class="mi">2</span><span class="p">);</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;D&quot;</span><span class="o">:</span>
</span><span class='line'>                          <span class="nx">output</span> <span class="o">+=</span> <span class="nx">formatName</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDay</span><span class="p">(),</span> <span class="nx">dayNamesShort</span><span class="p">,</span> <span class="nx">dayNames</span><span class="p">);</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;o&quot;</span><span class="o">:</span>
</span><span class='line'>                          <span class="nx">output</span> <span class="o">+=</span> <span class="nx">formatNumber</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">,</span>
</span><span class='line'>                              <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">(),</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()).</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">getTime</span><span class="p">())</span> <span class="o">/</span> <span class="mi">86400000</span><span class="p">),</span> <span class="mi">3</span><span class="p">);</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;m&quot;</span><span class="o">:</span>
</span><span class='line'>                          <span class="nx">output</span> <span class="o">+=</span> <span class="nx">formatNumber</span><span class="p">(</span><span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;M&quot;</span><span class="o">:</span>
</span><span class='line'>                          <span class="nx">output</span> <span class="o">+=</span> <span class="nx">formatName</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">(),</span> <span class="nx">monthNamesShort</span><span class="p">,</span> <span class="nx">monthNames</span><span class="p">);</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;y&quot;</span><span class="o">:</span>
</span><span class='line'>                          <span class="nx">output</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">lookAhead</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">:</span>
</span><span class='line'>                              <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getYear</span><span class="p">()</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="o">?</span> <span class="s2">&quot;0&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getYear</span><span class="p">()</span> <span class="o">%</span> <span class="mi">100</span><span class="p">);</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;@&quot;</span><span class="o">:</span>
</span><span class='line'>                          <span class="nx">output</span> <span class="o">+=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;!&quot;</span><span class="o">:</span>
</span><span class='line'>                          <span class="nx">output</span> <span class="o">+=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">*</span> <span class="mi">10000</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_ticksTo1970</span><span class="p">;</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;&#39;&quot;</span><span class="o">:</span>
</span><span class='line'>                          <span class="k">if</span> <span class="p">(</span><span class="nx">lookAhead</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                              <span class="nx">output</span> <span class="o">+=</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">;</span>
</span><span class='line'>                          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                              <span class="nx">literal</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>                          <span class="p">}</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">default</span><span class="o">:</span>
</span><span class='line'>                          <span class="nx">output</span> <span class="o">+=</span> <span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">);</span>
</span><span class='line'>                  <span class="p">}</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">output</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Extract all possible characters from the date format. */</span>
</span><span class='line'>  <span class="nx">_possibleChars</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">iFormat</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">chars</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">literal</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>          <span class="c1">// Check whether a format character is doubled</span>
</span><span class='line'>          <span class="nx">lookAhead</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="p">(</span><span class="nx">iFormat</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">format</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="nx">match</span><span class="p">);</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">matches</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">iFormat</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">return</span> <span class="nx">matches</span><span class="p">;</span>
</span><span class='line'>          <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="nx">iFormat</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">iFormat</span> <span class="o">&lt;</span> <span class="nx">format</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">iFormat</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">literal</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">lookAhead</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">literal</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">chars</span> <span class="o">+=</span> <span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">switch</span> <span class="p">(</span><span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;d&quot;</span><span class="o">:</span> <span class="k">case</span> <span class="s2">&quot;m&quot;</span><span class="o">:</span> <span class="k">case</span> <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="k">case</span> <span class="s2">&quot;@&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">chars</span> <span class="o">+=</span> <span class="s2">&quot;0123456789&quot;</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;D&quot;</span><span class="o">:</span> <span class="k">case</span> <span class="s2">&quot;M&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// Accept anything</span>
</span><span class='line'>                  <span class="k">case</span> <span class="s2">&quot;&#39;&quot;</span><span class="o">:</span>
</span><span class='line'>                      <span class="k">if</span> <span class="p">(</span><span class="nx">lookAhead</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">chars</span> <span class="o">+=</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">;</span>
</span><span class='line'>                      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                          <span class="nx">literal</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">default</span><span class="o">:</span>
</span><span class='line'>                      <span class="nx">chars</span> <span class="o">+=</span> <span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">iFormat</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">chars</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Get a setting value, defaulting if necessary. */</span>
</span><span class='line'>  <span class="nx">_get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">?</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_defaults</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Parse existing date and initialise date picker. */</span>
</span><span class='line'>  <span class="nx">_setDateFromField</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">noDefault</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">===</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">lastVal</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">dateFormat</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dateFormat&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">dates</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">lastVal</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">?</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">defaultDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getDefaultDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">date</span> <span class="o">=</span> <span class="nx">defaultDate</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">settings</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getFormatConfig</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">date</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parseDate</span><span class="p">(</span><span class="nx">dateFormat</span><span class="p">,</span> <span class="nx">dates</span><span class="p">,</span> <span class="nx">settings</span><span class="p">)</span> <span class="o">||</span> <span class="nx">defaultDate</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">dates</span> <span class="o">=</span> <span class="p">(</span><span class="nx">noDefault</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">dates</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">drawMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">drawYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dates</span> <span class="o">?</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">currentMonth</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dates</span> <span class="o">?</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">currentYear</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dates</span> <span class="o">?</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_adjustInstDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Retrieve the default date shown on opening. */</span>
</span><span class='line'>  <span class="nx">_getDefaultDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_restrictMinMax</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_determineDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;defaultDate&quot;</span><span class="p">),</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()));</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* A date may be specified as an exact value or a relative one. */</span>
</span><span class='line'>  <span class="nx">_determineDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">defaultDate</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">offsetNumeric</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
</span><span class='line'>              <span class="nx">date</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">);</span>
</span><span class='line'>              <span class="k">return</span> <span class="nx">date</span><span class="p">;</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="nx">offsetString</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">parseDate</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dateFormat&quot;</span><span class="p">),</span>
</span><span class='line'>                      <span class="nx">offset</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_getFormatConfig</span><span class="p">(</span><span class="nx">inst</span><span class="p">));</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="c1">// Ignore</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>              <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="p">(</span><span class="nx">offset</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^c/</span><span class="p">)</span> <span class="o">?</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_getDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
</span><span class='line'>                  <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span>
</span><span class='line'>                  <span class="nx">month</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">(),</span>
</span><span class='line'>                  <span class="nx">day</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">(),</span>
</span><span class='line'>                  <span class="nx">pattern</span> <span class="o">=</span> <span class="sr">/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g</span><span class="p">,</span>
</span><span class='line'>                  <span class="nx">matches</span> <span class="o">=</span> <span class="nx">pattern</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">offset</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>              <span class="k">while</span> <span class="p">(</span><span class="nx">matches</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">switch</span> <span class="p">(</span><span class="nx">matches</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;d&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;d&quot;</span> <span class="o">:</span> <span class="k">case</span> <span class="s2">&quot;D&quot;</span> <span class="o">:</span>
</span><span class='line'>                          <span class="nx">day</span> <span class="o">+=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">10</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;w&quot;</span> <span class="o">:</span> <span class="k">case</span> <span class="s2">&quot;W&quot;</span> <span class="o">:</span>
</span><span class='line'>                          <span class="nx">day</span> <span class="o">+=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mi">7</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;m&quot;</span> <span class="o">:</span> <span class="k">case</span> <span class="s2">&quot;M&quot;</span> <span class="o">:</span>
</span><span class='line'>                          <span class="nx">month</span> <span class="o">+=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">10</span><span class="p">);</span>
</span><span class='line'>                          <span class="nx">day</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">day</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_getDaysInMonth</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="p">));</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="k">case</span> <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="k">case</span> <span class="s2">&quot;Y&quot;</span> <span class="o">:</span>
</span><span class='line'>                          <span class="nx">year</span> <span class="o">+=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">10</span><span class="p">);</span>
</span><span class='line'>                          <span class="nx">day</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">day</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_getDaysInMonth</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="p">));</span>
</span><span class='line'>                          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                  <span class="p">}</span>
</span><span class='line'>                  <span class="nx">matches</span> <span class="o">=</span> <span class="nx">pattern</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">offset</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="nx">day</span><span class="p">);</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="nx">newDate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">date</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span> <span class="nx">defaultDate</span> <span class="o">:</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">date</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span> <span class="nx">offsetString</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">:</span>
</span><span class='line'>              <span class="p">(</span><span class="k">typeof</span> <span class="nx">date</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">?</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">?</span> <span class="nx">defaultDate</span> <span class="o">:</span> <span class="nx">offsetNumeric</span><span class="p">(</span><span class="nx">date</span><span class="p">))</span> <span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()))));</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">newDate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">newDate</span> <span class="o">&amp;&amp;</span> <span class="nx">newDate</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;Invalid Date&quot;</span> <span class="o">?</span> <span class="nx">defaultDate</span> <span class="o">:</span> <span class="nx">newDate</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">newDate</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">newDate</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">newDate</span><span class="p">.</span><span class="nx">setMinutes</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">newDate</span><span class="p">.</span><span class="nx">setSeconds</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">newDate</span><span class="p">.</span><span class="nx">setMilliseconds</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="nx">newDate</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Handle switch to/from daylight saving.</span>
</span><span class='line'><span class="cm">  * Hours may be non-zero on daylight saving cut-over:</span>
</span><span class='line'><span class="cm">  * &gt; 12 when midnight changeover, but then cannot generate</span>
</span><span class='line'><span class="cm">  * midnight datetime, so jump to 1AM, otherwise reset.</span>
</span><span class='line'><span class="cm">  * @param  date  (Date) the date to check</span>
</span><span class='line'><span class="cm">  * @return  (Date) the corrected date</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_daylightSavingAdjust</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">date</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">12</span> <span class="o">?</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">date</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Set the date(s) directly. */</span>
</span><span class='line'>  <span class="nx">_setDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">noChange</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">clear</span> <span class="o">=</span> <span class="o">!</span><span class="nx">date</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">origMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">origYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">newDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_restrictMinMax</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_determineDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()));</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span> <span class="o">=</span> <span class="nx">newDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">drawMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentMonth</span> <span class="o">=</span> <span class="nx">newDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">drawYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentYear</span> <span class="o">=</span> <span class="nx">newDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">((</span><span class="nx">origMonth</span> <span class="o">!==</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span> <span class="o">||</span> <span class="nx">origYear</span> <span class="o">!==</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">noChange</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_notifyChange</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">_adjustInstDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">clear</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_formatDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">));</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Retrieve the date(s) directly. */</span>
</span><span class='line'>  <span class="nx">_getDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">startDate</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">currentYear</span> <span class="o">||</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">currentYear</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentMonth</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span><span class="p">)));</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">startDate</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Attach the onxxx handlers.  These are declared statically so</span>
</span><span class='line'><span class="cm">  * they work with static code transformers like Caja.</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>  <span class="nx">_attachHandlers</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">stepMonths</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;stepMonths&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/\\\\/g</span><span class="p">,</span> <span class="s2">&quot;\\&quot;</span> <span class="p">);</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;[data-handler]&quot;</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">handler</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">prev</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nb">window</span><span class="p">[</span><span class="s2">&quot;DP_jQuery_&quot;</span> <span class="o">+</span> <span class="nx">dpuuid</span><span class="p">].</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="o">-</span><span class="nx">stepMonths</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="p">},</span>
</span><span class='line'>              <span class="nx">next</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nb">window</span><span class="p">[</span><span class="s2">&quot;DP_jQuery_&quot;</span> <span class="o">+</span> <span class="nx">dpuuid</span><span class="p">].</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_adjustDate</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="o">+</span><span class="nx">stepMonths</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="p">},</span>
</span><span class='line'>              <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nb">window</span><span class="p">[</span><span class="s2">&quot;DP_jQuery_&quot;</span> <span class="o">+</span> <span class="nx">dpuuid</span><span class="p">].</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_hideDatepicker</span><span class="p">();</span>
</span><span class='line'>              <span class="p">},</span>
</span><span class='line'>              <span class="nx">today</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nb">window</span><span class="p">[</span><span class="s2">&quot;DP_jQuery_&quot;</span> <span class="o">+</span> <span class="nx">dpuuid</span><span class="p">].</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_gotoToday</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span><span class='line'>              <span class="p">},</span>
</span><span class='line'>              <span class="nx">selectDay</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nb">window</span><span class="p">[</span><span class="s2">&quot;DP_jQuery_&quot;</span> <span class="o">+</span> <span class="nx">dpuuid</span><span class="p">].</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_selectDay</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;data-month&quot;</span><span class="p">),</span> <span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;data-year&quot;</span><span class="p">),</span> <span class="k">this</span><span class="p">);</span>
</span><span class='line'>                  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>              <span class="p">},</span>
</span><span class='line'>              <span class="nx">selectMonth</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nb">window</span><span class="p">[</span><span class="s2">&quot;DP_jQuery_&quot;</span> <span class="o">+</span> <span class="nx">dpuuid</span><span class="p">].</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_selectMonthYear</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">);</span>
</span><span class='line'>                  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>              <span class="p">},</span>
</span><span class='line'>              <span class="nx">selectYear</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nb">window</span><span class="p">[</span><span class="s2">&quot;DP_jQuery_&quot;</span> <span class="o">+</span> <span class="nx">dpuuid</span><span class="p">].</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_selectMonthYear</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">);</span>
</span><span class='line'>                  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">};</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;data-event&quot;</span><span class="p">),</span> <span class="nx">handler</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;data-handler&quot;</span><span class="p">)]);</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Generate the HTML for the current state of the date picker. */</span>
</span><span class='line'>  <span class="nx">_generateHTML</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">maxDraw</span><span class="p">,</span> <span class="nx">prevText</span><span class="p">,</span> <span class="nx">prev</span><span class="p">,</span> <span class="nx">nextText</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">currentText</span><span class="p">,</span> <span class="nx">gotoDate</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">controls</span><span class="p">,</span> <span class="nx">buttonPanel</span><span class="p">,</span> <span class="nx">firstDay</span><span class="p">,</span> <span class="nx">showWeek</span><span class="p">,</span> <span class="nx">dayNames</span><span class="p">,</span> <span class="nx">dayNamesMin</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">monthNames</span><span class="p">,</span> <span class="nx">monthNamesShort</span><span class="p">,</span> <span class="nx">beforeShowDay</span><span class="p">,</span> <span class="nx">showOtherMonths</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">selectOtherMonths</span><span class="p">,</span> <span class="nx">defaultDate</span><span class="p">,</span> <span class="nx">html</span><span class="p">,</span> <span class="nx">dow</span><span class="p">,</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">group</span><span class="p">,</span> <span class="nx">col</span><span class="p">,</span> <span class="nx">selectedDate</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">cornerClass</span><span class="p">,</span> <span class="nx">calender</span><span class="p">,</span> <span class="nx">thead</span><span class="p">,</span> <span class="nx">day</span><span class="p">,</span> <span class="nx">daysInMonth</span><span class="p">,</span> <span class="nx">leadDays</span><span class="p">,</span> <span class="nx">curRows</span><span class="p">,</span> <span class="nx">numRows</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">printDate</span><span class="p">,</span> <span class="nx">dRow</span><span class="p">,</span> <span class="nx">tbody</span><span class="p">,</span> <span class="nx">daySettings</span><span class="p">,</span> <span class="nx">otherMonth</span><span class="p">,</span> <span class="nx">unselectable</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">tempDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
</span><span class='line'>          <span class="nx">today</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span>
</span><span class='line'>              <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">tempDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span> <span class="nx">tempDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">(),</span> <span class="nx">tempDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">())),</span> <span class="c1">// clear time</span>
</span><span class='line'>          <span class="nx">isRTL</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;isRTL&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">showButtonPanel</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showButtonPanel&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">hideIfNoPrevNext</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;hideIfNoPrevNext&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">navigationAsDateFormat</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;navigationAsDateFormat&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">numMonths</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getNumberOfMonths</span><span class="p">(</span><span class="nx">inst</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">showCurrentAtPos</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showCurrentAtPos&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">stepMonths</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;stepMonths&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">isMultiMonth</span> <span class="o">=</span> <span class="p">(</span><span class="nx">numMonths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">numMonths</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">currentDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">((</span><span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span> <span class="o">?</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">9999</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span> <span class="o">:</span>
</span><span class='line'>              <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">currentYear</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentMonth</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span><span class="p">))),</span>
</span><span class='line'>          <span class="nx">minDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getMinMaxDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">maxDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getMinMaxDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">drawMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">drawMonth</span> <span class="o">-</span> <span class="nx">showCurrentAtPos</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">drawYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">drawYear</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">drawMonth</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">drawMonth</span> <span class="o">+=</span> <span class="mi">12</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">drawYear</span><span class="o">--</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">maxDate</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">maxDraw</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">maxDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span>
</span><span class='line'>              <span class="nx">maxDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">-</span> <span class="p">(</span><span class="nx">numMonths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">numMonths</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">maxDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()));</span>
</span><span class='line'>          <span class="nx">maxDraw</span> <span class="o">=</span> <span class="p">(</span><span class="nx">minDate</span> <span class="o">&amp;&amp;</span> <span class="nx">maxDraw</span> <span class="o">&lt;</span> <span class="nx">minDate</span> <span class="o">?</span> <span class="nx">minDate</span> <span class="o">:</span> <span class="nx">maxDraw</span><span class="p">);</span>
</span><span class='line'>          <span class="k">while</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">drawYear</span><span class="p">,</span> <span class="nx">drawMonth</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">&gt;</span> <span class="nx">maxDraw</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">drawMonth</span><span class="o">--</span><span class="p">;</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">drawMonth</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">drawMonth</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
</span><span class='line'>                  <span class="nx">drawYear</span><span class="o">--</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">drawMonth</span> <span class="o">=</span> <span class="nx">drawMonth</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">drawYear</span> <span class="o">=</span> <span class="nx">drawYear</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">prevText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;prevText&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">prevText</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">navigationAsDateFormat</span> <span class="o">?</span> <span class="nx">prevText</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatDate</span><span class="p">(</span><span class="nx">prevText</span><span class="p">,</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">drawYear</span><span class="p">,</span> <span class="nx">drawMonth</span> <span class="o">-</span> <span class="nx">stepMonths</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_getFormatConfig</span><span class="p">(</span><span class="nx">inst</span><span class="p">)));</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">prev</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_canAdjustMonth</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">drawYear</span><span class="p">,</span> <span class="nx">drawMonth</span><span class="p">)</span> <span class="o">?</span>
</span><span class='line'>          <span class="s2">&quot;&lt;a class=&#39;ui-datepicker-prev ui-corner-all&#39; data-handler=&#39;prev&#39; data-event=&#39;click&#39;&quot;</span> <span class="o">+</span>
</span><span class='line'>          <span class="s2">&quot; title=&#39;&quot;</span> <span class="o">+</span> <span class="nx">prevText</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&lt;span class=&#39;ui-icon ui-icon-circle-triangle-&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">isRTL</span> <span class="o">?</span> <span class="s2">&quot;e&quot;</span> <span class="o">:</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">prevText</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&lt;/a&gt;&quot;</span> <span class="o">:</span>
</span><span class='line'>          <span class="p">(</span><span class="nx">hideIfNoPrevNext</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&lt;a class=&#39;ui-datepicker-prev ui-corner-all ui-state-disabled&#39; title=&#39;&quot;</span><span class="o">+</span> <span class="nx">prevText</span> <span class="o">+</span><span class="s2">&quot;&#39;&gt;&lt;span class=&#39;ui-icon ui-icon-circle-triangle-&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">isRTL</span> <span class="o">?</span> <span class="s2">&quot;e&quot;</span> <span class="o">:</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">prevText</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&lt;/a&gt;&quot;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">nextText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;nextText&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">nextText</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">navigationAsDateFormat</span> <span class="o">?</span> <span class="nx">nextText</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatDate</span><span class="p">(</span><span class="nx">nextText</span><span class="p">,</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">drawYear</span><span class="p">,</span> <span class="nx">drawMonth</span> <span class="o">+</span> <span class="nx">stepMonths</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_getFormatConfig</span><span class="p">(</span><span class="nx">inst</span><span class="p">)));</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">next</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_canAdjustMonth</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">drawYear</span><span class="p">,</span> <span class="nx">drawMonth</span><span class="p">)</span> <span class="o">?</span>
</span><span class='line'>          <span class="s2">&quot;&lt;a class=&#39;ui-datepicker-next ui-corner-all&#39; data-handler=&#39;next&#39; data-event=&#39;click&#39;&quot;</span> <span class="o">+</span>
</span><span class='line'>          <span class="s2">&quot; title=&#39;&quot;</span> <span class="o">+</span> <span class="nx">nextText</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&lt;span class=&#39;ui-icon ui-icon-circle-triangle-&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">isRTL</span> <span class="o">?</span> <span class="s2">&quot;w&quot;</span> <span class="o">:</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">nextText</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&lt;/a&gt;&quot;</span> <span class="o">:</span>
</span><span class='line'>          <span class="p">(</span><span class="nx">hideIfNoPrevNext</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&lt;a class=&#39;ui-datepicker-next ui-corner-all ui-state-disabled&#39; title=&#39;&quot;</span><span class="o">+</span> <span class="nx">nextText</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&lt;span class=&#39;ui-icon ui-icon-circle-triangle-&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">isRTL</span> <span class="o">?</span> <span class="s2">&quot;w&quot;</span> <span class="o">:</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">nextText</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&lt;/a&gt;&quot;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">currentText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;currentText&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">gotoDate</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;gotoCurrent&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span> <span class="o">?</span> <span class="nx">currentDate</span> <span class="o">:</span> <span class="nx">today</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">currentText</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">navigationAsDateFormat</span> <span class="o">?</span> <span class="nx">currentText</span> <span class="o">:</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">formatDate</span><span class="p">(</span><span class="nx">currentText</span><span class="p">,</span> <span class="nx">gotoDate</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getFormatConfig</span><span class="p">(</span><span class="nx">inst</span><span class="p">)));</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">controls</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">inline</span> <span class="o">?</span> <span class="s2">&quot;&lt;button type=&#39;button&#39; class=&#39;ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all&#39; data-handler=&#39;hide&#39; data-event=&#39;click&#39;&gt;&quot;</span> <span class="o">+</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;closeText&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/button&gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">buttonPanel</span> <span class="o">=</span> <span class="p">(</span><span class="nx">showButtonPanel</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&lt;div class=&#39;ui-datepicker-buttonpane ui-widget-content&#39;&gt;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="nx">controls</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>          <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_isInRange</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">gotoDate</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&lt;button type=&#39;button&#39; class=&#39;ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all&#39; data-handler=&#39;today&#39; data-event=&#39;click&#39;&quot;</span> <span class="o">+</span>
</span><span class='line'>          <span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="nx">currentText</span> <span class="o">+</span> <span class="s2">&quot;&lt;/button&gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">controls</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">firstDay</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;firstDay&quot;</span><span class="p">),</span><span class="mi">10</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">firstDay</span> <span class="o">=</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">firstDay</span><span class="p">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">firstDay</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">showWeek</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showWeek&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">dayNames</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dayNames&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">dayNamesMin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dayNamesMin&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">monthNames</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;monthNames&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">monthNamesShort</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;monthNamesShort&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">beforeShowDay</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;beforeShowDay&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">showOtherMonths</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showOtherMonths&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">selectOtherMonths</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;selectOtherMonths&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">defaultDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getDefaultDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">dow</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="nx">row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">row</span> <span class="o">&lt;</span> <span class="nx">numMonths</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="nx">row</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">group</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">maxRows</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="nx">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">col</span> <span class="o">&lt;</span> <span class="nx">numMonths</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="nx">col</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">selectedDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">drawYear</span><span class="p">,</span> <span class="nx">drawMonth</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span><span class="p">));</span>
</span><span class='line'>              <span class="nx">cornerClass</span> <span class="o">=</span> <span class="s2">&quot; ui-corner-all&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="nx">calender</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">isMultiMonth</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">calender</span> <span class="o">+=</span> <span class="s2">&quot;&lt;div class=&#39;ui-datepicker-group&quot;</span><span class="p">;</span>
</span><span class='line'>                  <span class="k">if</span> <span class="p">(</span><span class="nx">numMonths</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                      <span class="k">switch</span> <span class="p">(</span><span class="nx">col</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                          <span class="k">case</span> <span class="mi">0</span><span class="o">:</span> <span class="nx">calender</span> <span class="o">+=</span> <span class="s2">&quot; ui-datepicker-group-first&quot;</span><span class="p">;</span>
</span><span class='line'>                              <span class="nx">cornerClass</span> <span class="o">=</span> <span class="s2">&quot; ui-corner-&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="s2">&quot;right&quot;</span> <span class="o">:</span> <span class="s2">&quot;left&quot;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                          <span class="k">case</span> <span class="nx">numMonths</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span> <span class="nx">calender</span> <span class="o">+=</span> <span class="s2">&quot; ui-datepicker-group-last&quot;</span><span class="p">;</span>
</span><span class='line'>                              <span class="nx">cornerClass</span> <span class="o">=</span> <span class="s2">&quot; ui-corner-&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="s2">&quot;left&quot;</span> <span class="o">:</span> <span class="s2">&quot;right&quot;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                          <span class="k">default</span><span class="o">:</span> <span class="nx">calender</span> <span class="o">+=</span> <span class="s2">&quot; ui-datepicker-group-middle&quot;</span><span class="p">;</span> <span class="nx">cornerClass</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                  <span class="p">}</span>
</span><span class='line'>                  <span class="nx">calender</span> <span class="o">+=</span> <span class="s2">&quot;&#39;&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">calender</span> <span class="o">+=</span> <span class="s2">&quot;&lt;div class=&#39;ui-datepicker-header ui-widget-header ui-helper-clearfix&quot;</span> <span class="o">+</span> <span class="nx">cornerClass</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&quot;</span> <span class="o">+</span>
</span><span class='line'>                  <span class="p">(</span><span class="sr">/all|left/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">cornerClass</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">row</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="p">(</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="nx">next</span> <span class="o">:</span> <span class="nx">prev</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>                  <span class="p">(</span><span class="sr">/all|right/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">cornerClass</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">row</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="p">(</span><span class="nx">isRTL</span> <span class="o">?</span> <span class="nx">prev</span> <span class="o">:</span> <span class="nx">next</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>                  <span class="k">this</span><span class="p">.</span><span class="nx">_generateMonthYearHeader</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">drawMonth</span><span class="p">,</span> <span class="nx">drawYear</span><span class="p">,</span> <span class="nx">minDate</span><span class="p">,</span> <span class="nx">maxDate</span><span class="p">,</span>
</span><span class='line'>                  <span class="nx">row</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">col</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">monthNames</span><span class="p">,</span> <span class="nx">monthNamesShort</span><span class="p">)</span> <span class="o">+</span> <span class="c1">// draw month headers</span>
</span><span class='line'>                  <span class="s2">&quot;&lt;/div&gt;&lt;table class=&#39;ui-datepicker-calendar&#39;&gt;&lt;thead&gt;&quot;</span> <span class="o">+</span>
</span><span class='line'>                  <span class="s2">&quot;&lt;tr&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="nx">thead</span> <span class="o">=</span> <span class="p">(</span><span class="nx">showWeek</span> <span class="o">?</span> <span class="s2">&quot;&lt;th class=&#39;ui-datepicker-week-col&#39;&gt;&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;weekHeader&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/th&gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="k">for</span> <span class="p">(</span><span class="nx">dow</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">dow</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">;</span> <span class="nx">dow</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// days of the week</span>
</span><span class='line'>                  <span class="nx">day</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dow</span> <span class="o">+</span> <span class="nx">firstDay</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span><span class="p">;</span>
</span><span class='line'>                  <span class="nx">thead</span> <span class="o">+=</span> <span class="s2">&quot;&lt;th&quot;</span> <span class="o">+</span> <span class="p">((</span><span class="nx">dow</span> <span class="o">+</span> <span class="nx">firstDay</span> <span class="o">+</span> <span class="mi">6</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">&gt;=</span> <span class="mi">5</span> <span class="o">?</span> <span class="s2">&quot; class=&#39;ui-datepicker-week-end&#39;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span>
</span><span class='line'>                      <span class="s2">&quot;&lt;span title=&#39;&quot;</span> <span class="o">+</span> <span class="nx">dayNames</span><span class="p">[</span><span class="nx">day</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">dayNamesMin</span><span class="p">[</span><span class="nx">day</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&lt;/th&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">calender</span> <span class="o">+=</span> <span class="nx">thead</span> <span class="o">+</span> <span class="s2">&quot;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="nx">daysInMonth</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getDaysInMonth</span><span class="p">(</span><span class="nx">drawYear</span><span class="p">,</span> <span class="nx">drawMonth</span><span class="p">);</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">drawYear</span> <span class="o">===</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span> <span class="o">&amp;&amp;</span> <span class="nx">drawMonth</span> <span class="o">===</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span><span class="p">,</span> <span class="nx">daysInMonth</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">leadDays</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_getFirstDayOfMonth</span><span class="p">(</span><span class="nx">drawYear</span><span class="p">,</span> <span class="nx">drawMonth</span><span class="p">)</span> <span class="o">-</span> <span class="nx">firstDay</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span><span class="p">;</span>
</span><span class='line'>              <span class="nx">curRows</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">((</span><span class="nx">leadDays</span> <span class="o">+</span> <span class="nx">daysInMonth</span><span class="p">)</span> <span class="o">/</span> <span class="mi">7</span><span class="p">);</span> <span class="c1">// calculate the number of rows to generate</span>
</span><span class='line'>              <span class="nx">numRows</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isMultiMonth</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxRows</span> <span class="o">&gt;</span> <span class="nx">curRows</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxRows</span> <span class="o">:</span> <span class="nx">curRows</span> <span class="o">:</span> <span class="nx">curRows</span><span class="p">);</span> <span class="c1">//If multiple months, use the higher number of rows (see #7043)</span>
</span><span class='line'>              <span class="k">this</span><span class="p">.</span><span class="nx">maxRows</span> <span class="o">=</span> <span class="nx">numRows</span><span class="p">;</span>
</span><span class='line'>              <span class="nx">printDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">drawYear</span><span class="p">,</span> <span class="nx">drawMonth</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">leadDays</span><span class="p">));</span>
</span><span class='line'>              <span class="k">for</span> <span class="p">(</span><span class="nx">dRow</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">dRow</span> <span class="o">&lt;</span> <span class="nx">numRows</span><span class="p">;</span> <span class="nx">dRow</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// create date picker rows</span>
</span><span class='line'>                  <span class="nx">calender</span> <span class="o">+=</span> <span class="s2">&quot;&lt;tr&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>                  <span class="nx">tbody</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">showWeek</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&lt;td class=&#39;ui-datepicker-week-col&#39;&gt;&quot;</span> <span class="o">+</span>
</span><span class='line'>                      <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;calculateWeek&quot;</span><span class="p">)(</span><span class="nx">printDate</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span><span class="p">);</span>
</span><span class='line'>                  <span class="k">for</span> <span class="p">(</span><span class="nx">dow</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">dow</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">;</span> <span class="nx">dow</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// create date picker days</span>
</span><span class='line'>                      <span class="nx">daySettings</span> <span class="o">=</span> <span class="p">(</span><span class="nx">beforeShowDay</span> <span class="o">?</span>
</span><span class='line'>                          <span class="nx">beforeShowDay</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">?</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">),</span> <span class="p">[</span><span class="nx">printDate</span><span class="p">])</span> <span class="o">:</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]);</span>
</span><span class='line'>                      <span class="nx">otherMonth</span> <span class="o">=</span> <span class="p">(</span><span class="nx">printDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">!==</span> <span class="nx">drawMonth</span><span class="p">);</span>
</span><span class='line'>                      <span class="nx">unselectable</span> <span class="o">=</span> <span class="p">(</span><span class="nx">otherMonth</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">selectOtherMonths</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nx">daySettings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">minDate</span> <span class="o">&amp;&amp;</span> <span class="nx">printDate</span> <span class="o">&lt;</span> <span class="nx">minDate</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">maxDate</span> <span class="o">&amp;&amp;</span> <span class="nx">printDate</span> <span class="o">&gt;</span> <span class="nx">maxDate</span><span class="p">);</span>
</span><span class='line'>                      <span class="nx">tbody</span> <span class="o">+=</span> <span class="s2">&quot;&lt;td class=&#39;&quot;</span> <span class="o">+</span>
</span><span class='line'>                          <span class="p">((</span><span class="nx">dow</span> <span class="o">+</span> <span class="nx">firstDay</span> <span class="o">+</span> <span class="mi">6</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">&gt;=</span> <span class="mi">5</span> <span class="o">?</span> <span class="s2">&quot; ui-datepicker-week-end&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="c1">// highlight weekends</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">otherMonth</span> <span class="o">?</span> <span class="s2">&quot; ui-datepicker-other-month&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="c1">// highlight days from other months</span>
</span><span class='line'>                          <span class="p">((</span><span class="nx">printDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">===</span> <span class="nx">selectedDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">drawMonth</span> <span class="o">===</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">_keyEvent</span><span class="p">)</span> <span class="o">||</span> <span class="c1">// user pressed key</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">defaultDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">===</span> <span class="nx">printDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">defaultDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">===</span> <span class="nx">selectedDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">())</span> <span class="o">?</span>
</span><span class='line'>                          <span class="c1">// or defaultDate is current printedDate and defaultDate is selectedDate</span>
</span><span class='line'>                          <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dayOverClass</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="c1">// highlight selected day</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">unselectable</span> <span class="o">?</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_unselectableClass</span> <span class="o">+</span> <span class="s2">&quot; ui-state-disabled&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span>  <span class="c1">// highlight unselectable days</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">otherMonth</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">showOtherMonths</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">daySettings</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="c1">// highlight custom dates</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">printDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">===</span> <span class="nx">currentDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">?</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentClass</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="c1">// highlight selected day</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">printDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">===</span> <span class="nx">today</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">?</span> <span class="s2">&quot; ui-datepicker-today&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">+</span> <span class="c1">// highlight today (if different)</span>
</span><span class='line'>                          <span class="p">((</span><span class="o">!</span><span class="nx">otherMonth</span> <span class="o">||</span> <span class="nx">showOtherMonths</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">daySettings</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">?</span> <span class="s2">&quot; title=&#39;&quot;</span> <span class="o">+</span> <span class="nx">daySettings</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&#39;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;#39;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="c1">// cell title</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">unselectable</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot; data-handler=&#39;selectDay&#39; data-event=&#39;click&#39; data-month=&#39;&quot;</span> <span class="o">+</span> <span class="nx">printDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;&#39; data-year=&#39;&quot;</span> <span class="o">+</span> <span class="nx">printDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="c1">// actions</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">otherMonth</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">showOtherMonths</span> <span class="o">?</span> <span class="s2">&quot;&amp;#xa0;&quot;</span> <span class="o">:</span> <span class="c1">// display for other months</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">unselectable</span> <span class="o">?</span> <span class="s2">&quot;&lt;span class=&#39;ui-state-default&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">printDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&lt;a class=&#39;ui-state-default&quot;</span> <span class="o">+</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">printDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">===</span> <span class="nx">today</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">?</span> <span class="s2">&quot; ui-state-highlight&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">printDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">===</span> <span class="nx">currentDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">?</span> <span class="s2">&quot; ui-state-active&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="c1">// highlight selected day</span>
</span><span class='line'>                          <span class="p">(</span><span class="nx">otherMonth</span> <span class="o">?</span> <span class="s2">&quot; ui-priority-secondary&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="c1">// distinguish dates from other months</span>
</span><span class='line'>                          <span class="s2">&quot;&#39; href=&#39;#&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">printDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;&lt;/a&gt;&quot;</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span><span class="p">;</span> <span class="c1">// display selectable date</span>
</span><span class='line'>                      <span class="nx">printDate</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">printDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>                      <span class="nx">printDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="nx">printDate</span><span class="p">);</span>
</span><span class='line'>                  <span class="p">}</span>
</span><span class='line'>                  <span class="nx">calender</span> <span class="o">+=</span> <span class="nx">tbody</span> <span class="o">+</span> <span class="s2">&quot;&lt;/tr&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">drawMonth</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="nx">drawMonth</span> <span class="o">&gt;</span> <span class="mi">11</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">drawMonth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>                  <span class="nx">drawYear</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">calender</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/tbody&gt;&lt;/table&gt;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">isMultiMonth</span> <span class="o">?</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span> <span class="o">+</span>
</span><span class='line'>                          <span class="p">((</span><span class="nx">numMonths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">col</span> <span class="o">===</span> <span class="nx">numMonths</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&lt;div class=&#39;ui-datepicker-row-break&#39;&gt;&lt;/div&gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="nx">group</span> <span class="o">+=</span> <span class="nx">calender</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="nx">html</span> <span class="o">+=</span> <span class="nx">group</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">html</span> <span class="o">+=</span> <span class="nx">buttonPanel</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">_keyEvent</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Generate the month and year header. */</span>
</span><span class='line'>  <span class="nx">_generateMonthYearHeader</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">drawMonth</span><span class="p">,</span> <span class="nx">drawYear</span><span class="p">,</span> <span class="nx">minDate</span><span class="p">,</span> <span class="nx">maxDate</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">secondary</span><span class="p">,</span> <span class="nx">monthNames</span><span class="p">,</span> <span class="nx">monthNamesShort</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">inMinYear</span><span class="p">,</span> <span class="nx">inMaxYear</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="nx">years</span><span class="p">,</span> <span class="nx">thisYear</span><span class="p">,</span> <span class="nx">determineYear</span><span class="p">,</span> <span class="nx">year</span><span class="p">,</span> <span class="nx">endYear</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">changeMonth</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;changeMonth&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">changeYear</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;changeYear&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">showMonthAfterYear</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;showMonthAfterYear&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">html</span> <span class="o">=</span> <span class="s2">&quot;&lt;div class=&#39;ui-datepicker-title&#39;&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">monthHtml</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// month selection</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">secondary</span> <span class="o">||</span> <span class="o">!</span><span class="nx">changeMonth</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">monthHtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;span class=&#39;ui-datepicker-month&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">monthNames</span><span class="p">[</span><span class="nx">drawMonth</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inMinYear</span> <span class="o">=</span> <span class="p">(</span><span class="nx">minDate</span> <span class="o">&amp;&amp;</span> <span class="nx">minDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">===</span> <span class="nx">drawYear</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">inMaxYear</span> <span class="o">=</span> <span class="p">(</span><span class="nx">maxDate</span> <span class="o">&amp;&amp;</span> <span class="nx">maxDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">===</span> <span class="nx">drawYear</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">monthHtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;select class=&#39;ui-datepicker-month&#39; data-handler=&#39;selectMonth&#39; data-event=&#39;change&#39;&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span> <span class="nx">month</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">month</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="p">;</span> <span class="nx">month</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">((</span><span class="o">!</span><span class="nx">inMinYear</span> <span class="o">||</span> <span class="nx">month</span> <span class="o">&gt;=</span> <span class="nx">minDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">())</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">inMaxYear</span> <span class="o">||</span> <span class="nx">month</span> <span class="o">&lt;=</span> <span class="nx">maxDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()))</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">monthHtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;option value=&#39;&quot;</span> <span class="o">+</span> <span class="nx">month</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">+</span>
</span><span class='line'>                      <span class="p">(</span><span class="nx">month</span> <span class="o">===</span> <span class="nx">drawMonth</span> <span class="o">?</span> <span class="s2">&quot; selected=&#39;selected&#39;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>                      <span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="nx">monthNamesShort</span><span class="p">[</span><span class="nx">month</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&lt;/option&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="nx">monthHtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/select&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">showMonthAfterYear</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">html</span> <span class="o">+=</span> <span class="nx">monthHtml</span> <span class="o">+</span> <span class="p">(</span><span class="nx">secondary</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="nx">changeMonth</span> <span class="o">&amp;&amp;</span> <span class="nx">changeYear</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;#xa0;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// year selection</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">secondary</span> <span class="o">||</span> <span class="o">!</span><span class="nx">changeYear</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">html</span> <span class="o">+=</span> <span class="s2">&quot;&lt;span class=&#39;ui-datepicker-year&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">drawYear</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// determine range of years to display</span>
</span><span class='line'>              <span class="nx">years</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;yearRange&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="nx">thisYear</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getFullYear</span><span class="p">();</span>
</span><span class='line'>              <span class="nx">determineYear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/c[+\-].*/</span><span class="p">)</span> <span class="o">?</span> <span class="nx">drawYear</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span> <span class="o">:</span>
</span><span class='line'>                      <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/[+\-].*/</span><span class="p">)</span> <span class="o">?</span> <span class="nx">thisYear</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">:</span>
</span><span class='line'>                      <span class="nb">parseInt</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="mi">10</span><span class="p">)));</span>
</span><span class='line'>                  <span class="k">return</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">year</span><span class="p">)</span> <span class="o">?</span> <span class="nx">thisYear</span> <span class="o">:</span> <span class="nx">year</span><span class="p">);</span>
</span><span class='line'>              <span class="p">};</span>
</span><span class='line'>              <span class="nx">year</span> <span class="o">=</span> <span class="nx">determineYear</span><span class="p">(</span><span class="nx">years</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>              <span class="nx">endYear</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">determineYear</span><span class="p">(</span><span class="nx">years</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">));</span>
</span><span class='line'>              <span class="nx">year</span> <span class="o">=</span> <span class="p">(</span><span class="nx">minDate</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">minDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">())</span> <span class="o">:</span> <span class="nx">year</span><span class="p">);</span>
</span><span class='line'>              <span class="nx">endYear</span> <span class="o">=</span> <span class="p">(</span><span class="nx">maxDate</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">endYear</span><span class="p">,</span> <span class="nx">maxDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">())</span> <span class="o">:</span> <span class="nx">endYear</span><span class="p">);</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;select class=&#39;ui-datepicker-year&#39; data-handler=&#39;selectYear&#39; data-event=&#39;change&#39;&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="k">for</span> <span class="p">(;</span> <span class="nx">year</span> <span class="o">&lt;=</span> <span class="nx">endYear</span><span class="p">;</span> <span class="nx">year</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;option value=&#39;&quot;</span> <span class="o">+</span> <span class="nx">year</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">+</span>
</span><span class='line'>                      <span class="p">(</span><span class="nx">year</span> <span class="o">===</span> <span class="nx">drawYear</span> <span class="o">?</span> <span class="s2">&quot; selected=&#39;selected&#39;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>                      <span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="nx">year</span> <span class="o">+</span> <span class="s2">&quot;&lt;/option&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/select&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>              <span class="nx">html</span> <span class="o">+=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span><span class="p">;</span>
</span><span class='line'>              <span class="nx">inst</span><span class="p">.</span><span class="nx">yearshtml</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">html</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;yearSuffix&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">showMonthAfterYear</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">html</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">secondary</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="nx">changeMonth</span> <span class="o">&amp;&amp;</span> <span class="nx">changeYear</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;#xa0;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">monthHtml</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">html</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span><span class="p">;</span> <span class="c1">// Close datepicker_header</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Adjust one of the date sub-fields. */</span>
</span><span class='line'>  <span class="nx">_adjustInstDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">offset</span><span class="p">,</span> <span class="nx">period</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">drawYear</span> <span class="o">+</span> <span class="p">(</span><span class="nx">period</span> <span class="o">===</span> <span class="s2">&quot;Y&quot;</span> <span class="o">?</span> <span class="nx">offset</span> <span class="o">:</span> <span class="mi">0</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">month</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">drawMonth</span> <span class="o">+</span> <span class="p">(</span><span class="nx">period</span> <span class="o">===</span> <span class="s2">&quot;M&quot;</span> <span class="o">?</span> <span class="nx">offset</span> <span class="o">:</span> <span class="mi">0</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">day</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getDaysInMonth</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="p">))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">period</span> <span class="o">===</span> <span class="s2">&quot;D&quot;</span> <span class="o">?</span> <span class="nx">offset</span> <span class="o">:</span> <span class="mi">0</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">date</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_restrictMinMax</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="nx">day</span><span class="p">)));</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">drawMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">inst</span><span class="p">.</span><span class="nx">drawYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">period</span> <span class="o">===</span> <span class="s2">&quot;M&quot;</span> <span class="o">||</span> <span class="nx">period</span> <span class="o">===</span> <span class="s2">&quot;Y&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_notifyChange</span><span class="p">(</span><span class="nx">inst</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Ensure a date is within any min/max bounds. */</span>
</span><span class='line'>  <span class="nx">_restrictMinMax</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">minDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getMinMaxDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">maxDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getMinMaxDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">newDate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">minDate</span> <span class="o">&amp;&amp;</span> <span class="nx">date</span> <span class="o">&lt;</span> <span class="nx">minDate</span> <span class="o">?</span> <span class="nx">minDate</span> <span class="o">:</span> <span class="nx">date</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">(</span><span class="nx">maxDate</span> <span class="o">&amp;&amp;</span> <span class="nx">newDate</span> <span class="o">&gt;</span> <span class="nx">maxDate</span> <span class="o">?</span> <span class="nx">maxDate</span> <span class="o">:</span> <span class="nx">newDate</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Notify change of month/year. */</span>
</span><span class='line'>  <span class="nx">_notifyChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">onChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;onChangeMonthYear&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">onChange</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">onChange</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">inst</span><span class="p">.</span><span class="nx">input</span> <span class="o">?</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">),</span>
</span><span class='line'>              <span class="p">[</span><span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">inst</span><span class="p">]);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Determine the number of months to show. */</span>
</span><span class='line'>  <span class="nx">_getNumberOfMonths</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">numMonths</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;numberOfMonths&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">(</span><span class="nx">numMonths</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">numMonths</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">?</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="nx">numMonths</span><span class="p">]</span> <span class="o">:</span> <span class="nx">numMonths</span><span class="p">));</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Determine the current maximum date - ensure no time components are set. */</span>
</span><span class='line'>  <span class="nx">_getMinMaxDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">minMax</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_determineDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">minMax</span> <span class="o">+</span> <span class="s2">&quot;Date&quot;</span><span class="p">),</span> <span class="kc">null</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Find the number of days in a given month. */</span>
</span><span class='line'>  <span class="nx">_getDaysInMonth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="mi">32</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="mi">32</span><span class="p">)).</span><span class="nx">getDate</span><span class="p">();</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Find the day of the week of the first of a month. */</span>
</span><span class='line'>  <span class="nx">_getFirstDayOfMonth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="mi">1</span><span class="p">).</span><span class="nx">getDay</span><span class="p">();</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Determines if we should allow a &quot;next/prev&quot; month display change. */</span>
</span><span class='line'>  <span class="nx">_canAdjustMonth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">offset</span><span class="p">,</span> <span class="nx">curYear</span><span class="p">,</span> <span class="nx">curMonth</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">numMonths</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getNumberOfMonths</span><span class="p">(</span><span class="nx">inst</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">date</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">curYear</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">curMonth</span> <span class="o">+</span> <span class="p">(</span><span class="nx">offset</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">offset</span> <span class="o">:</span> <span class="nx">numMonths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">numMonths</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">1</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">offset</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">date</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_getDaysInMonth</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()));</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_isInRange</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">date</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Is the given date in the accepted range? */</span>
</span><span class='line'>  <span class="nx">_isInRange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">yearSplit</span><span class="p">,</span> <span class="nx">currentYear</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">minDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getMinMaxDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">maxDate</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getMinMaxDate</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">minYear</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">maxYear</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">years</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;yearRange&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">years</span><span class="p">){</span>
</span><span class='line'>              <span class="nx">yearSplit</span> <span class="o">=</span> <span class="nx">years</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="nx">currentYear</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getFullYear</span><span class="p">();</span>
</span><span class='line'>              <span class="nx">minYear</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">yearSplit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>
</span><span class='line'>              <span class="nx">maxYear</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">yearSplit</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span> <span class="nx">yearSplit</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">match</span><span class="p">(</span><span class="sr">/[+\-].*/</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">minYear</span> <span class="o">+=</span> <span class="nx">currentYear</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span> <span class="nx">yearSplit</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">match</span><span class="p">(</span><span class="sr">/[+\-].*/</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">maxYear</span> <span class="o">+=</span> <span class="nx">currentYear</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="p">((</span><span class="o">!</span><span class="nx">minDate</span> <span class="o">||</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="nx">minDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">())</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>          <span class="p">(</span><span class="o">!</span><span class="nx">maxDate</span> <span class="o">||</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="nx">maxDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">())</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>          <span class="p">(</span><span class="o">!</span><span class="nx">minYear</span> <span class="o">||</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="nx">minYear</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>          <span class="p">(</span><span class="o">!</span><span class="nx">maxYear</span> <span class="o">||</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="nx">maxYear</span><span class="p">));</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Provide the configuration settings for formatting/parsing. */</span>
</span><span class='line'>  <span class="nx">_getFormatConfig</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">shortYearCutoff</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;shortYearCutoff&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">shortYearCutoff</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">shortYearCutoff</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span> <span class="nx">shortYearCutoff</span> <span class="o">:</span>
</span><span class='line'>          <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">shortYearCutoff</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">{</span><span class="nx">shortYearCutoff</span><span class="o">:</span> <span class="nx">shortYearCutoff</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">dayNamesShort</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dayNamesShort&quot;</span><span class="p">),</span> <span class="nx">dayNames</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dayNames&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">monthNamesShort</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;monthNamesShort&quot;</span><span class="p">),</span> <span class="nx">monthNames</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;monthNames&quot;</span><span class="p">)};</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Format the given date for display. */</span>
</span><span class='line'>  <span class="nx">_formatDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="nx">day</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="nx">year</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">day</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedDay</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">currentMonth</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedMonth</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">inst</span><span class="p">.</span><span class="nx">currentYear</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">selectedYear</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="p">(</span><span class="nx">day</span> <span class="o">?</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">day</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">?</span> <span class="nx">day</span> <span class="o">:</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="nx">day</span><span class="p">)))</span> <span class="o">:</span>
</span><span class='line'>          <span class="k">this</span><span class="p">.</span><span class="nx">_daylightSavingAdjust</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">currentYear</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentMonth</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">currentDay</span><span class="p">)));</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatDate</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">inst</span><span class="p">,</span> <span class="s2">&quot;dateFormat&quot;</span><span class="p">),</span> <span class="nx">date</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getFormatConfig</span><span class="p">(</span><span class="nx">inst</span><span class="p">));</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm"> * Bind hover events for datepicker elements.</span>
</span><span class='line'><span class="cm"> * Done via delegate so the binding only occurs once in the lifetime of the parent div.</span>
</span><span class='line'><span class="cm"> * Global instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">bindHover</span><span class="p">(</span><span class="nx">dpDiv</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">selector</span> <span class="o">=</span> <span class="s2">&quot;button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">dpDiv</span><span class="p">.</span><span class="nx">delegate</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="s2">&quot;mouseout&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;ui-state-hover&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;ui-datepicker-prev&quot;</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;ui-datepicker-prev-hover&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;ui-datepicker-next&quot;</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;ui-datepicker-next-hover&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">})</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">delegate</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="s2">&quot;mouseover&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_isDisabledDatepicker</span><span class="p">(</span> <span class="nx">instActive</span><span class="p">.</span><span class="nx">inline</span> <span class="o">?</span> <span class="nx">dpDiv</span><span class="p">.</span><span class="nx">parent</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">instActive</span><span class="p">.</span><span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parents</span><span class="p">(</span><span class="s2">&quot;.ui-datepicker-calendar&quot;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;ui-state-hover&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;ui-state-hover&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;ui-datepicker-prev&quot;</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;ui-datepicker-prev-hover&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;ui-datepicker-next&quot;</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;ui-datepicker-next-hover&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* jQuery extend now ignores nulls! */</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">extendRemove</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">props</span><span class="p">);</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">props</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">target</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">props</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Invoke the datepicker functionality.</span>
</span><span class='line'><span class="cm">   @param  options  string - a command, optionally followed by additional parameters or</span>
</span><span class='line'><span class="cm">                 Object - settings for attaching new datepicker functionality</span>
</span><span class='line'><span class="cm">   @return  jQuery object */</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">datepicker</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Verify an empty collection wasn&#39;t passed - Fixes #6976 */</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Initialise the date picker. */</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">initialized</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">mousedown</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_checkExternalClick</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">initialized</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Append datepicker main container to body if not exist. */</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_mainDivId</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">dpDiv</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">otherArgs</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">options</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">options</span> <span class="o">===</span> <span class="s2">&quot;isDisabled&quot;</span> <span class="o">||</span> <span class="nx">options</span> <span class="o">===</span> <span class="s2">&quot;getDate&quot;</span> <span class="o">||</span> <span class="nx">options</span> <span class="o">===</span> <span class="s2">&quot;widget&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">[</span><span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nx">options</span> <span class="o">+</span> <span class="s2">&quot;Datepicker&quot;</span><span class="p">].</span>
</span><span class='line'>          <span class="nx">apply</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">otherArgs</span><span class="p">));</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">===</span> <span class="s2">&quot;option&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">[</span><span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nx">options</span> <span class="o">+</span> <span class="s2">&quot;Datepicker&quot;</span><span class="p">].</span>
</span><span class='line'>          <span class="nx">apply</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">otherArgs</span><span class="p">));</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">typeof</span> <span class="nx">options</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">[</span><span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nx">options</span> <span class="o">+</span> <span class="s2">&quot;Datepicker&quot;</span><span class="p">].</span>
</span><span class='line'>              <span class="nx">apply</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">otherArgs</span><span class="p">))</span> <span class="o">:</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">_attachDatepicker</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Datepicker</span><span class="p">();</span> <span class="c1">// singleton instance</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">initialized</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">uuid</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">datepicker</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="s2">&quot;1.10.2&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Workaround for #4055</span>
</span><span class='line'><span class="c1">// Add another global to avoid noConflict issues with inline event handlers</span>
</span><span class='line'><span class="nb">window</span><span class="p">[</span><span class="s2">&quot;DP_jQuery_&quot;</span> <span class="o">+</span> <span class="nx">dpuuid</span><span class="p">]</span> <span class="o">=</span> <span class="nx">$</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Ajia</span></span>

      








  


<time datetime="2013-04-03T14:11:00+08:00" pubdate data-updated="true">Apr 3<span>rd</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/javascript/'>javascript</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/04/01/xue-xi-ruby-on-rails-rubyhe-railsde-an-zhuang/" title="Previous Post: 学习ruby on rails-ruby和rails的安装">&laquo; 学习ruby on rails-ruby和rails的安装</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/04/04/ru-he-huo-de-chuang-ye-dian-zi/" title="Next Post: 如何获得创业点子">如何获得创业点子 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/cocos2d' style='font-size: 104.0%'>cocos2d(1)</a> <a href='/blog/categories/java' style='font-size: 160.0%'>java(15)</a> <a href='/blog/categories/javascript' style='font-size: 124.0%'>javascript(6)</a> <a href='/blog/categories/octopress' style='font-size: 120.0%'>Octopress(5)</a> <a href='/blog/categories/ruby' style='font-size: 116.0%'>ruby(4)</a> <a href='/blog/categories/solr' style='font-size: 104.0%'>solr(1)</a> <a href='/blog/categories/创业' style='font-size: 108.0%'>创业(2)</a> <a href='/blog/categories/数据库' style='font-size: 104.0%'>数据库(1)</a> <a href='/blog/categories/生活' style='font-size: 108.0%'>生活(2)</a> </span>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/cocos2d'>cocos2d (1)</a></li><li><a href='/blog/categories/java'>java (15)</a></li><li><a href='/blog/categories/javascript'>javascript (6)</a></li><li><a href='/blog/categories/octopress'>Octopress (5)</a></li><li><a href='/blog/categories/ruby'>ruby (4)</a></li><li><a href='/blog/categories/solr'>solr (1)</a></li><li><a href='/blog/categories/创业'>创业 (2)</a></li><li><a href='/blog/categories/数据库'>数据库 (1)</a></li><li><a href='/blog/categories/生活'>生活 (2)</a></li></ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/19/yong-gitzuo-ban-ben-kong-zhi/">用Git做版本控制</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/19/chuang-ye-jian-yi/">创业12条建议</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/05/guavade-shi-yong-zhi-nan-zhi-cache/">Guava的使用指南之Cache</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/27/sublime-textde-%5B%3F%5D-xie-pei-zhi/">Sublime Text的一些配置</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/27/jie-jue-heroku-push-timeoutcuo-wu/">解决heroku push timeout错误</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/ajia">@ajia</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'ajia',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

  
<section>  
  <h1>新浪微博</h1>  
  <ul id="weibo">  
    <li>  
      <iframe   
        width="100%"   
        height="550"   
        class="share_self"   
        frameborder="0"   
        scrolling="no"   
        src="http://widget.weibo.com/weiboshow/index.php?width=0&height=550&ptype=1&speed=0&skin=&isTitle=0&noborder=1&isWeibo=1&isFans=&uid=1773810951&verifier=c56fe36a">  
      </iframe>  
    </li>  
  </ul>  
</section>  


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/pinpin9811@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Ajia -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ajia';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://ajia.github.com/blog/2013/04/03/javascriptpan-duan-fang-fa-shi-fou-cun-zai/';
        var disqus_url = 'http://ajia.github.com/blog/2013/04/03/javascriptpan-duan-fang-fa-shi-fou-cun-zai/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
